{"version":3,"sources":["assets/logomark.svg","ECNViewer/ControllerInfo.js","ECNViewer/ActiveResources.js","Theme/ThemeProvider.js","ECNViewer/utils.js","Utils/Modal.js","Utils/Confirm.js","Utils/Alert.js","Utils/FeedbackContext.js","ControllerProvider/index.js","ECNViewer/AgentList/ConnectNode.js","Utils/Autocomplete.js","ECNViewer/AgentList/AddMicroservice.js","ECNViewer/AgentList/RemoveMicroservice.js","ECNViewer/AgentList/Tabs.js","ECNViewer/AgentList/index.js","ECNViewer/Map.js","ECNViewer/index.js","hooks/useInterval.js","Config/index.js","Layout/index.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","__webpack_require__","p","useStyles","makeStyles","theme","controllerInfo","paddingTop","& .paper","padding","warningChip","backgroundColor","concat","colors","danger","color","controllerTitle","display","justifyContent","textEmphasis","ControllerInfo","props","classes","useTheme","controller","loading","error","_ref","location","city","country","lat","lon","query","controllerError","react_default","a","createElement","className","Typography","variant","Tooltip","title","message","aria-label","Chip","label","style","--color","gold","List","ListItem","ListItemIcon","LocationCity_default","ListItemText","bundle_default","primary","cursor","onClick","selectController","GpsFixed_default","WifiTethering_default","summary","gridTemplateColumns","gridColumnGap","textAlign","ActiveResources","activeFlows","activeAgents","activeMsvcs","Paper","length","phosphorus","cobalt","chromium","argon","carbon","lead","aluminium","silver","white","createMuiTheme","Object","objectSpread","customTheme","success","Theming","ThemeProvider","children","statusColor","RUNNING","UNKNOWN","OFFLINE","msvcStatusColor","modalTitle","borderRadius","modal","width","top","left","position","modalContent","maxHeight","overflowY","modalActions","alignItems","modalAction","marginLeft","_Modal","open","onClose","Modal","assign","aria-labelledby","Close_default","actions","map","Button","text","divider","margin","Confirm","onConfirm","Divider","Grid","container","justify","spacing","item","variantIcon","CheckCircleIcon","warning","WarningIcon","ErrorIcon","info","InfoIcon","icon","fontSize","iconVariant","opacity","marginRight","alert","boxShadow","flexDirection","bottom","zIndex","Alert","alerts","idx","variantKey","type","Icon","SnackbarContent","key","id","aria-describedby","action","IconButton","FeedbackContext","React","createContext","feedbacks","setFeedbacks","pushFeedback","ADD","REMOVE","SET","initState","nextId","reducer","state","toConsumableArray","data","timeout","setTimeout","dispatch","idxToRemove","findIndex","f","slice","Context","_React$useReducer","useReducer","_React$useReducer2","slicedToArray","console","log","Provider","value","newFeedbacks","newFeedback","push","Consumer","initControllerState","localUser","window","localStorage","getItem","controllerJson","user","JSON","parse","api","protocol","ip","port","getUrl","path","dev","host","split","join","getHeaders","headers","controllerConfig","ECN-Api-Destination","ControllerContext","updateController","lookUpControllerInfo","asyncToGenerator","regenerator_default","mark","_callee","localhost","response","wrap","_context","prev","next","RegExp","test","fetch","sent","ok","abrupt","json","Error","statusText","stop","_x","apply","this","arguments","updateControllerInfo","_ref2","_callee2","ipInfo","_context2","t0","_x2","token","ERROR","CLEAN_ERROR","UPDATE","SET_TOKEN","newState","authenticate","_ref3","_callee3","_token","_context3","method","Accept","Content-Type","body","stringify","accessToken","_x3","request","_ref4","_callee4","options","t","_args4","_context4","undefined","Authorization","_x4","_ref5","_callee5","newController","_context5","setItem","t1","t2","t3","t4","_x5","useEffect","_callee6","_context6","initNode","name","newError","ConnectNode","_React$useState","useState","_React$useState2","node","setNode","useContext","handleChange","event","defineProperty","target","createAgent","agent","uuid","getProvisioningKey","linkAgent","ioFogApi","controller-url","provisionAgent","provisioning-key","_x6","connect","iofogUuid","provisioningKey","fogType","Fragment","xs","sm","TextField","onChange","fullWidth","textField","helperText","root","flexGrow","height","paper","marginTop","marginBot","right","chip","inputRoot","flexWrap","inputInput","Autocomplete","downshift_esm","itemToString","get","initialSelectedItem","selectedItem","clearSelection","getInputProps","getItemProps","getLabelProps","getMenuProps","highlightedIndex","inputValue","isOpen","openMenu","_getInputProps","onFocus","disabled","placeholder","onBlur","inputProps","objectWithoutProperties","InputProps","ref","others","inputRef","input","renderInput","InputLabelProps","shrink","square","_ref$showEmpty","showEmpty","deburr","trim","toLowerCase","inputLength","count","suggestions","filter","suggestion","keep","maxSuggestions","startsWith","getSuggestions","index","suggestionProps","itemProps","isHighlighted","isSelected","MenuItem","selected","component","fontWeight","renderSuggestion","formControl","rowIcon","newPaper","border","inputWithIcon","MenuProps","PaperProps","ITEM_HEIGHT","initMsvc","flow","catalog","images","volumeMappings","ports","rootHostAccess","_new","initFlow","isActivated","initCatalogItem","fogTypeId","containerImage","registryId","initRoute","from","to","randomString","Math","random","toString","replace","substr","generateRouteSelect","current","list","isNewMsvc","e","m","AddMicroservice","flows","setFlows","_React$useState3","_React$useState4","setCatalog","config","useRef","ReactJsonRef","main_default","src","onAdd","updated_src","onEdit","onDelete","_React$useState5","_React$useState6","msvc","setMsvc","_React$useState7","_React$useState8","newFlow","setNewFlow","_React$useState9","_React$useState10","newCatalogItem","setNewCatalogItem","_React$useState11","_React$useState12","routes","setRoutes","Promise","all","flowRaw","flowsRes","catalogRaw","catalogRes","catalogItems","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","Symbol","iterator","done","err","return","setter","prevState","handleMsvcChangeArray","objKey","valueDecorator","x","getCatalogImage","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","img","removeFromArray","addMsvc","flowId","catalogItemId","createFlow","createCatalogItem","catalogItem","_catalog","createRoute","_ref6","route","createRoutes","_ref7","_callee7","defaultUuid","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_iterator3","_step3","_context7","finish","createMsvc","_ref8","_callee8","_context8","onSuccess","routeList","microservices","FormControl","required","FormControlLabel","control","Checkbox","checked","v","hostDestination","containerDestination","InputLabel","htmlFor","Select","accessMode","Input","parseInt","external","internal","r","SwapHoriz_default","chips","marginBottom","RemoveMicroservice","msvcsToRemove","setMsvcsToRemove","remove","res","indexOf","msvcsPerUUID","msvcs","reduce","multiple","renderValue","TabContainer","palette","background","SimpleTabs","setValue","Tabs","newValue","child","Tab","avatarList","msvcChipList","flex","paddingRight","msvcChip","& .MuiChip-label","textOverflow","whiteSpace","overflow","jsonDisplay","minHeight","fontFamily","lineHeight","listTitle","link","secondary","&:hover","textDecoration","AgentList","openRemoveAgentConfirm","setOpenRemoveAgentConfirm","openDetailsModal","setOpenDetailsModal","openConnectNodeModal","setOpenConnectNodeModal","openAddMicroserviceModal","setOpenAddMicroserviceModal","openRemoveMicroserviceModal","setOpenRemoveMicroserviceModal","menuAnchorEl","setMenuAnchorEl","msvcsPerAgent","agents","setAgent","setAutozoom","feedbackContext","handleCloseMenu","currentTarget","removeAgent","iofog","subheader","ListSubheader","disableGutters","disableSticky","button","ListItemAvatar","Avatar","--statusColor","daemonStatus","Memory_default","size","--mTop","flowActive","MoreVert_default","Menu","anchorEl","keepMounted","Boolean","mapMarkerTransform","transform","msvcBadge","& .MuiBadge-badge","mapMarker","& .MuiSvgIcon-root","mapWrapper","borderColor","& div","hasValidCoordinates","coordinates","isFinite","Map","DomElementRef","autozoom","google","bounds","maps","LatLngBounds","latitude","longitude","center","zoom","forEach","marker","extend","LatLng","newBounds","ne","getNorthEast","lng","sw","getSouthWest","_fitBounds","fitBounds","setMap","lib_default","bootstrapURLKeys","Badge","badgeContent","invisible","--markerColor","DeveloperBoard_default","SET_AGENT","groupBy","find","updateData","ECNViewer","_useState","_useState2","_useState3","_useState4","setLoading","_useState5","_useState6","setError","_useState7","styles","mapStyle","_useState8","_React$useContext","update","agentsResponse","flowsResponse","microservicesResponse","fogs","call","callback","delay","savedCallback","setInterval","clearInterval","useInterval","centerMap","skeleton","Config","_React$useContext2","setData","save","onSave","handleUserChange","email","password","wrapper","logo","latNav","avatarContainer","latIcons",".active &","topIcons","nav","& a","& img","footerContainer","justifyItems","footer","Layout","settingsOpen","setSettingsOpen","react_router_dom","logomark","alt","Search_default","NotificationsOutlined_default","HomeOutlined_default","GraphicEqOutlined_default","SettingsOutlined_default","react_router","App","CssBaseline","ControllerProvider_Context","hostname","match","ReactDOM","render","src_App","document","getElementById","navigator","serviceWorker","ready","then","registration","unregister"],"mappings":"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","file":"static/js/main.a5a5bd77.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logomark.0af54a67.svg\";","import React from 'react'\nimport Skeleton from 'react-loading-skeleton'\n\nimport { Typography, List, ListItem, ListItemIcon, ListItemText, Chip, Tooltip } from '@material-ui/core'\n\nimport LocationCityIcon from '@material-ui/icons/LocationCity'\nimport GPSFixedIcon from '@material-ui/icons/GpsFixed'\nimport IPIcon from '@material-ui/icons/WifiTethering'\n\nimport { makeStyles, useTheme } from '@material-ui/styles'\nconst useStyles = makeStyles(theme => ({\n  controllerInfo: {\n    paddingTop: '0px',\n    '& .paper': {\n      padding: '5px'\n    }\n  },\n  warningChip: {\n    backgroundColor: `var(--color, ${theme.colors.danger})`,\n    color: 'white'\n  },\n  controllerTitle: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    textEmphasis: 'bold'\n  }\n}))\n\nexport default function ControllerInfo (props) {\n  const classes = useStyles()\n  const theme = useTheme()\n  const { controller, loading, error } = props\n  const { city, country, lat, lon, query } = controller.location || {}\n\n  const controllerError = error || controller.error || null\n\n  return (\n    <div className={classes.controllerInfo}>\n      <div className={classes.controllerTitle}>\n        <Typography variant='h5'>Controller</Typography>\n        {controllerError &&\n          <Tooltip title={controllerError.message} aria-label='Error'>\n            <Chip label={'The controller is not reachable'} style={{ '--color': theme.colors.gold }} className={classes.warningChip} />\n          </Tooltip>\n        }\n      </div>\n      <List>\n        <ListItem>\n          <ListItemIcon><LocationCityIcon /></ListItemIcon>\n          { loading ? <ListItemText><Skeleton /></ListItemText> : <ListItemText primary={`${city}, ${country}`} /> }\n        </ListItem>\n        <ListItem style={{ cursor: 'pointer' }} onClick={() => props.selectController()} >\n          <ListItemIcon><GPSFixedIcon /></ListItemIcon>\n          { loading ? <ListItemText><Skeleton /></ListItemText> : <ListItemText primary={`${lat}, ${lon}`} /> }\n        </ListItem>\n        <ListItem>\n          <ListItemIcon><IPIcon /></ListItemIcon>\n          { loading ? <ListItemText><Skeleton /></ListItemText> : <ListItemText primary={query} /> }\n        </ListItem>\n      </List>\n    </div>\n  )\n}\n","import React from 'react'\n\nimport { Typography, Paper } from '@material-ui/core'\n\nimport { makeStyles } from '@material-ui/styles'\nconst useStyles = makeStyles({\n  summary: {\n    display: 'grid',\n    gridTemplateColumns: 'repeat(3, 1fr)',\n    gridColumnGap: '15px',\n    textAlign: 'center'\n  }\n})\n\nexport default function ActiveResources (props) {\n  const classes = useStyles()\n  const { activeFlows, activeAgents, activeMsvcs, loading } = props\n  return (\n    <div>\n      <Typography variant='h5'>Active resources</Typography>\n      <br />\n      <div className={classes.summary}>\n        <Paper>\n          <Typography variant='h3'>{loading ? 0 : activeFlows.length}</Typography>\n          <Typography variant='subtitle1'>Flows</Typography>\n        </Paper>\n        <Paper>\n          <Typography variant='h3'>{loading ? 0 : activeAgents.length}</Typography>\n          <Typography variant='subtitle1'>Agents</Typography>\n        </Paper>\n        <Paper>\n          <Typography variant='h3'>{loading ? 0 : activeMsvcs.length}</Typography>\n          <Typography variant='subtitle1'>Microservices</Typography>\n        </Paper>\n      </div>\n    </div>\n  )\n}\n","import React from 'react'\nimport { ThemeProvider } from '@material-ui/styles'\nimport { createMuiTheme } from '@material-ui/core/styles'\n\nimport customTheme from './theme.json'\n\nconst colors = {\n  phosphorus: '#FF585D',\n  cobalt: '#5064EC',\n  gold: '#F5A623',\n  chromium: '#00C0A9',\n  argon: '#7A3BFF',\n  carbon: '#002E43',\n  lead: '#57687D',\n  aluminium: '#ACB5C6',\n  silver: '#FAFCFF',\n  white: '#FFFFFF'\n}\n\nexport const theme = createMuiTheme({\n  ...customTheme,\n  colors: {\n    ...colors,\n    success: colors.chromium,\n    error: colors.phosphorus,\n    danger: colors.gold\n  }\n})\n\nexport default function Theming (props) {\n  return (\n    <ThemeProvider theme={theme}>\n      {props.children}\n    </ThemeProvider>\n  )\n}\n","import { theme } from '../Theme/ThemeProvider'\n\nexport const statusColor = {\n  'RUNNING': theme.colors.chromium,\n  'UNKNOWN': theme.colors.aluminium,\n  'OFFLINE': theme.colors.phosphorus\n}\n\nexport const msvcStatusColor = {\n  'RUNNING': theme.colors.cobalt,\n  'UNKNOWN': theme.colors.aluminium,\n  'OFFLINE': theme.colors.aluminium\n}\n","import React from 'react'\nimport { Modal, Paper, Typography, Button } from '@material-ui/core'\nimport CloseIcon from '@material-ui/icons/Close'\n\nimport { makeStyles } from '@material-ui/styles'\nconst useStyles = makeStyles(theme => ({\n  modalTitle: {\n    backgroundColor: theme.colors.carbon,\n    borderRadius: '4px 4px 0 0',\n    color: 'white',\n    padding: '5px',\n    display: 'flex',\n    justifyContent: 'space-between'\n  },\n  modal: {\n    width: '60%',\n    top: '15%',\n    left: '20%',\n    position: 'absolute',\n    borderRadius: '4px'\n  },\n  modalContent: {\n    maxHeight: '600px',\n    overflowY: 'scroll',\n    padding: '15px'\n  },\n  modalActions: {\n    display: 'flex',\n    backgroundColor: theme.colors.silver,\n    alignItems: 'flex-end'\n  },\n  modalAction: {\n    marginLeft: '5px'\n  }\n}))\n\nexport default function _Modal (props) {\n  const classes = useStyles()\n  const { title, open, onClose } = props\n  return (\n    <Modal\n      aria-labelledby={`${title} modal`}\n      {...{\n        open,\n        onClose\n      }}\n    >\n      <Paper className={classes.modal}>\n        <div className={classes.modalTitle}>\n          <Typography variant='h5'>{title}</Typography>\n          <CloseIcon style={{ cursor: 'pointer' }} onClick={onClose} />\n        </div>\n        <div className={classes.modalContent}>\n          {props.children}\n        </div>\n        {props.actions && !!props.actions.length && <div className={classes.modalActions}>\n          {props.actions.map(a => <Button className={`${a.className} ${classes.modalAction}`} variant={a.variant} onClick={a.onClick}>{a.text}</Button>)}\n        </div>}\n      </Paper>\n    </Modal>\n  )\n}\n","import React from 'react'\nimport { Button, Divider, Grid } from '@material-ui/core'\n\nimport Modal from './Modal'\n\nimport { makeStyles } from '@material-ui/styles'\nconst useStyles = makeStyles(theme => ({\n  divider: {\n    margin: '5px'\n  }\n}))\n\nexport default function Confirm (props) {\n  const classes = useStyles()\n  const { open, onClose, title, onConfirm } = props\n  return (\n    <Modal\n      {...{\n        title,\n        open,\n        onClose\n      }}\n    >\n      {props.children}\n      <Divider className={classes.divider} />\n      <Grid container justify='flex-end' spacing={2}>\n        <Grid item>\n          <Button onClick={onClose}>\n            Cancel\n          </Button>\n        </Grid>\n        <Grid item>\n          <Button variant='contained' color='primary' onClick={onConfirm}>\n            Confirm\n          </Button>\n        </Grid>\n      </Grid>\n\n    </Modal>\n  )\n}\n","import React from 'react'\nimport IconButton from '@material-ui/core/IconButton'\nimport WarningIcon from '@material-ui/icons/Warning'\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle'\nimport ErrorIcon from '@material-ui/icons/Error'\nimport InfoIcon from '@material-ui/icons/Info'\nimport CloseIcon from '@material-ui/icons/Close'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { SnackbarContent } from '@material-ui/core'\n\nconst variantIcon = {\n  success: CheckCircleIcon,\n  warning: WarningIcon,\n  error: ErrorIcon,\n  info: InfoIcon\n}\n\nconst useStyles = makeStyles(theme => ({\n  success: {\n    backgroundColor: theme.colors.success\n  },\n  error: {\n    backgroundColor: theme.colors.error\n  },\n  info: {\n    backgroundColor: theme.colors.cobalt\n  },\n  warning: {\n    backgroundColor: theme.colors.danger\n  },\n  icon: {\n    fontSize: 20\n  },\n  iconVariant: {\n    opacity: 0.9,\n    marginRight: theme.spacing(1)\n  },\n  message: {\n    display: 'flex',\n    alignItems: 'center'\n  },\n  alert: {\n    margin: '5px',\n    borderRadius: '4px',\n    boxShadow: `0 4px 6px 0 ${theme.colors.carbon}`\n  },\n  container: {\n    display: 'flex',\n    flexDirection: 'column',\n    position: 'fixed',\n    bottom: '10px',\n    left: '10px',\n    zIndex: '9999'\n  }\n}))\n\nexport default function Alert (props) {\n  const classes = useStyles()\n  const { open, alerts } = props\n\n  return open ? (\n    <div className={classes.container}>\n      {alerts.map((a, idx) => {\n        const variantKey = a.type || 'info'\n        const Icon = variantIcon[variantKey]\n        return <SnackbarContent\n          key={a.key || a.id || idx}\n          className={`${classes[variantKey]} ${classes.alert} ${a.className}`}\n          aria-describedby='client-snackbar'\n          message={\n            <span id='client-snackbar' className={classes.message}>\n              <Icon className={`${classes.icon} ${classes.iconVariant}`} />\n              {a.message}\n            </span>\n          }\n          action={[\n            <IconButton key='close' aria-label='Close' color='inherit' onClick={a.onClose}>\n              <CloseIcon className={classes.icon} />\n            </IconButton>\n          ]}\n        />\n      })}\n    </div>\n  ) : null\n}\n","import React from 'react'\nimport { findIndex } from 'lodash'\nimport Alert from './Alert'\n\nexport const FeedbackContext = React.createContext({\n  feedbacks: [],\n  setFeedbacks: () => {},\n  pushFeedback: () => {}\n})\n\nconst AUTO_HIDE = 6000\n\nconst actions = {\n  ADD: 'add',\n  REMOVE: 'remove',\n  SET: 'set'\n}\n\nconst initState = {\n  feedbacks: [],\n  nextId: 0\n}\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case actions.ADD:\n      return {\n        feedbacks: [...state.feedbacks,\n          {\n            ...action.data,\n            timeout: setTimeout(() => {\n              action.dispatch({ type: actions.REMOVE, data: { id: state.nextId } })\n            }, AUTO_HIDE),\n            id: state.nextId\n          }],\n        nextId: state.nextId + 1\n      }\n    case actions.REMOVE:\n      const idxToRemove = findIndex(state.feedbacks, f => f.id === action.data.id)\n      if (idxToRemove === -1) return state\n      return {\n        ...state,\n        feedbacks: [...state.feedbacks.slice(0, idxToRemove), ...state.feedbacks.slice(idxToRemove + 1)]\n      }\n    case actions.SET:\n      return {\n        ...state,\n        feedbacks: action.data\n      }\n    default:\n      return state\n  }\n}\n\nexport default function Context (props) {\n  const [state, dispatch] = React.useReducer(reducer, initState)\n  const setFeedbacks = (newFeedbacks) => {\n    console.log(' ---> SetFeedbacks ')\n    dispatch({ type: actions.SET, data: newFeedbacks })\n  }\n  const pushFeedback = (newFeedback) => {\n    console.log(' ---> pushFeedback ')\n    dispatch({ type: actions.ADD, data: newFeedback, dispatch })\n    // Update current feedback array (same array will be used if multiple calls to pushFeedback in the same render loop)\n    state.feedbacks.push(newFeedback)\n  }\n\n  console.log('======> Updating feedback context')\n\n  return <FeedbackContext.Provider value={{ feedbacks: state.feedbacks, setFeedbacks, pushFeedback }}>\n    {props.children}\n    <FeedbackContext.Consumer>\n      {({ feedbacks, setFeedbacks }) =>\n        <Alert\n          open={!!feedbacks.length}\n          alerts={feedbacks.map((f, idx) => ({\n            ...f,\n            onClose: () => dispatch({ type: actions.REMOVE, data: f })\n          }))}\n        />\n      }\n    </FeedbackContext.Consumer>\n  </FeedbackContext.Provider>\n}\n","import React, { useEffect } from 'react'\n\nimport controllerJson from './controller.json'\n\nconst initControllerState = (() => {\n  const localUser = window.localStorage.getItem('iofogUser')\n  if (localUser) {\n    controllerJson.user = JSON.parse(localUser)\n  }\n  return {\n    ...controllerJson,\n    api: `${window.location.protocol}://${controllerJson.ip}:${controllerJson.port || 80}/`,\n    location: {\n      lat: 'Unknown',\n      lon: 'Unknown',\n      query: controllerJson.ip\n    }\n  }\n})()\n\nconst IPLookUp = 'http://ip-api.com/json/'\n\n// If dev mode, use proxy\n// Otherwise assume you are running on the Controller\nconst getUrl = (path) => controllerJson.dev ? `/api/controllerApi${path}` : `${window.location.protocol}://${[window.location.host.split(':')[0], controllerJson.port].join(':')}${path}`\nconst getHeaders = (headers, controllerConfig) => controllerJson.dev\n  ? ({\n    ...headers,\n    'ECN-Api-Destination': controllerConfig.api\n  }) : headers\n\nexport const ControllerContext = React.createContext({\n  controller: {},\n  updateController: () => {}\n})\n\nconst lookUpControllerInfo = async (controllerConfig) => {\n  if (!controllerConfig.ip) {\n    controllerConfig.ip = window.location.host.split(':')[0] // Get only ip, not port\n  }\n  const localhost = new RegExp('(0\\.0\\.0\\.0|localhost|127\\.0\\.0\\.1|192\\.168\\.)') // eslint-disable-line no-useless-escape\n  const ip = localhost.test(controllerConfig.ip) ? '8.8.8.8' : controllerConfig.ip\n  const response = await window.fetch(IPLookUp + ip)\n  if (response.ok) {\n    return response.json()\n  } else {\n    throw new Error(response.statusText)\n  }\n}\n\nconst updateControllerInfo = async (controllerConfig) => {\n  let ipInfo = {}\n  try {\n    ipInfo = await lookUpControllerInfo(controllerConfig)\n  } catch (e) {\n    ipInfo = {\n      lat: 'Unknown',\n      lon: 'Unknown',\n      query: controllerConfig.ip\n    }\n  }\n\n  return {\n    ...controllerConfig,\n    location: ipInfo\n  }\n}\n\nconst initState = {\n  controller: initControllerState,\n  token: null\n}\n\nconst actions = {\n  ERROR: 'Error',\n  CLEAN_ERROR: 'Clean error',\n  UPDATE: 'Update',\n  SET_TOKEN: 'Set token'\n}\n\nconst reducer = (state, action) => {\n  console.log({ state, action })\n  const newState = (() => {\n    switch (action.type) {\n      case actions.ERROR:\n        return {\n          ...state,\n          controller: {\n            ...state.controller,\n            error: action.data\n          }\n        }\n      case actions.CLEAN_ERROR:\n        return {\n          ...state,\n          controller: {\n            ...state.controller,\n            error: null\n          }\n        }\n      case actions.UPDATE:\n        return {\n          ...state,\n          controller: {\n            ...state.controller,\n            ...action.data\n          }\n        }\n      case actions.SET_TOKEN:\n        return {\n          ...state,\n          token: action.data,\n          controller: {\n            ...state.controller,\n            error: null\n          }\n        }\n      default:\n        return state\n    }\n  })()\n  newState.controller.dev = controllerJson.dev\n  return newState\n}\n\nexport default function Context (props) {\n  const [state, dispatch] = React.useReducer(reducer, initState)\n  const { token, controller } = state\n\n  console.log('======> Updating controller context')\n\n  const authenticate = async (controllerConfig) => {\n    const response = await window.fetch(getUrl('/api/v3/user/login'), {\n      method: 'POST',\n      headers: getHeaders({\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      }, controllerConfig),\n      body: JSON.stringify(controllerConfig.user)\n    })\n    if (response.ok) {\n      const token = (await response.json()).accessToken\n      dispatch({ type: actions.SET_TOKEN, data: token })\n      return token\n    } else {\n      dispatch({ type: actions.SET_TOKEN, data: null })\n      throw new Error(response.statusText)\n    }\n  }\n\n  // Wrapper around window.fetch to add proxy and authorization headers\n  const request = async (path, options = {}) => {\n    try {\n      let t = token\n      if (!t) {\n        t = await authenticate(controller)\n      }\n      const response = await window.fetch(getUrl(path), {\n        ...options,\n        headers: getHeaders({\n          ...options.headers,\n          'Authorization': t\n        }, controller)\n      })\n      if (state.controller.error) {\n        dispatch({ type: actions.CLEAN_ERROR })\n      }\n      return response\n    } catch (err) {\n      dispatch({ type: actions.ERROR, data: err })\n      return ({\n        ok: false,\n        statusText: err.message || 'Could not reach controller'\n      })\n    }\n  }\n\n  const updateController = async (newController) => {\n    if (controllerJson.dev) { newController.api = `http://${newController.ip}:${newController.port || 80}/` }\n    window.localStorage.setItem('iofogUser', JSON.stringify(newController.user))\n    try {\n      await authenticate(newController)\n    } catch (e) {\n      dispatch({ type: actions.ERROR, data: e })\n    }\n    dispatch({ type: actions.UPDATE, data: await updateControllerInfo(newController) })\n  }\n\n  useEffect(() => (async () => {\n    try {\n      await authenticate(initState.controller)\n    } catch (e) {\n      dispatch({ type: actions.ERROR, data: e })\n    }\n    dispatch({ type: actions.UPDATE, data: await updateControllerInfo(initState.controller) })\n  })(), [])\n\n  return <ControllerContext.Provider value={{ controller, updateController, request }}>\n    {props.children}\n  </ControllerContext.Provider>\n}\n","import React from 'react'\n\nimport { Divider, TextField, Grid, Button } from '@material-ui/core'\nimport { FeedbackContext } from '../../Utils/FeedbackContext'\n\nimport { makeStyles } from '@material-ui/styles'\nimport { ControllerContext } from '../../ControllerProvider'\nconst useStyles = makeStyles({\n  divider: {\n    margin: '5px'\n  }\n})\n\nconst initNode = {\n  name: '',\n  ip: '',\n  key: '',\n  port: 54321\n}\n\nconst newError = (message) => ({ message })\n\nexport default function ConnectNode (props) {\n  const classes = useStyles()\n  const [node, setNode] = React.useState({ ...initNode })\n  const { pushFeedback } = React.useContext(FeedbackContext)\n  const { request } = React.useContext(ControllerContext)\n\n  const handleChange = key => (event) => {\n    setNode({ ...node, [key]: event.target.value })\n  }\n\n  const createAgent = async (agent) => {\n    const response = await request('/api/v3/iofog', {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(agent)\n    })\n    if (response.ok) {\n      pushFeedback({ message: 'ioFog created!', type: 'success' })\n      const a = await response.json()\n      return a.uuid\n    }\n    throw (newError(`Failed to create iofog: ${response.statusText}`))\n  }\n\n  const getProvisioningKey = async (uuid) => {\n    const response = await request(`/api/v3/iofog/${uuid}/provisioning-key`)\n    if (response.ok) {\n      const a = await response.json()\n      return a.key\n    }\n    throw (newError(`Failed to retrieve provisioning key: ${response.statusText}`))\n  }\n\n  const linkAgent = async (agent, controller) => {\n    const response = await window.fetch(`api/agentApi/v2/config`, {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n        'Authorization': agent.key,\n        'ioFogApi': `http://${agent.ip}:${agent.port}`\n      },\n      body: JSON.stringify({ 'controller-url': `http://${controller.ip}:${controller.port}/api/v3/` })\n    })\n    if (response.ok) {\n      pushFeedback({ message: 'Agent linked!', type: 'success' })\n      return true\n    }\n    throw (newError(`Failed to link agent: ${response.statusText}`))\n  }\n\n  const provisionAgent = async (agent, key) => {\n    const response = await window.fetch(`api/agentApi/v2/provision`, {\n      method: 'POST',\n      headers: {\n        'Accept': 'application/json',\n        'Content-Type': 'application/json',\n        'Authorization': agent.key,\n        'ioFogApi': `http://${agent.ip}:${agent.port}`\n      },\n      body: JSON.stringify({ 'provisioning-key': key })\n    })\n    if (response.ok) {\n      pushFeedback({ message: 'Agent provisioned!', type: 'success' })\n      return true\n    }\n    throw (newError(`Failed to provision agent: ${response.statusText}`))\n  }\n\n  const connect = async () => {\n    try {\n      const iofogUuid = await createAgent({ name: node.name, fogType: 0 })\n      const provisioningKey = await getProvisioningKey(iofogUuid)\n      await linkAgent(node, props.controller)\n      await provisionAgent(node, provisioningKey)\n      pushFeedback({ message: 'Agent connected!', type: 'success' })\n    } catch (e) {\n      pushFeedback({ message: e.message, type: 'error', uuid: 'error' })\n    }\n  }\n\n  return (\n    <React.Fragment>\n      <Grid container spacing={2}>\n        <Grid item xs={12} sm={6}>\n          <TextField\n            id='name'\n            label='Name'\n            onChange={handleChange('name')}\n            value={node.name}\n            fullWidth\n            className={classes.textField}\n            margin='normal'\n          />\n        </Grid>\n        <Grid item xs={6} sm={3}>\n          <TextField\n            id='ip'\n            label='IP'\n            onChange={handleChange('ip')}\n            value={node.ip}\n            fullWidth\n            className={classes.textField}\n            margin='normal'\n          />\n        </Grid>\n        <Grid item xs={6} sm={3}>\n          <TextField\n            id='port'\n            label='Port'\n            onChange={handleChange('port')}\n            value={node.port}\n            fullWidth\n            type='number'\n            className={classes.textField}\n            margin='normal'\n          />\n        </Grid>\n        <Grid item xs={12}>\n          <TextField\n            id='key'\n            label='Authorization key'\n            onChange={handleChange('key')}\n            value={node.key}\n            fullWidth\n            className={classes.textField}\n            margin='normal'\n            helperText='Authorization key can be found in /etc/iofog-agent/local-api file'\n          />\n        </Grid>\n      </Grid>\n      <Divider className={classes.divider} />\n      <Grid container justify='flex-end'>\n        <Grid item>\n          <Button onClick={connect}>\n            Connect\n          </Button>\n        </Grid>\n      </Grid>\n    </React.Fragment>\n  )\n}\n","import React from 'react'\nimport Downshift from 'downshift'\nimport deburr from 'lodash/deburr'\nimport get from 'lodash/get'\nimport { MenuItem, Paper, TextField } from '@material-ui/core'\nimport { makeStyles } from '@material-ui/core/styles'\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1,\n    height: 250\n  },\n  container: {\n    flexGrow: 1,\n    position: 'relative'\n  },\n  paper: {\n    position: 'absolute',\n    zIndex: 1,\n    marginTop: theme.spacing(1),\n    marginBot: theme.spacing(2),\n    left: 0,\n    right: 0,\n    maxHeight: '250px',\n    overflowY: 'scroll'\n  },\n  chip: {\n    margin: theme.spacing(0.5, 0.25)\n  },\n  inputRoot: {\n    flexWrap: 'wrap'\n  },\n  inputInput: {\n    width: 'auto',\n    flexGrow: 1\n  },\n  divider: {\n    height: theme.spacing(2)\n  }\n}))\n\nfunction renderInput (inputProps) {\n  const { InputProps, classes, ref, ...others } = inputProps\n  return (\n    <TextField\n      InputProps={{\n        inputRef: ref,\n        classes: {\n          root: classes.inputRoot,\n          input: classes.inputInput\n        },\n        ...InputProps\n      }}\n      {...others}\n    />\n  )\n}\n\nfunction renderSuggestion (suggestionProps) {\n  const { suggestion, index, itemProps, highlightedIndex, selectedItem } = suggestionProps\n  const isHighlighted = highlightedIndex === index\n  const isSelected = (selectedItem || {}).label === suggestion.label\n\n  return (\n    <MenuItem\n      {...itemProps}\n      key={suggestion.label}\n      selected={isHighlighted}\n      component='div'\n      style={{\n        fontWeight: isSelected ? 500 : 400\n      }}\n    >\n      {suggestion.label}\n    </MenuItem>\n  )\n}\n\nexport default function Autocomplete (props) {\n  const classes = useStyles()\n\n  const getSuggestions = (value, { showEmpty = false } = {}) => {\n    const inputValue = deburr(value.trim()).toLowerCase()\n    const inputLength = inputValue.length\n    let count = 0\n\n    return inputLength === 0 && !showEmpty\n      ? []\n      : props.suggestions.filter(suggestion => {\n        const keep = count < props.maxSuggestions && suggestion.label.toLowerCase().startsWith(inputValue.toLowerCase())\n        if (keep) {\n          count += 1\n        }\n        return keep\n      })\n  }\n\n  return (<Downshift\n    itemToString={item => get(item, 'label', '')}\n    onChange={props.onChange}\n    initialSelectedItem={props.initialSelectedItem}\n    {...(props.selectedItem ? { selectedItem: props.selectedItem } : {})}\n    id='downshift-options'>\n    {({\n      clearSelection,\n      getInputProps,\n      getItemProps,\n      getLabelProps,\n      getMenuProps,\n      highlightedIndex,\n      inputValue,\n      isOpen,\n      openMenu,\n      selectedItem\n    }) => {\n      const { onBlur, onChange, onFocus, ...inputProps } = getInputProps({\n        onChange: event => {\n          if (event.target.value === '') {\n            clearSelection()\n          }\n        },\n        onFocus: openMenu,\n        disabled: props.disabled || false,\n        placeholder: props.placeholder || ''\n      })\n\n      return (\n        <div className={classes.container}>\n          {renderInput({\n            fullWidth: true,\n            classes,\n            label: props.label,\n            InputLabelProps: getLabelProps({ shrink: true }),\n            InputProps: { onBlur, onChange, onFocus },\n            inputProps\n          })}\n\n          <div {...getMenuProps()}>\n            {isOpen ? (\n              <Paper className={classes.paper} square>\n                {getSuggestions(inputValue, { showEmpty: true }).map((suggestion, index) =>\n                  renderSuggestion({\n                    suggestion,\n                    index,\n                    itemProps: getItemProps({ item: suggestion }),\n                    highlightedIndex,\n                    selectedItem\n                  })\n                )}\n              </Paper>\n            ) : null}\n          </div>\n        </div>\n      )\n    }}\n  </Downshift>\n  )\n}\n","import React from 'react'\nimport ReactJson from 'react-json-view'\nimport get from 'lodash/get'\n\nimport { Grid, Paper, Typography, TextField, Divider, Select, Input, Button, InputLabel, FormControl, FormControlLabel, Checkbox, MenuItem } from '@material-ui/core'\nimport CloseIcon from '@material-ui/icons/Close'\nimport SwapIcon from '@material-ui/icons/SwapHoriz'\n\nimport Autocomplete from '../../Utils/Autocomplete'\n\nimport { makeStyles } from '@material-ui/styles'\nimport { FeedbackContext } from '../../Utils/FeedbackContext'\nimport { ControllerContext } from '../../ControllerProvider'\n\nconst useStyles = makeStyles({\n  divider: {\n    margin: '5px'\n  },\n  formControl: {\n    width: '100%'\n  },\n  rowIcon: {\n    display: 'flex',\n    justifyContent: 'space-around'\n  },\n  newPaper: {\n    border: '1px solid hsla(0, 0%, 0%, 0.2)',\n    boxShadow: '0 4px 6px 0 hsla(0,0%,0%,0.2)',\n    borderRadius: '4px',\n    padding: '10px',\n    marginTop: '10px'\n  },\n  inputWithIcon: { display: 'flex', alignItems: 'baseline', justifyContent: 'space-between' }\n})\n\nconst ITEM_HEIGHT = 48\nconst ITEM_PADDING_TOP = 8\nconst MenuProps = {\n  PaperProps: {\n    style: {\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n      width: 250\n    }\n  }\n}\n\nconst initMsvc = {\n  flow: {},\n  name: '',\n  catalog: {\n    images: []\n  },\n  volumeMappings: [],\n  ports: [],\n  rootHostAccess: false,\n  _new: true\n}\n\nconst initFlow = {\n  name: '',\n  isActivated: true\n}\n\nconst initCatalogItem = (fogTypeId) => ({\n  name: '',\n  images: [{\n    containerImage: '',\n    fogTypeId\n  }],\n  registryId: 1\n})\n\nconst initRoute = (from) => ({\n  from,\n  to: {}\n})\n\nconst randomString = () => Math.random().toString(36).replace(/[^a-z]+/g, '').substr(0, 5)\n\nconst generateRouteSelect = (current, list, label, onChange) => {\n  const isNewMsvc = get(current, '_new', false)\n  return (<Autocomplete\n    label={label}\n    placeholder='Select a microservice'\n    onChange={onChange}\n    disabled={isNewMsvc}\n    selectedItem={isNewMsvc ? list[list.length - 1] : current}\n    maxSuggestions={20}\n    suggestions={list.filter(e => !isNewMsvc ? !!e.uuid : true).map(m => ({\n      ...m,\n      label: m.name\n    }))}\n  />)\n}\n\nexport default function AddMicroservice (props) {\n  const classes = useStyles()\n  const [ flows, setFlows ] = React.useState([])\n  const [ catalog, setCatalog ] = React.useState([])\n  // Due to polling, the component is re-rendering every 3 sec.\n  // To avoid JSON edit popups to be closed every 3 sec,\n  // we need to keep the config and the JSX ReactJson component as ref\n  const config = React.useRef({})\n  const ReactJsonRef = React.useRef(\n    <ReactJson src={config.current} name={false} onAdd={(e) => { config.current = e.updated_src }} onEdit={(e) => { config.current = e.updated_src }} onDelete={(e) => { config.current = e.updated_src }} />\n  )\n  const [ msvc, setMsvc ] = React.useState(initMsvc)\n  const [ newFlow, setNewFlow ] = React.useState(initFlow)\n  const [ newCatalogItem, setNewCatalogItem ] = React.useState(() => initCatalogItem(get(props, 'target.fogTypeId', 1)))\n  const [ routes, setRoutes ] = React.useState([])\n\n  const agent = props.target\n  const { pushFeedback } = React.useContext(FeedbackContext)\n  const { request } = React.useContext(ControllerContext)\n\n  React.useEffect(() => {\n    Promise.all([(async () => {\n      const flowRaw = await request('/api/v3/flow')\n      if (flowRaw.ok) {\n        const flowsRes = await flowRaw.json()\n        setFlows(flowsRes.flows)\n      }\n    })(), (async () => {\n      const catalogRaw = await request('/api/v3/catalog/microservices')\n      if (catalogRaw.ok) {\n        const catalogRes = await catalogRaw.json()\n        setCatalog(catalogRes.catalogItems.filter(item => {\n          for (const img of item.images) {\n            if (img.fogTypeId === agent.fogTypeId) { return true }\n          }\n          return false\n        })) // TODO: filter per userId\n      }\n    })()])\n  }, [agent.fogTypeId, request])\n\n  const handleChange = (key, setter, prevState) => e => setter({ ...prevState, [key]: e.target.value })\n  const handleMsvcChangeArray = (key, objKey, idx, valueDecorator = x => x) => e => setMsvc({\n    ...msvc,\n    [key]: [\n      ...msvc[key].slice(0, idx),\n      {\n        ...msvc[key][idx],\n        [objKey]: valueDecorator(e.target.value)\n      },\n      ...msvc[key].slice(idx + 1)\n    ]\n  })\n  const getCatalogImage = item => {\n    if (!get(item, 'id', null)) { return 'Select an image' }\n    for (const img of item.images) {\n      if (img.fogTypeId === agent.fogTypeId) { return img.containerImage }\n    }\n    return 'Image not found'\n  }\n\n  const addVolume = () => setMsvc({\n    ...msvc,\n    volumeMappings: [\n      ...msvc.volumeMappings,\n      {\n        hostDestination: '',\n        containerDestination: '',\n        accessMode: 'z'\n      }\n    ]\n  })\n\n  const addPort = () => setMsvc({\n    ...msvc,\n    ports: [\n      ...msvc.ports,\n      {\n        internal: '',\n        external: ''\n      }\n    ]\n  })\n\n  const removeFromArray = (key, idx) => setMsvc({\n    ...msvc,\n    [key]: [...msvc[key].slice(0, idx), ...msvc[key].slice(idx + 1)]\n  })\n\n  const addMsvc = async () => {\n    try {\n      const { name, ports, volumeMappings, rootHostAccess } = msvc\n      const response = await request('/api/v3/microservices', {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          config: JSON.stringify(config.current),\n          name,\n          ports,\n          volumeMappings,\n          rootHostAccess,\n          flowId: msvc.flow.id,\n          iofogUuid: agent.uuid,\n          catalogItemId: msvc.catalog.id\n        })\n      })\n      if (response.ok) {\n        pushFeedback({ message: 'Microservice added!', type: 'success' })\n        const m = await response.json()\n        setMsvc(initMsvc)\n        return m.uuid\n      } else {\n        pushFeedback({ message: response.statusText, type: 'error' })\n      }\n    } catch (e) {\n      pushFeedback({ message: e.message })\n    }\n  }\n\n  const createFlow = async () => {\n    try {\n      const { name } = newFlow\n      const response = await request('/api/v3/flow', {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(newFlow)\n      })\n      if (response.ok) {\n        pushFeedback({ message: 'Flow created!', type: 'success' })\n        setNewFlow(initFlow)\n        const flow = { ...await response.json(), name }\n        setMsvc({ ...msvc, flow })\n        msvc.flow = flow\n        return true\n      } else {\n        pushFeedback({ message: response.statusText, type: 'error' })\n        return false\n      }\n    } catch (e) {\n      pushFeedback({ message: e.message })\n      return false\n    }\n  }\n\n  const createCatalogItem = async () => {\n    try {\n      const catalogItem = {\n        ...newCatalogItem,\n        name: randomString()\n      }\n      const response = await request('/api/v3/catalog/microservices', {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(catalogItem)\n      })\n      if (response.ok) {\n        pushFeedback({ message: 'Image added to catalog!', type: 'success' })\n        setNewCatalogItem(initCatalogItem(agent.fogTypeId))\n        const catalog = { ...await response.json(), ...catalogItem }\n        setMsvc({ ...msvc, catalog })\n        msvc.catalog = catalog\n        return true\n      } else {\n        pushFeedback({ message: response.statusText, type: 'error' })\n        return false\n      }\n    } catch (e) {\n      pushFeedback({ message: e.message })\n      return false\n    }\n  }\n\n  const createRoute = async (route) => {\n    try {\n      const from = get(route, 'from.uuid')\n      const to = get(route, 'to.uuid')\n      const response = await request(`/api/v3//microservices/${from}/routes/${to}`, {\n        method: 'POST',\n        headers: {\n          'Accept': 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: ''\n      })\n      if (response.ok) {\n        pushFeedback({ message: `Route from ${route.from.name} to ${route.to.name} created !`, type: 'success' })\n        return true\n      } else {\n        pushFeedback({ message: response.statusText, type: 'error' })\n        return false\n      }\n    } catch (e) {\n      pushFeedback({ message: e.message })\n      return false\n    }\n  }\n\n  const createRoutes = async (defaultUuid) => {\n    for (const route of routes) {\n      if (!route.from.uuid) {\n        route.from.uuid = defaultUuid\n      }\n      if (!route.to.uuid) {\n        route.to.uuid = defaultUuid\n      }\n      await createRoute(route)\n    }\n  }\n\n  const createMsvc = async () => {\n    let success = true\n    try {\n      if (msvc.flow.id === -1) {\n        success = await createFlow()\n      }\n      if (success && msvc.catalog.id === -1) {\n        success = await createCatalogItem()\n      }\n      if (success) {\n        const uuid = await addMsvc()\n        await createRoutes(uuid)\n        props.onSuccess()\n      }\n    } catch (e) {\n\n    }\n  }\n\n  const routeList = (props.microservices || [])\n    .map(m => ({\n      ...m,\n      label: m.name\n    }))\n    .concat([{\n      ...msvc,\n      label: msvc.name ? msvc.name : '<New microservice>'\n    }])\n\n  return (\n    <React.Fragment>\n      <Grid container spacing={2}>\n        <Grid item xs={12} sm={6}>\n          <FormControl className={classes.formControl}>\n            <Autocomplete\n              label='Flow'\n              placeholder='Select a flow'\n              onChange={(selected, state) => {\n                handleChange('flow', setMsvc, msvc)({ target: { value: selected || {} } })\n              }}\n              maxSuggestions={20}\n              suggestions={flows.map(f => ({\n                ...f,\n                label: f.name\n              })).concat([{\n                id: -1,\n                label: '+ Add a flow'\n              }])}\n            />\n          </FormControl>\n          {msvc.flow.id === -1 && <Paper className={classes.newPaper}>\n            <Typography variant='subtitle2'>New flow</Typography>\n            <TextField\n              id='name'\n              label='Name'\n              required\n              onChange={handleChange('name', setNewFlow, newFlow)}\n              value={newFlow.name}\n              fullWidth\n              className={classes.textField}\n              margin='normal'\n            />\n            <FormControlLabel\n              style={{ color: 'rgba(0, 0, 0, 0.54)' }}\n              control={\n                <Checkbox\n                  checked={newFlow.isActivated}\n                  onChange={e => setNewFlow({ ...newFlow, isActivated: e.target.checked })}\n                  value='checkedB'\n                  color='primary'\n                />\n              }\n              label='Active'\n            />\n          </Paper>}\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <FormControl className={classes.formControl}>\n            <Autocomplete\n              label='Image'\n              placeholder='Select an image'\n              onChange={(selected, state) => {\n                handleChange('catalog', setMsvc, msvc)({ target: { value: selected || {} } })\n              }}\n              maxSuggestions={20}\n              suggestions={catalog.map(m => ({\n                ...m,\n                label: getCatalogImage(m)\n              })).concat([{\n                id: -1,\n                label: '+ Add an image'\n              }])}\n            />\n          </FormControl>\n          {msvc.catalog.id === -1 && <Paper className={classes.newPaper}>\n            <Typography variant='subtitle2'>New image</Typography>\n            <TextField\n              id='name'\n              label='Name'\n              required\n              onChange={e => setNewCatalogItem({\n                ...newCatalogItem,\n                images: [{\n                  ...newCatalogItem.images[0],\n                  containerImage: e.target.value\n                }]\n              })}\n              value={newCatalogItem.images[0].containerImage}\n              fullWidth\n              className={classes.textField}\n              margin='normal'\n            />\n          </Paper>}\n        </Grid>\n      </Grid>\n      <Grid container spacing={2} >\n        <Grid item xs={12}>\n          <TextField\n            id='name'\n            label='Name'\n            required\n            onChange={handleChange('name', setMsvc, msvc)}\n            value={msvc.name}\n            fullWidth\n            className={classes.textField}\n            margin='normal'\n          />\n        </Grid>\n      </Grid>\n      <Divider className={classes.divider} />\n      <Grid container spacing={2} >\n        <Grid item xs={12}>\n          <Typography style={{ color: 'rgba(0, 0, 0, 0.54)' }} variant='subtitle1'>Configuration</Typography><br />\n          {ReactJsonRef.current}\n        </Grid>\n      </Grid>\n      <Divider className={classes.divider} />\n      <Grid container spacing={2} >\n        <Grid item xs={12}>\n          <Typography style={{ color: 'rgba(0, 0, 0, 0.54)' }} variant='subtitle1'>Volumes</Typography><br />\n          {msvc.volumeMappings.map((v, idx) =>\n            <Grid container spacing={2} key={idx} style={{ alignItems: 'flex-end' }}>\n              <Grid item xs={11}>\n                <Grid container spacing={2}>\n                  <Grid item xs={12} sm={4}>\n                    <TextField\n                      id='host'\n                      label='Host'\n                      required\n                      onChange={handleMsvcChangeArray('volumeMappings', 'hostDestination', idx)}\n                      value={v.hostDestination}\n                      fullWidth\n                      className={classes.textField}\n                      margin='dense'\n                    />\n                  </Grid>\n                  <Grid item xs={12} sm={4}>\n                    <TextField\n                      id='Container'\n                      label='Container'\n                      required\n                      onChange={handleMsvcChangeArray('volumeMappings', 'containerDestination', idx)}\n                      value={v.containerDestination}\n                      fullWidth\n                      className={classes.textField}\n                      margin='dense'\n                    />\n                  </Grid>\n                  <Grid item xs={12} sm={4} >\n                    <FormControl className={classes.formControl} style={{ marginTop: '5px' }}>\n                      <InputLabel htmlFor='select-flow'>Access mode</InputLabel>\n                      <Select\n                        required\n                        value={v.accessMode}\n                        onChange={handleMsvcChangeArray('volumeMappings', 'accessMode', idx)}\n                        input={<Input id='select-flow-input' />}\n                        MenuProps={MenuProps}\n                      >\n                        <MenuItem value='z'>Z</MenuItem>\n                      </Select>\n                    </FormControl>\n                  </Grid>\n                </Grid>\n              </Grid>\n              <Grid item xs={1} className={classes.rowIcon}>\n                <CloseIcon style={{ cursor: 'pointer' }} onClick={() => removeFromArray('volumeMappings', idx)} />\n              </Grid>\n            </Grid>\n          )}\n          <Typography style={{ color: 'rgba(0, 0, 0, 0.54)', cursor: 'pointer' }} variant='caption' onClick={() => addVolume()}>+ Add</Typography>\n        </Grid>\n      </Grid>\n      <Divider className={classes.divider} />\n      <Grid container spacing={2} >\n        <Grid item xs={12}>\n          <Typography style={{ color: 'rgba(0, 0, 0, 0.54)' }} variant='subtitle1'>Ports</Typography><br />\n          {msvc.ports.map((p, idx) =>\n            <Grid container spacing={2} key={idx} style={{ alignItems: 'flex-end' }}>\n              <Grid item xs={11}>\n                <Grid container spacing={2} >\n                  <Grid item xs={12} sm={6}>\n                    <TextField\n                      id='host'\n                      label='External'\n                      required\n                      type='number'\n                      onChange={handleMsvcChangeArray('ports', 'external', idx, parseInt)}\n                      value={p.external}\n                      fullWidth\n                      className={classes.textField}\n                      margin='dense'\n                    />\n                  </Grid>\n                  <Grid item xs={12} sm={6}>\n                    <TextField\n                      id='Container'\n                      label='Internal'\n                      required\n                      fullWidth\n                      type='number'\n                      onChange={handleMsvcChangeArray('ports', 'internal', idx, parseInt)}\n                      value={p.internal}\n                      className={classes.textField}\n                      margin='dense'\n                    />\n                  </Grid>\n                </Grid>\n              </Grid>\n              <Grid item xs={1} className={classes.rowIcon}>\n                <CloseIcon style={{ cursor: 'pointer' }} onClick={() => removeFromArray('ports', idx)} />\n              </Grid>\n            </Grid>\n          )}\n          <Typography style={{ color: 'rgba(0, 0, 0, 0.54)', cursor: 'pointer' }} variant='caption' onClick={() => addPort()}>+ Add</Typography>\n        </Grid>\n      </Grid>\n      <Divider className={classes.divider} />\n      <Grid container spacing={2} >\n        <Grid item xs={12}>\n          <Typography style={{ color: 'rgba(0, 0, 0, 0.54)' }} variant='subtitle1'>Routes</Typography><br />\n          {routes.map((r, idx) =>\n            <Grid container spacing={2} key={idx} style={{ alignItems: 'flex-end' }}>\n              <Grid item xs={11}>\n                <Grid container spacing={2} style={{ alignItems: 'flex-end' }} >\n                  <Grid item xs={12} sm={5}>\n                    {generateRouteSelect(r.from, routeList, 'From', selected => setRoutes([\n                      ...routes.slice(0, idx),\n                      {\n                        ...r,\n                        from: selected || {}\n                      },\n                      ...routes.slice(idx + 1)\n                    ]))}\n                  </Grid>\n                  <Grid item xs={2} className={classes.rowIcon}>\n                    <SwapIcon style={{ cursor: 'pointer' }} onClick={() => setRoutes([\n                      ...routes.slice(0, idx),\n                      {\n                        ...r,\n                        from: r.to,\n                        to: r.from\n                      },\n                      ...routes.slice(idx + 1)\n                    ])} />\n                  </Grid>\n                  <Grid item xs={12} sm={5}>\n                    {generateRouteSelect(r.to, routeList, 'To', selected => setRoutes([\n                      ...routes.slice(0, idx),\n                      {\n                        ...r,\n                        to: selected || {}\n                      },\n                      ...routes.slice(idx + 1)\n                    ]))}\n                  </Grid>\n                </Grid>\n              </Grid>\n              <Grid item xs={1} className={classes.rowIcon}>\n                <CloseIcon style={{ cursor: 'pointer' }} onClick={() => setRoutes([...routes.slice(0, idx), ...routes.slice(idx + 1)])} />\n              </Grid>\n            </Grid>\n          )}\n          <Typography style={{ color: 'rgba(0, 0, 0, 0.54)', cursor: 'pointer' }} variant='caption' onClick={() => setRoutes([...routes, initRoute(msvc)])}>+ Add</Typography>\n        </Grid>\n      </Grid>\n      <Divider className={classes.divider} />\n      <FormControlLabel\n        style={{ color: 'rgba(0, 0, 0, 0.54)' }}\n        control={\n          <Checkbox\n            checked={msvc.rootHostAccess}\n            onChange={e => setMsvc({ ...msvc, rootHostAccess: e.target.checked })}\n            value='checkedB'\n            color='primary'\n          />\n        }\n        label='Root host access'\n      />\n      <Divider className={classes.divider} />\n      <Grid container justify='flex-end'>\n        <Grid item>\n          <Button onClick={createMsvc}>\n            Add\n          </Button>\n        </Grid>\n      </Grid>\n    </React.Fragment>\n  )\n}\n","import React from 'react'\n\nimport { FormControl, Divider, Grid, Button, Input, InputLabel, Select, MenuItem, Checkbox, ListItemText, Chip } from '@material-ui/core'\n\nimport { makeStyles } from '@material-ui/styles'\nimport { FeedbackContext } from '../../Utils/FeedbackContext'\nimport { ControllerContext } from '../../ControllerProvider'\nconst useStyles = makeStyles({\n  chips: {\n    display: 'flex',\n    flexWrap: 'wrap'\n  },\n  chip: {\n    margin: 2\n  },\n  formControl: {\n    width: '100%',\n    marginBottom: '15px'\n  },\n  divider: {\n    margin: '5px'\n  }\n})\n\nconst ITEM_HEIGHT = 48\nconst ITEM_PADDING_TOP = 8\nconst MenuProps = {\n  PaperProps: {\n    style: {\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n      width: 250\n    }\n  }\n}\n\nexport default function RemoveMicroservice (props) {\n  const classes = useStyles()\n  const [msvcsToRemove, setMsvcsToRemove] = React.useState([])\n  const { pushFeedback } = React.useContext(FeedbackContext)\n  const { request } = React.useContext(ControllerContext)\n\n  function handleChange (event) {\n    setMsvcsToRemove(event.target.value)\n  }\n\n  const remove = async () => {\n    try {\n      let success = true\n      for (const uuid of msvcsToRemove) {\n        const res = request(`/api/v3/microservices/${uuid}`, {\n          method: 'DELETE'\n        })\n        if (!res.ok) {\n          success = false\n          pushFeedback({ message: `${msvcsPerUUID[uuid].name}: ${res.statusText}`, type: 'error', uuid })\n        } else {\n          const idx = msvcsToRemove.indexOf(uuid)\n          setMsvcsToRemove([...msvcsToRemove.slice(0, idx), ...msvcsToRemove.slice(idx + 1)])\n        }\n      }\n      if (success) {\n        pushFeedback({ message: 'Microservices removed', type: 'success', uuid: 'success' })\n        props.onSuccess()\n      }\n    } catch (e) {\n      pushFeedback({ message: e.message, type: 'error', uuid: 'error' })\n    }\n  }\n\n  const { msvcs } = props\n\n  const msvcsPerUUID = msvcs.reduce((r, m) => ({\n    ...r,\n    [m.uuid]: m\n  }), {})\n\n  return (\n    <React.Fragment>\n      <FormControl className={classes.formControl}>\n        <InputLabel htmlFor='select-multiple-checkbox'>Microservices to remove</InputLabel>\n        <Select\n          multiple\n          value={msvcsToRemove}\n          onChange={handleChange}\n          input={<Input id='select-multiple-checkbox-rm-msvcs' />}\n          renderValue={selected => (\n            <div className={classes.chips}>\n              {selected.map(uuid => (\n                msvcsPerUUID[uuid] && <Chip key={uuid} label={msvcsPerUUID[uuid].name} className={classes.chip} />\n              ))}\n            </div>\n          )}\n          MenuProps={MenuProps}\n        >\n          {msvcs.map(m => (\n            <MenuItem key={m.uuid} value={m.uuid}>\n              <Checkbox checked={msvcsToRemove.indexOf(m.uuid) > -1} />\n              <ListItemText primary={m.name} />\n            </MenuItem>\n          ))}\n        </Select>\n      </FormControl>\n      <Divider className={classes.divider} />\n      <Grid container justify='flex-end'>\n        <Grid item>\n          <Button onClick={remove}>\n            Remove\n          </Button>\n        </Grid>\n      </Grid>\n    </React.Fragment>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { makeStyles } from '@material-ui/core/styles'\nimport Tabs from '@material-ui/core/Tabs'\nimport Tab from '@material-ui/core/Tab'\nimport Typography from '@material-ui/core/Typography'\n\nfunction TabContainer (props) {\n  return (\n    <Typography component='div' style={{ padding: 8 * 3 }}>\n      {props.children}\n    </Typography>\n  )\n}\n\nTabContainer.propTypes = {\n  children: PropTypes.node.isRequired\n}\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1,\n    backgroundColor: theme.palette.background.paper\n  }\n}))\n\nexport default function SimpleTabs (props) {\n  const classes = useStyles()\n  const [value, setValue] = React.useState(0)\n\n  function handleChange (event, newValue) {\n    setValue(newValue)\n  }\n\n  return (\n    <div className={classes.root}>\n      <Tabs value={value} onChange={handleChange}>\n        {props.children.map(child => {\n          return (\n            <Tab label={child.props.title} />\n          )\n        })}\n      </Tabs>\n      <TabContainer>{props.children[value]}</TabContainer>\n    </div>\n  )\n}\n","import React from 'react'\nimport ReactJson from 'react-json-view'\n\nimport { Divider, List, ListItem, ListSubheader, ListItemAvatar, Chip, Avatar, ListItemText, Menu, MenuItem, Typography } from '@material-ui/core'\n\nimport MoreIcon from '@material-ui/icons/MoreVert'\nimport MemoryIcon from '@material-ui/icons/Memory'\n\nimport { makeStyles } from '@material-ui/styles'\n\nimport { statusColor, msvcStatusColor } from '../utils'\nimport Modal from '../../Utils/Modal'\nimport Confirm from '../../Utils/Confirm'\nimport { FeedbackContext } from '../../Utils/FeedbackContext'\n\nimport ConnectNode from './ConnectNode'\nimport AddMicroservice from './AddMicroservice'\nimport RemoveMicroservice from './RemoveMicroservice'\nimport SimpleTabs from './Tabs'\nimport { ControllerContext } from '../../ControllerProvider'\n\nconst useStyles = makeStyles(theme => ({\n  avatarList: {\n    color: 'white',\n    backgroundColor: 'var(--statusColor, white)',\n    boxShadow: `0px 2px 2px ${theme.colors.carbon}`\n  },\n  msvcChipList: {\n    display: 'flex',\n    flexDirection: 'column',\n    width: '20%',\n    flex: '1',\n    paddingRight: '15px'\n  },\n  msvcChip: {\n    marginTop: 'var(--mTop, 0px)',\n    backgroundColor: `var(--color, ${theme.colors.cobalt})`,\n    fontSize: '10px',\n    borderRadius: '5px',\n    height: '20px',\n    margin: '2px',\n    width: '100px',\n    color: 'white',\n    '& .MuiChip-label': {\n      textOverflow: 'ellipsis',\n      whiteSpace: 'nowrap',\n      overflow: 'hidden',\n      display: 'block'\n    }\n  },\n  jsonDisplay: {\n    width: '99%',\n    minHeight: '30rem',\n    fontFamily: '\"Lucida Console\", Monaco, monospace',\n    fontSize: '0.8rem',\n    lineHeight: '1.2'\n  },\n  listTitle: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'baseline',\n    color: theme.palette.text.primary\n  },\n  link: {\n    color: theme.palette.text.secondary,\n    cursor: 'pointer',\n    '&:hover': {\n      textDecoration: 'underline'\n    }\n  }\n}))\n\nexport default function AgentList (props) {\n  const classes = useStyles()\n  const [openRemoveAgentConfirm, setOpenRemoveAgentConfirm] = React.useState(false)\n  const [openDetailsModal, setOpenDetailsModal] = React.useState(false)\n  const [openConnectNodeModal, setOpenConnectNodeModal] = React.useState(false)\n  const [openAddMicroserviceModal, setOpenAddMicroserviceModal] = React.useState(false)\n  const [openRemoveMicroserviceModal, setOpenRemoveMicroserviceModal] = React.useState(false)\n  const [menuAnchorEl, setMenuAnchorEl] = React.useState(null)\n  const { msvcsPerAgent, msvcs, agents, agent, setAgent, setAutozoom, loading } = props\n  const feedbackContext = React.useContext(FeedbackContext)\n  const { request } = React.useContext(ControllerContext)\n\n  const handleCloseMenu = () => setMenuAnchorEl(null)\n  const openMenu = (e) => setMenuAnchorEl(e.currentTarget)\n  const openDetails = () => {\n    setOpenDetailsModal(true)\n    handleCloseMenu()\n  }\n  const openAddMicroservice = () => {\n    setOpenAddMicroserviceModal(true)\n    handleCloseMenu()\n  }\n  const openRemoveMicroservice = () => {\n    setOpenRemoveMicroserviceModal(true)\n    handleCloseMenu()\n  }\n\n  const openRemoveAgent = () => {\n    setOpenRemoveAgentConfirm(true)\n    handleCloseMenu()\n  }\n\n  const removeAgent = async (iofog) => {\n    try {\n      const response = await request(`/api/v3/iofog/${iofog.uuid}`, {\n        method: 'DELETE'\n      })\n      if (!response.ok) {\n        feedbackContext.pushFeedback({ message: `Failed to remove node: ${response.statusText}`, type: 'error' })\n      } else {\n        feedbackContext.pushFeedback({ message: 'Agent removed!', type: 'success' })\n      }\n      setOpenRemoveAgentConfirm(false)\n    } catch (e) {\n      feedbackContext.pushFeedback({ message: e.message, type: 'error' })\n    }\n  }\n\n  return (\n    <React.Fragment>\n      <List\n        subheader={\n          <ListSubheader component='div' id='agent-list-subheader' style={{ position: 'relative' }} disableGutters disableSticky>\n            <div className={classes.listTitle}>\n              <div>\n                <Typography variant='h5'>Agents - <small>{loading ? 0 : agents.length} nodes</small></Typography>\n                {/* <small className={classes.link} onClick={() => setOpenConnectNodeModal(!openConnectNodeModal)}>+ Add node</small> */}\n              </div>\n              <div>\n                <small className={classes.link} onClick={() => setAutozoom(true)}>See all ECN</small>\n              </div>\n            </div>\n          </ListSubheader>\n        }\n      >\n        {(loading ? [] : agents).map(a => {\n          const msvcs = msvcsPerAgent[a.uuid] || []\n          return (\n            <ListItem button key={a.uuid} onClick={() => setAgent(a)} selected={a.uuid === agent.uuid}>\n              <ListItemAvatar>\n                <Avatar style={{ '--statusColor': statusColor[a.daemonStatus] }} className={classes.avatarList}>\n                  <MemoryIcon />\n                </Avatar>\n              </ListItemAvatar>\n              <ListItemText primary={a.name} secondary={`${msvcs.length} Microservices`} />\n              <div className={classes.msvcChipList}>\n                {msvcs.map((m, idx) => (\n                  <React.Fragment key={m.uuid}>\n                    <Chip\n                      size='small'\n                      label={m.name}\n                      style={{\n                        '--mTop': idx ? '2px' : '0px',\n                        '--color': msvcStatusColor[(a.daemonStatus === 'RUNNING' && m.flowActive) ? 'RUNNING' : 'UNKNOWN']\n                      }}\n                      className={classes.msvcChip}\n                      title={m.name}\n                    />\n                  </React.Fragment>\n                ))}\n              </div>\n              <MoreIcon onClick={openMenu} />\n            </ListItem>\n          )\n        })}\n      </List>\n      <Modal\n        {...{\n          open: openDetailsModal,\n          title: `${agent.name} details`,\n          onClose: () => setOpenDetailsModal(false)\n        }}\n      >\n        <SimpleTabs>\n          <ReactJson title='Agent' src={agent} name={false} />\n          <ReactJson title='Microservices' src={msvcsPerAgent[agent.uuid]} name={false} />\n        </SimpleTabs>\n      </Modal>\n      <Modal\n        {...{\n          open: openAddMicroserviceModal,\n          title: `Deploy microservice to ${agent.name}`,\n          onClose: () => setOpenAddMicroserviceModal(false)\n        }}\n      >\n        <AddMicroservice {...{\n          target: agent,\n          microservices: msvcs,\n          onSuccess: () => setOpenAddMicroserviceModal(false)\n        }} />\n      </Modal>\n      <Modal\n        {...{\n          open: openRemoveMicroserviceModal,\n          title: `Remove microservice from ${agent.name}`,\n          onClose: () => setOpenRemoveMicroserviceModal(false)\n        }}\n      >\n        <RemoveMicroservice\n          {...{\n            target: agent,\n            msvcs: msvcsPerAgent[agent.uuid] || [],\n            onSuccess: () => setOpenRemoveMicroserviceModal(false)\n          }}\n        />\n      </Modal>\n      <Modal\n        {...{\n          open: openConnectNodeModal,\n          title: `Connect agent`,\n          onClose: () => setOpenConnectNodeModal(false)\n        }}\n      >\n        <ConnectNode\n          {...{\n            controller: props.controller,\n            onSuccess: () => setOpenConnectNodeModal(false)\n          }}\n        />\n      </Modal>\n      <Confirm\n        {...{\n          open: openRemoveAgentConfirm,\n          title: `Remove agent: ${agent.name}`,\n          onClose: () => setOpenRemoveAgentConfirm(false),\n          onConfirm: () => removeAgent(agent)\n        }}\n      >\n        <Typography variant='h5'>Confirm removal of agent UUID: {agent.uuid}</Typography>\n      </Confirm>\n      <Menu\n        id='agent-menu'\n        anchorEl={menuAnchorEl}\n        keepMounted\n        open={Boolean(menuAnchorEl)}\n        onClose={handleCloseMenu}\n      >\n        <MenuItem onClick={openDetails}>Details</MenuItem>\n        {/* <MenuItem onClick={openRemoveAgent}>Remove agent</MenuItem> */}\n        {/* <Divider />\n        <MenuItem onClick={openAddMicroservice}>Add microservice</MenuItem>\n        <MenuItem onClick={openRemoveMicroservice}>Remove microservice</MenuItem> */}\n      </Menu>\n    </React.Fragment>\n  )\n}\n","import React from 'react'\nimport { isFinite, get } from 'lodash'\n\nimport GoogleMapReact from 'google-map-react'\nimport { fitBounds } from 'google-map-react/utils'\n\nimport { Badge, Avatar } from '@material-ui/core'\n\nimport MemoryIcon from '@material-ui/icons/Memory'\nimport CtrlIcon from '@material-ui/icons/DeveloperBoard'\n\nimport { makeStyles, useTheme } from '@material-ui/styles'\n\nimport { statusColor, msvcStatusColor } from './utils'\n\nconst useStyles = makeStyles(theme => ({\n  mapMarkerTransform: {\n    transform: 'translate(-50%, -100%)',\n    position: 'absolute'\n  },\n  msvcBadge: {\n    '& .MuiBadge-badge': {\n      backgroundColor: `var(--color, ${theme.colors.cobalt})`\n    }\n  },\n  mapMarker: {\n    backgroundColor: `var(--markerColor, ${theme.colors.success})`,\n    borderRadius: '50% 50% 50% 0 !important',\n    border: `2px solid var(--markerColor, ${theme.colors.success})`,\n    transform: 'rotate(-45deg)',\n    '& .MuiSvgIcon-root': {\n      transform: 'rotate(-45deg)'\n    }\n  },\n  mapWrapper: {\n    boxShadow: '0px 1px 3px 0px rgba(0,0,0,0.2), 0px 1px 1px 0px rgba(0,0,0,0.14), 0px 2px 1px -1px rgba(0,0,0,0.12)',\n    borderRadius: '4px',\n    width: '100%',\n    height: '100%',\n    maxHeight: '700px',\n    position: 'sticky',\n    top: '25px',\n    borderColor: theme.colors.aluminium,\n    '& div': {\n      borderRadius: '4px',\n      '& div': {\n        borderRadius: '4px'\n      }\n    }\n  }\n}))\n\nconst hasValidCoordinates = (coordinates) => {\n  return isFinite(coordinates[0]) && isFinite(coordinates[1])\n}\n\nexport default function Map (props) {\n  const classes = useStyles()\n  const theme = useTheme()\n  const DomElementRef = React.useRef()\n  const { controller, agent, setAgent, msvcsPerAgent, map, autozoom, loading } = props\n\n  const setMap = () => {\n    const bounds = new window.google.maps.LatLngBounds() // need handler incase `google` not yet available\n\n    const agents = (controller.agents || []).filter(a => hasValidCoordinates([a.latitude, a.longitude]))\n\n    if (!agents.length) {\n      map.center = [get(controller, 'info.location.lat', 0), get(controller, 'info.location.lon', 0)]\n      map.zoom = 9\n      return\n    }\n\n    agents.forEach(marker => {\n      bounds.extend(new window.google.maps.LatLng(get(marker, 'latitude', 0), get(marker, 'longitude', 0)))\n    })\n\n    bounds.extend(new window.google.maps.LatLng(get(controller, 'info.location.lat', 0), get(controller, 'info.location.lon', 0)))\n\n    const newBounds = {\n      ne: {\n        lat: bounds.getNorthEast().lat(),\n        lng: bounds.getNorthEast().lng()\n      },\n      sw: {\n        lat: bounds.getSouthWest().lat(),\n        lng: bounds.getSouthWest().lng()\n      }\n    }\n\n    const size = {\n      width: get(DomElementRef, 'current.offsetWidth', 600),\n      height: get(DomElementRef, 'current.offsetHeight', 800)\n    }\n\n    const { center, zoom } = fitBounds(newBounds, size)\n    map.center = center\n    map.zoom = zoom\n  }\n\n  if (autozoom && window.google) {\n    setMap()\n  }\n\n  return (\n    <div className={classes.mapWrapper} ref={DomElementRef}>\n      <GoogleMapReact\n        {...map}\n        bootstrapURLKeys={{\n          key: 'AIzaSyChp_fUXiK05ulRl_ewRGKWsQ1k0ULIFkA'\n        }}\n      >\n        {(loading ? [] : controller.agents).filter(a => hasValidCoordinates([a.latitude, a.longitude])).map(a =>\n          <div\n            key={a.uuid}\n            lat={a.latitude} lng={a.longitude}\n            className={classes.mapMarkerTransform}\n            onClick={() => setAgent(a)}\n          >\n            <Badge color='primary' style={{ '--color': msvcStatusColor[a.daemonStatus] }} badgeContent={(msvcsPerAgent[a.uuid] || []).filter(m => m.flowActive).length} invisible={a.uuid !== agent.uuid} className={`${classes.msvcBadge}`}>\n              <Avatar\n                style={{ '--markerColor': statusColor[a.daemonStatus] }}\n                className={classes.mapMarker}>\n                <MemoryIcon />\n              </Avatar>\n            </Badge>\n          </div>\n        )}\n        {!loading && controller.info && hasValidCoordinates([controller.info.location.lat, controller.info.location.lon]) && <Avatar\n          lat={controller.info.location.lat}\n          lng={controller.info.location.lon}\n          style={{ '--markerColor': theme.colors.argon }}\n          className={classes.mapMarker}>\n          <CtrlIcon />\n        </Avatar>}\n      </GoogleMapReact>\n    </div>\n  )\n}\n","import React, { useState } from 'react'\nimport { useInterval } from '../hooks/useInterval'\nimport { find, groupBy, get, isFinite } from 'lodash'\n\nimport Divider from '@material-ui/core/Divider'\nimport { makeStyles } from '@material-ui/styles'\n\nimport ControllerInfo from './ControllerInfo'\nimport ActiveResources from './ActiveResources'\nimport AgentList from './AgentList'\nimport Map from './Map'\n\n// import logo from '../assets/logo.png'\nimport './layout.scss'\n\nimport mapStyle from './mapStyle.json'\nimport { ControllerContext } from '../ControllerProvider'\n\nconst useStyles = makeStyles({\n  divider: {\n    margin: '15px 0'\n  }\n})\n\nconst initState = {\n  controller: {\n    info: {\n      location: {},\n      user: {}\n    },\n    agents: [],\n    flows: [],\n    microservices: []\n  },\n  agent: {},\n  activeAgents: [],\n  activeFlows: [],\n  activeMsvcs: [],\n  msvcsPerAgent: []\n}\n\nexport const actions = {\n  UPDATE: 'UPDATE',\n  SET_AGENT: 'SET_AGENT'\n}\n\nconst updateData = (state, newController) => {\n  if (!newController) {\n    return state\n  }\n  const activeFlows = newController.flows.filter(f => f.isActivated === true)\n  const activeAgents = newController.agents.filter(a => a.daemonStatus === 'RUNNING')\n  const msvcsPerAgent = groupBy(newController.microservices.map(m => ({\n    ...m,\n    flowActive: !!find(activeFlows, f => m.flowId === f.id)\n  })), 'iofogUuid')\n  const activeMsvcs = activeAgents.reduce((res, a) => res.concat(get(msvcsPerAgent, a.uuid, []).filter(m => !!find(activeFlows, f => f.id === m.flowId)) || []), [])\n\n  if (!state.agent || !state.agent.uuid) {\n    state.agent = newController.agents[0] || {}\n  }\n\n  return {\n    ...state,\n    controller: newController,\n    activeFlows,\n    activeAgents,\n    activeMsvcs,\n    msvcsPerAgent\n  }\n}\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case actions.UPDATE:\n      return updateData(state, action.data)\n    case actions.SET_AGENT:\n      return {\n        ...state,\n        agent: action.data\n      }\n    default:\n      return state\n  }\n}\n\nexport default function ECNViewer () {\n  const classes = useStyles()\n  const [state, dispatch] = React.useReducer(reducer, initState)\n  const [autozoom, setAutozoom] = useState(true)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState(false)\n  const [map, setMap] = useState({\n    center: [0, 0],\n    zoom: 15,\n    options: {\n      styles: mapStyle\n    }\n  })\n  const { controller: controllerInfo, request } = React.useContext(ControllerContext)\n  React.useEffect(() => {\n    setLoading(true)\n    setError(null)\n  }, [controllerInfo])\n\n  const update = async () => {\n    const agentsResponse = await request('/api/v3/iofog-list')\n    if (!agentsResponse.ok) {\n      setError({ message: agentsResponse.statusText })\n      return\n    }\n    const agents = (await agentsResponse.json()).fogs\n    const flowsResponse = await request('/api/v3/flow')\n    if (!flowsResponse.ok) {\n      setError({ message: flowsResponse.statusText })\n      return\n    }\n    const flows = (await flowsResponse.json()).flows\n\n    let microservices = []\n    for (const flow of flows) {\n      const microservicesResponse = await request(`/api/v3/microservices?flowId=${flow.id}`)\n      if (!flowsResponse.ok) {\n        setError({ message: microservicesResponse.statusText })\n        return\n      }\n      microservices = microservices.concat((await microservicesResponse.json()).microservices)\n    }\n    if (loading) {\n      setLoading(false)\n    }\n    if (error) {\n      setError(false)\n    }\n    dispatch({ type: actions.UPDATE, data: { agents, flows, microservices } })\n  }\n\n  useInterval(() => {\n    update()\n  }, [3000])\n\n  const setAgent = a => dispatch({ type: actions.SET_AGENT, data: a })\n\n  const selectAgent = (a) => {\n    setAgent(a)\n    if (isFinite(a.latitude) && isFinite(a.longitude)) {\n      setMap({ ...map, center: [a.latitude, a.longitude], zoom: 15 })\n      setAutozoom(false)\n    }\n  }\n\n  const selectController = () => {\n    setMap({ ...map, center: [controllerInfo.location.lat, controllerInfo.location.lon], zoom: 15 })\n    setAutozoom(false)\n  }\n\n  const centerMap = (coordinates) => { setMap({ ...map, center: coordinates }) }\n\n  const { controller, activeAgents, activeFlows, activeMsvcs, agent, msvcsPerAgent } = state\n  return (\n    <div className='viewer-layout-container'>\n      <div className='box sidebar'>\n        <ControllerInfo {...{ controller: controllerInfo, selectController, loading, error }} />\n        <Divider className={classes.divider} />\n        <ActiveResources {...{ activeAgents, activeFlows, activeMsvcs, loading }} />\n        <Divider className={classes.divider} />\n        <AgentList {...{ msvcsPerAgent, loading, msvcs: controller.microservices, agents: controller.agents, agent, setAgent: selectAgent, centerMap, setAutozoom, controller: controller.info }} />\n      </div>\n      <div className='map-grid-container'>\n        <Map {...{ controller: { ...controller, info: controllerInfo }, agent, setAgent, msvcsPerAgent, map, autozoom, setAutozoom, loading }} />\n      </div>\n    </div>\n  )\n}\n","import { useEffect, useRef } from 'react'\n\nexport function useInterval (callback, delay) {\n  const savedCallback = useRef()\n\n  // Remember the latest callback.\n  useEffect(() => {\n    savedCallback.current = callback\n  }, [callback])\n\n  // Set up the interval.\n  useEffect(() => {\n    function tick () {\n      savedCallback.current()\n    }\n    if (delay !== null) {\n      let id = setInterval(tick, delay)\n      return () => clearInterval(id)\n    }\n  }, [delay])\n}\n","import React from 'react'\nimport { TextField, Grid, Button } from '@material-ui/core'\nimport { makeStyles } from '@material-ui/styles'\n\nimport { ControllerContext } from '../ControllerProvider'\nimport { FeedbackContext } from '../Utils/FeedbackContext'\n\nconst useStyles = makeStyles({\n  skeleton: {\n    minHeight: '55px'\n  }\n})\n\nexport default function Config (props) {\n  const classes = useStyles()\n  const { pushFeedback } = React.useContext(FeedbackContext)\n  const { controller, updateController } = React.useContext(ControllerContext)\n  const [data, setData] = React.useState({ ...controller })\n\n  const save = async () => {\n    try {\n      await updateController(data)\n      pushFeedback({ message: 'Controller details saved!', type: 'success' })\n      props.onSave()\n    } catch (e) {\n      pushFeedback({ message: e.message, type: 'error' })\n    }\n  }\n\n  const handleChange = name => event => {\n    setData({ ...data, [name]: event.target.value })\n  }\n  const handleUserChange = name => event => {\n    setData({ ...data, user: { ...data.user, [name]: event.target.value } })\n  }\n  return (\n    <React.Fragment>\n      {data.dev && <Grid container spacing={2} >\n        <Grid item xs={12} sm={6}>\n          <TextField\n            id='ip'\n            label='IP'\n            onChange={handleChange('ip')}\n            value={data.ip}\n            fullWidth\n            className={classes.textField}\n            margin='normal'\n            variant='outlined'\n          />\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <TextField\n            id='port'\n            label='Port'\n            onChange={handleChange('port')}\n            value={data.port}\n            fullWidth\n            className={classes.textField}\n            margin='normal'\n            variant='outlined'\n          />\n        </Grid>\n      </Grid>}\n      <Grid container spacing={2}>\n        <Grid item xs={12} sm={6}>\n          <TextField\n            id='email'\n            label='Email'\n            onChange={handleUserChange('email')}\n            value={data.user.email}\n            fullWidth\n            className={classes.textField}\n            margin='normal'\n            variant='outlined'\n          />\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <TextField\n            id='password'\n            label='Password'\n            onChange={handleUserChange('password')}\n            value={data.user.password}\n            fullWidth\n            type='password'\n            className={classes.textField}\n            margin='normal'\n            variant='outlined'\n          />\n        </Grid>\n      </Grid>\n      <Grid container justify='flex-end'>\n        <Grid item>\n          <Button onClick={save}>\n            Save\n          </Button>\n        </Grid>\n      </Grid>\n    </React.Fragment>\n  )\n}\n","import React from 'react'\nimport { HashRouter, Route, Switch, NavLink, Redirect } from 'react-router-dom'\nimport Avatar from '@material-ui/core/Avatar'\nimport SearchIcon from '@material-ui/icons/Search'\nimport NotificationsIcon from '@material-ui/icons/NotificationsOutlined'\nimport HomeIcon from '@material-ui/icons/HomeOutlined'\nimport FakeIcon1 from '@material-ui/icons/GraphicEqOutlined'\nimport SettingsIcon from '@material-ui/icons/SettingsOutlined'\n\nimport ECNViewer from '../ECNViewer'\nimport Modal from '../Utils/Modal'\nimport Config from '../Config'\nimport { ControllerContext } from '../ControllerProvider'\n\nimport logomark from '../assets/logomark.svg'\nimport './layout.scss'\n\nimport { makeStyles } from '@material-ui/styles'\n\nconst useStyles = makeStyles(theme => ({\n  wrapper: {\n    color: theme.colors.carbon,\n    backgroundColor: theme.colors.silver\n  },\n  divider: {\n    margin: '15px 0'\n  },\n  logo: {\n    backgroundColor: theme.colors.phosphorus,\n    color: theme.colors.white\n  },\n  latNav: {\n    backgroundColor: theme.colors.carbon\n  },\n  avatarContainer: {\n    backgroundColor: theme.colors.phosphorus,\n    marginRight: '45px'\n  },\n  latIcons: {\n    margin: 'auto',\n    marginTop: '15px',\n    cursor: 'pointer',\n    backgroundColor: theme.colors.carbon,\n    '.active &': {\n      backgroundColor: theme.colors.aluminium\n    }\n  },\n  topIcons: {\n    height: '100%',\n    width: '25px',\n    marginRight: '25px',\n    cursor: 'pointer'\n  },\n  nav: {\n    marginBottom: '15px',\n    height: '50px',\n    '& a': {\n      height: '100%',\n      '& img': {\n        height: '100%'\n      }\n    }\n  },\n  footerContainer: {\n    display: 'flex',\n    justifyContent: 'space-around',\n    justifyItems: 'center',\n    padding: '20px 10px 20px 0px'\n  },\n  footer: {\n    color: theme.colors.aluminium,\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'flex-end',\n    fontSize: '9pt'\n  }\n}))\n\nexport default function Layout () {\n  const classes = useStyles()\n  const { controller } = React.useContext(ControllerContext)\n  const [settingsOpen, setSettingsOpen] = React.useState(!(controller.user.email && controller.user.password))\n\n  console.log(' ====> Rendering layout')\n\n  return <React.Fragment>\n    <HashRouter>\n      <div className={classes.wrapper + ' wrapper'}>\n        <div className={classes.logo + ' logo'}>\n          <NavLink to='/overview' >\n            <img src={logomark} alt='Edgeworx logomark' />\n          </NavLink>\n        </div>\n        <div className='topnav'>\n          <SearchIcon className={classes.topIcons} />\n          <NotificationsIcon className={classes.topIcons} />\n          <Avatar className={classes.avatarContainer} >M</Avatar>\n        </div>\n        <div className={classes.latNav + ' latnav'}>\n          <NavLink to='/overview' >\n            <Avatar className={classes.latIcons} >\n              <HomeIcon />\n            </Avatar>\n          </NavLink>\n          {/* <NavLink to='/routes' > */}\n          <Avatar className={classes.latIcons} >\n            <FakeIcon1 />\n          </Avatar>\n          {/* </NavLink> */}\n          <Avatar className={classes.latIcons} >\n            <SettingsIcon onClick={() => setSettingsOpen(!settingsOpen)} />\n          </Avatar>\n        </div>\n        <div className='content'>\n          <Switch>\n            {/* <Route path='/routes' component={() => 'Hello agents'} /> */}\n            <Route path='/overview' component={ECNViewer} />\n            <Route component={() => <Redirect to='/overview' />} />\n          </Switch>\n        </div>\n        <div className={`${classes.footerContainer} footer`}>\n          <span className={classes.footer}>Copyright © 2019 Edgeworx, Inc. All Rights Reserved.</span>\n        </div>\n      </div>\n    </HashRouter>\n    <Modal\n      {...{\n        open: settingsOpen,\n        title: controller.dev ? `Controller details` : `User credentials`,\n        onClose: () => setSettingsOpen(false)\n      }}\n    >\n      <Config {...{ onSave: () => setSettingsOpen(false) }} />\n    </Modal>\n\n  </React.Fragment>\n}\n","import React from 'react'\n\nimport CssBaseline from '@material-ui/core/CssBaseline'\n\nimport Layout from './Layout'\n\nimport './App.css'\nimport FeedbackContext from './Utils/FeedbackContext'\nimport ThemeContext from './Theme/ThemeProvider'\nimport ControllerContext from './ControllerProvider'\n\nfunction App () {\n  console.log(' ======> Rendering app ')\n  return (\n    <React.Fragment>\n      <CssBaseline />\n      <ThemeContext>\n        <ControllerContext>\n          <FeedbackContext>\n            <Layout />\n          </FeedbackContext>\n        </ControllerContext>\n      </ThemeContext>\n    </React.Fragment>\n  )\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport * as serviceWorker from './serviceWorker'\n\nReactDOM.render(<App />, document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}