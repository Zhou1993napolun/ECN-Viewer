{"version":3,"sources":["assets/logomark.svg","hooks/useInterval.js","ECNViewer/ControllerInfo.js","ECNViewer/ActiveResources.js","Theme/ThemeProvider.js","ECNViewer/utils.js","Utils/Modal.js","Utils/Alert.js","Utils/FeedbackContext.js","ControllerProvider/index.js","ECNViewer/AgentList/ConnectNode.js","Utils/Autocomplete.js","ECNViewer/AgentList/AddMicroservice.js","ECNViewer/AgentList/RemoveMicroservice.js","Utils/Tabs.js","providers/Config/index.js","ECNViewer/AgentList/index.js","Utils/FileDrop.js","Utils/constants.js","providers/Map/index.js","ECNViewer/ApplicationList/index.js","ECNViewer/Map.js","ECNViewer/index.js","Catalog/CatalogTable.js","Catalog/AddCatalogItemForm.js","Utils/Confirm.js","Catalog/index.js","Config/index.js","ECNViewerConfig/index.js","Layout/index.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","useRecursiveTimeout","callback","delay","savedCallback","useRef","useEffect","current","id","setTimeout","tick","ret","Promise","then","clearTimeout","useStyles","makeStyles","theme","controllerInfo","paddingTop","padding","controllerName","fontSize","fontFamily","fontWeight","lineHeight","letterSpacing","width","borderBottom","warningChip","backgroundColor","colors","danger","color","controllerTitle","display","justifyContent","alignItems","textEmphasis","ControllerInfo","props","classes","useTheme","controller","loading","error","location","city","country","lat","lon","query","controllerError","React","useState","window","localStorage","getItem","setControllerName","document","title","className","Typography","style","variant","Input","value","onChange","e","name","target","setItem","onKeyDown","key","blur","Tooltip","message","aria-label","Chip","label","gold","List","ListItem","ListItemIcon","ListItemText","primary","cursor","onClick","selectController","summary","gridTemplateColumns","gridColumnGap","textAlign","ActiveResources","applications","activeAgents","activeMsvcs","Paper","length","phosphorus","cobalt","chromium","argon","carbon","lead","aluminium","silver","white","createMuiTheme","customTheme","success","Theming","ThemeProvider","children","statusColor","RUNNING","UNKNOWN","OFFLINE","msvcStatusColor","tagColor","modalTitle","borderRadius","modal","top","left","position","modalContent","maxHeight","overflowY","modalActions","modalAction","marginLeft","_Modal","open","onClose","Modal","aria-labelledby","actions","map","a","Button","text","variantIcon","CheckCircleIcon","warning","WarningIcon","ErrorIcon","info","InfoIcon","icon","iconVariant","opacity","marginRight","spacing","alert","margin","boxShadow","container","flexDirection","bottom","zIndex","Alert","alerts","idx","handleClick","variantKey","type","Icon","SnackbarContent","aria-describedby","action","IconButton","FeedbackContext","createContext","feedbacks","setFeedbacks","pushFeedback","useFeedback","useContext","initState","nextId","reducer","state","data","timeout","dispatch","idxToRemove","findIndex","f","slice","Context","useReducer","console","log","Provider","newFeedbacks","newFeedback","push","Consumer","initControllerState","localUser","controllerJson","user","JSON","parse","api","protocol","ip","port","status","versions","ecnViewer","getUrl","path","dev","hostname","join","getHeaders","headers","controllerConfig","ControllerContext","updateController","useController","lookUpControllerInfo","host","split","localhost","RegExp","test","fetch","response","ok","json","Error","statusText","getControllerStatus","updateControllerInfo","ipInfo","token","newState","authenticate","method","Accept","body","stringify","accessToken","request","options","t","Authorization","newController","effect","divider","initNode","newError","ConnectNode","node","setNode","handleChange","event","createAgent","agent","uuid","getProvisioningKey","linkAgent","ioFogApi","provisionAgent","connect","fogType","iofogUuid","provisioningKey","Grid","item","xs","sm","TextField","fullWidth","textField","helperText","Divider","justify","root","flexGrow","height","paper","marginTop","marginBot","right","chip","inputRoot","flexWrap","inputInput","Autocomplete","itemToString","get","initialSelectedItem","selectedItem","clearSelection","getInputProps","getItemProps","getLabelProps","getMenuProps","highlightedIndex","inputValue","isOpen","openMenu","onFocus","disabled","placeholder","onBlur","inputProps","InputProps","ref","others","inputRef","input","renderInput","InputLabelProps","shrink","square","showEmpty","deburr","trim","toLowerCase","inputLength","count","suggestions","filter","suggestion","keep","maxSuggestions","startsWith","getSuggestions","index","suggestionProps","itemProps","isHighlighted","isSelected","MenuItem","selected","component","renderSuggestion","formControl","rowIcon","newPaper","border","inputWithIcon","MenuProps","PaperProps","ITEM_HEIGHT","initMsvc","flow","catalog","images","volumeMappings","ports","rootHostAccess","_new","initFlow","isActivated","initCatalogItem","fogTypeId","containerImage","registryId","generateRouteSelect","list","isNewMsvc","m","AddMicroservice","flows","setFlows","setCatalog","config","ReactJsonRef","src","onAdd","updated_src","onEdit","onDelete","msvc","setMsvc","newFlow","setNewFlow","newCatalogItem","setNewCatalogItem","routes","setRoutes","all","flowRaw","flowsRes","catalogRaw","catalogRes","catalogItems","setter","prevState","handleMsvcChangeArray","objKey","valueDecorator","x","getCatalogImage","img","removeFromArray","addMsvc","flowId","catalogItemId","createFlow","createCatalogItem","catalogItem","Math","random","toString","replace","substr","createRoute","route","from","to","createRoutes","defaultUuid","createMsvc","onSuccess","routeList","microservices","concat","FormControl","required","FormControlLabel","control","Checkbox","checked","v","hostDestination","containerDestination","InputLabel","htmlFor","Select","accessMode","p","parseInt","external","internal","r","chips","marginBottom","RemoveMicroservice","msvcsToRemove","setMsvcsToRemove","remove","res","indexOf","msvcsPerUUID","msvcs","reduce","multiple","renderValue","TabContainer","palette","background","SimpleTabs","setValue","Tabs","newValue","child","Tab","ConfigContext","useConfig","_initConfig","tags","defaultTagColor","ConfigProvider","setConfig","_fetchConfig","stringifiedConfig","saveConfig","newConfig","isDebug","search","includes","editConfig","updateTags","agents","updated","tag","lget","lset","getTagDisplayInfo","avatarList","msvcChipList","flex","paddingRight","msvcChip","textOverflow","whiteSpace","overflow","jsonDisplay","minHeight","listTitle","link","secondary","textDecoration","TagChip","first","size","AgentList","openDetailsModal","setOpenDetailsModal","openConnectNodeModal","setOpenConnectNodeModal","openAddMicroserviceModal","setOpenAddMicroserviceModal","openRemoveMicroserviceModal","setOpenRemoveMicroserviceModal","menuAnchorEl","setMenuAnchorEl","msvcsPerAgent","setAgent","setAutozoom","handleCloseMenu","currentTarget","subheader","ListSubheader","disableGutters","disableSticky","button","ListItemAvatar","Avatar","daemonStatus","Fragment","flowActive","Menu","anchorEl","keepMounted","Boolean","FILE","NativeTypes","dropZone","verticalAlign","active","FileDrop","useDrop","accept","drop","onDrop","collect","monitor","highlighted","canDrop","hovered","isOver","collectedProps","CircularProgress","API_VERSIONS","MapContext","useMap","hasValidCoordinates","coordinates","isFinite","MapProvider","mapRef","center","zoom","styles","mapStyle","_setMap","setMap","includeController","newMap","bounds","google","maps","LatLngBounds","validAgents","latitude","longitude","forEach","marker","extend","LatLng","newBounds","ne","getNorthEast","lng","sw","getSouthWest","fitBounds","ApplicationList","fileParsing","setFileParsing","openStartStopModal","setOpenStartStopModal","openDeleteApplicationModal","setOpenDeleteApplicationModal","application","setApplication","agentsByName","setAgentsByName","agentsByUUID","setAgentsByUUID","reduced","byName","byUUID","toggleApplication","deleteApplication","mapImages","imgs","x86","arm","parseMicroserviceImages","fileImages","catalogId","undefined","registryByName","remote","local","registry","_deleteUndefinedFields","obj","Object","keys","parseMicroservice","microservice","microserviceData","logSize","publicPort","public","cmd","env","extraHosts","parseApplicationFile","doc","apiVersion","kind","metadata","spec","deployApplication","newApplication","url","readApplicationFile","file","files","reader","FileReader","onload","evt","yaml","safeLoad","result","applicationData","err","find","onerror","readAsText","flexColumn","uniqBy","selectApplication","Dialog","DialogTitle","DialogContent","DialogContentText","DialogActions","autoFocus","mapMarkerTransform","transform","msvcBadge","mapMarker","mapWrapper","borderColor","Map","bootstrapURLKeys","Badge","badgeContent","invisible","activeFlows","groupBy","updateData","ECNViewer","setLoading","setError","refresh","agentsResponse","fogs","applicationResponse","microservicesResponse","newMicroservices","pointer","avatarContainer","tableActions","filterFields","CatalogTable","setFilter","page","setPage","rowsPerPage","setRowsPerPage","filteredCatalog","field","emptyRows","min","startAdornment","InputAdornment","endAdornment","TableContainer","Table","table","stickyHeader","TableHead","TableRow","TableCell","align","TableBody","colSpan","row","scope","description","supportedPlatforms","publisher","category","TablePagination","rowsPerPageOptions","onChangePage","newPage","onChangeRowsPerPage","AddCatalogItemForm","newItem","setNewItem","onSave","registries","handleImageChange","multiline","rowsMax","select","option","Confirm","onConfirm","titleRow","mapCatalogItem","configExample","parseCatalogItem","Catalog","openRemoveConfirm","setOpenRemoveConfirm","openAddCatalogItemModal","setOpenAddCatalogItemModal","fetching","setFetching","setRegistries","setSelectedItem","catalogItemsResponse","registriesResponse","fetchCatalog","addCatalogItem","removeCatalogItem","i","readCatalogItemFile","skeleton","Config","setData","save","handleUserChange","email","onKeyPress","password","step","setTags","href","rel","lmap","float","wrapper","logo","latNav","latIcons","topIcons","nav","footerContainer","justifyItems","footer","Layout","settingsOpen","setSettingsOpen","logomark","alt","App","CssBaseline","DndProvider","backend","Backend","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.c3eae9a5.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logomark.380acb6b.svg\";","import React, { useEffect, useRef } from 'react'\n\nfunction useRecursiveTimeout (\n  callback,\n  delay\n) {\n  const savedCallback = useRef(callback)\n\n  // Remember the latest callback.\n  useEffect(() => {\n    savedCallback.current = callback\n  }, [callback])\n\n  // Set up the timeout loop.\n  useEffect(() => {\n    let id\n    function tick () {\n      const ret = savedCallback.current()\n\n      if (ret instanceof Promise) {\n        ret.then(() => {\n          if (delay !== null) {\n            id = setTimeout(tick, delay)\n          }\n        })\n      } else {\n        if (delay !== null) {\n          id = setTimeout(tick, delay)\n        }\n      }\n    }\n    if (delay !== null) {\n      id = setTimeout(tick, delay)\n      return () => id && clearTimeout(id)\n    }\n  }, [delay])\n}\n\nexport default useRecursiveTimeout\n","import React from 'react'\nimport Skeleton from 'react-loading-skeleton'\n\nimport { Typography, List, ListItem, ListItemIcon, ListItemText, Chip, Tooltip, Input } from '@material-ui/core'\n\nimport LocationCityIcon from '@material-ui/icons/LocationCity'\nimport GPSFixedIcon from '@material-ui/icons/GpsFixed'\nimport IPIcon from '@material-ui/icons/WifiTethering'\n\nimport { makeStyles, useTheme } from '@material-ui/styles'\n\nconst CONTROLLER_NAME_KEY = 'ControllerName'\nconst DEFAULT_CONTROLLER_NAME = 'Controller'\n\nconst useStyles = makeStyles(theme => ({\n  controllerInfo: {\n    paddingTop: '0px',\n    '& .paper': {\n      padding: '5px'\n    }\n  },\n  controllerName: {\n    fontSize: '1.5rem',\n    fontFamily: '\"Roboto\", \"Helvetica\", \"Arial\", sans-serif',\n    fontWeight: 400,\n    lineHeight: 1.33,\n    letterSpacing: '0em',\n    width: '100%',\n    '&::before': {\n      borderBottom: 'none !important'\n    }\n  },\n  warningChip: {\n    backgroundColor: `var(--color, ${theme.colors.danger})`,\n    color: 'white'\n  },\n  controllerTitle: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'baseline',\n    textEmphasis: 'bold'\n  }\n}))\n\nexport default function ControllerInfo (props) {\n  const classes = useStyles()\n  const theme = useTheme()\n  const { controller, loading, error } = props\n  const { city, country, lat, lon, query } = controller.location || {}\n\n  const controllerError = error || controller.error || null\n  const [controllerName, setControllerName] = React.useState(() => {\n    return window.localStorage.getItem(CONTROLLER_NAME_KEY) || DEFAULT_CONTROLLER_NAME\n  })\n\n  const loseFocus = (e) => {\n    const { key, target } = e\n    if (key === 'Enter') {\n      target.blur()\n    }\n  }\n\n  const updateControllerName = (e) => {\n    const name = e.target.value\n    window.localStorage.setItem(CONTROLLER_NAME_KEY, name)\n    setControllerName(name)\n  }\n\n  React.useEffect(() => {\n    if (controllerName === DEFAULT_CONTROLLER_NAME) {\n      window.document.title = 'ECN Viewer'\n      return\n    }\n    window.document.title = controllerName\n  }, [controllerName])\n\n  return (\n    <div className={classes.controllerInfo}>\n      <div className={classes.controllerTitle}>\n        <Typography style={{ width: '100%' }} variant='h5'>\n          <Input className={classes.controllerName} value={controllerName} onChange={updateControllerName} onKeyDown={loseFocus} />\n        </Typography>\n        {controllerError &&\n          <Tooltip title={controllerError.message} aria-label='Error'>\n            <Chip label='The controller is not reachable' style={{ '--color': theme.colors.gold }} className={classes.warningChip} />\n          </Tooltip>}\n      </div>\n      <List>\n        <ListItem>\n          <ListItemIcon><LocationCityIcon /></ListItemIcon>\n          {loading ? <ListItemText><Skeleton /></ListItemText> : <ListItemText primary={`${city}, ${country}`} />}\n        </ListItem>\n        <ListItem style={{ cursor: 'pointer' }} onClick={() => props.selectController()}>\n          <ListItemIcon><GPSFixedIcon /></ListItemIcon>\n          {loading ? <ListItemText><Skeleton /></ListItemText> : <ListItemText primary={`${lat}, ${lon}`} />}\n        </ListItem>\n        <ListItem>\n          <ListItemIcon><IPIcon /></ListItemIcon>\n          {loading ? <ListItemText><Skeleton /></ListItemText> : <ListItemText primary={query} />}\n        </ListItem>\n      </List>\n    </div>\n  )\n}\n","import React from 'react'\n\nimport { Typography, Paper } from '@material-ui/core'\n\nimport { makeStyles } from '@material-ui/styles'\nconst useStyles = makeStyles({\n  summary: {\n    display: 'grid',\n    gridTemplateColumns: 'repeat(3, 1fr)',\n    gridColumnGap: '15px',\n    textAlign: 'center'\n  }\n})\n\nexport default function ActiveResources (props) {\n  const classes = useStyles()\n  const { applications, activeAgents, activeMsvcs, loading } = props\n  return (\n    <div>\n      <Typography variant='h5'>Active resources</Typography>\n      <br />\n      <div className={classes.summary}>\n        <Paper>\n          <Typography variant='h3'>{loading ? 0 : applications.length}</Typography>\n          <Typography variant='subtitle1'>Applications</Typography>\n        </Paper>\n        <Paper>\n          <Typography variant='h3'>{loading ? 0 : activeAgents.length}</Typography>\n          <Typography variant='subtitle1'>Agents</Typography>\n        </Paper>\n        <Paper>\n          <Typography variant='h3'>{loading ? 0 : activeMsvcs.length}</Typography>\n          <Typography variant='subtitle1'>Microservices</Typography>\n        </Paper>\n      </div>\n    </div>\n  )\n}\n","import React from 'react'\nimport { ThemeProvider } from '@material-ui/styles'\nimport { createMuiTheme } from '@material-ui/core/styles'\n\nimport customTheme from './theme.json'\n\nconst colors = {\n  phosphorus: '#FF585D',\n  cobalt: '#5064EC',\n  gold: '#F5A623',\n  chromium: '#00C0A9',\n  argon: '#7A3BFF',\n  carbon: '#002E43',\n  lead: '#57687D',\n  aluminium: '#ACB5C6',\n  silver: '#FAFCFF',\n  white: '#FFFFFF'\n}\n\nexport const theme = createMuiTheme({\n  ...customTheme,\n  colors: {\n    ...colors,\n    success: colors.chromium,\n    error: colors.phosphorus,\n    danger: colors.gold\n  }\n})\n\nexport default function Theming (props) {\n  return (\n    <ThemeProvider theme={theme}>\n      {props.children}\n    </ThemeProvider>\n  )\n}\n","import { theme } from '../Theme/ThemeProvider'\n\nexport const statusColor = {\n  RUNNING: theme.colors.chromium,\n  UNKNOWN: theme.colors.aluminium,\n  OFFLINE: theme.colors.phosphorus\n}\n\nexport const msvcStatusColor = {\n  RUNNING: theme.colors.chromium,\n  UNKNOWN: theme.colors.aluminium,\n  OFFLINE: theme.colors.aluminium\n}\n\nexport const tagColor = theme.colors.cobalt\n","import React from 'react'\nimport { Modal, Paper, Typography, Button } from '@material-ui/core'\nimport CloseIcon from '@material-ui/icons/Close'\n\nimport { makeStyles } from '@material-ui/styles'\nconst useStyles = makeStyles(theme => ({\n  modalTitle: {\n    backgroundColor: theme.colors.carbon,\n    borderRadius: '4px 4px 0 0',\n    color: 'white',\n    padding: '5px',\n    display: 'flex',\n    justifyContent: 'space-between'\n  },\n  modal: {\n    width: '60%',\n    top: '15%',\n    left: '20%',\n    position: 'absolute',\n    borderRadius: '4px'\n  },\n  modalContent: {\n    maxHeight: '600px',\n    overflowY: 'scroll',\n    padding: '15px'\n  },\n  modalActions: {\n    display: 'flex',\n    backgroundColor: theme.colors.silver,\n    alignItems: 'flex-end'\n  },\n  modalAction: {\n    marginLeft: '5px'\n  }\n}))\n\nexport default function _Modal (props) {\n  const classes = useStyles()\n  const { title, open, onClose } = props\n  return (\n    <Modal\n      aria-labelledby={`${title} modal`}\n      {...{\n        open,\n        onClose\n      }}\n    >\n      <Paper className={classes.modal}>\n        <div className={classes.modalTitle}>\n          <Typography variant='h5'>{title}</Typography>\n          <CloseIcon style={{ cursor: 'pointer' }} onClick={onClose} />\n        </div>\n        <div className={classes.modalContent}>\n          {props.children}\n        </div>\n        {props.actions && !!props.actions.length &&\n          <div className={classes.modalActions}>\n            {props.actions.map(a => <Button key={a.text} className={`${a.className} ${classes.modalAction}`} {...{ variant: a.variant, onClick: a.onClick }}>{a.text}</Button>)}\n          </div>}\n      </Paper>\n    </Modal>\n  )\n}\n","import React from 'react'\nimport IconButton from '@material-ui/core/IconButton'\nimport WarningIcon from '@material-ui/icons/Warning'\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle'\nimport ErrorIcon from '@material-ui/icons/Error'\nimport InfoIcon from '@material-ui/icons/Info'\nimport CloseIcon from '@material-ui/icons/Close'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { SnackbarContent } from '@material-ui/core'\n\nconst variantIcon = {\n  success: CheckCircleIcon,\n  warning: WarningIcon,\n  error: ErrorIcon,\n  info: InfoIcon\n}\n\nconst useStyles = makeStyles(theme => ({\n  success: {\n    backgroundColor: theme.colors.success\n  },\n  error: {\n    backgroundColor: theme.colors.error\n  },\n  info: {\n    backgroundColor: theme.colors.cobalt\n  },\n  warning: {\n    backgroundColor: theme.colors.danger\n  },\n  icon: {\n    fontSize: 20\n  },\n  iconVariant: {\n    opacity: 0.9,\n    marginRight: theme.spacing(1)\n  },\n  message: {\n    display: 'flex',\n    alignItems: 'center'\n  },\n  alert: {\n    margin: '5px',\n    borderRadius: '4px',\n    boxShadow: `0 4px 6px 0 ${theme.colors.carbon}`\n  },\n  container: {\n    display: 'flex',\n    flexDirection: 'column',\n    position: 'fixed',\n    bottom: '10px',\n    left: '10px',\n    zIndex: '9999'\n  }\n}))\n\nexport default function Alert (props) {\n  const classes = useStyles()\n  const { open, alerts } = props\n\n  return open ? (\n    <div className={classes.container}>\n      {alerts.map((a, idx) => {\n        const handleClick = a.onClose\n        const variantKey = a.type || 'info'\n        const Icon = variantIcon[variantKey]\n        return (\n          <SnackbarContent\n            key={a.key || a.id || idx}\n            className={`${classes[variantKey]} ${classes.alert} ${a.className}`}\n            aria-describedby='client-snackbar'\n            message={\n              <span id='client-snackbar' className={classes.message}>\n                <Icon className={`${classes.icon} ${classes.iconVariant}`} />\n                {a.message}\n              </span>\n            }\n            action={[\n              <IconButton key='close' aria-label='Close' color='inherit' onClick={handleClick}>\n                <CloseIcon className={classes.icon} />\n              </IconButton>\n            ]}\n          />\n        )\n      })}\n    </div>\n  ) : null\n}\n","import React from 'react'\nimport { findIndex } from 'lodash'\nimport Alert from './Alert'\n\nexport const FeedbackContext = React.createContext({\n  feedbacks: [],\n  setFeedbacks: () => {},\n  pushFeedback: () => {}\n})\n\nexport const useFeedback = () => React.useContext(FeedbackContext)\n\nconst AUTO_HIDE = 6000\n\nconst actions = {\n  ADD: 'add',\n  REMOVE: 'remove',\n  SET: 'set'\n}\n\nconst initState = {\n  feedbacks: [],\n  nextId: 0\n}\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case actions.ADD:\n      return {\n        feedbacks: [...state.feedbacks,\n          {\n            ...action.data,\n            timeout: setTimeout(() => {\n              action.dispatch({ type: actions.REMOVE, data: { id: state.nextId } })\n            }, AUTO_HIDE),\n            id: state.nextId\n          }],\n        nextId: state.nextId + 1\n      }\n    case actions.REMOVE: {\n      const idxToRemove = findIndex(state.feedbacks, f => f.id === action.data.id)\n      if (idxToRemove === -1) return state\n      return {\n        ...state,\n        feedbacks: [...state.feedbacks.slice(0, idxToRemove), ...state.feedbacks.slice(idxToRemove + 1)]\n      }\n    }\n    case actions.SET:\n      return {\n        ...state,\n        feedbacks: action.data\n      }\n    default:\n      return state\n  }\n}\n\nexport default function Context (props) {\n  const [state, dispatch] = React.useReducer(reducer, initState)\n  const setFeedbacks = (newFeedbacks) => {\n    console.log(' ---> SetFeedbacks ')\n    dispatch({ type: actions.SET, data: newFeedbacks })\n  }\n  const pushFeedback = (newFeedback) => {\n    console.log(' ---> pushFeedback ')\n    dispatch({ type: actions.ADD, data: newFeedback, dispatch })\n    // Update current feedback array (same array will be used if multiple calls to pushFeedback in the same render loop)\n    state.feedbacks.push(newFeedback)\n  }\n\n  console.log('======> Updating feedback context')\n\n  return (\n    <FeedbackContext.Provider value={{ feedbacks: state.feedbacks, setFeedbacks, pushFeedback }}>\n      {props.children}\n      <FeedbackContext.Consumer>\n        {({ feedbacks, setFeedbacks }) =>\n          <Alert\n            open={!!feedbacks.length}\n            alerts={feedbacks.map((f, idx) => ({\n              ...f,\n              onClose: () => dispatch({ type: actions.REMOVE, data: f })\n            }))}\n          />}\n      </FeedbackContext.Consumer>\n    </FeedbackContext.Provider>\n  )\n}\n","import React, { useEffect } from 'react'\n\nimport controllerJson from './controller.json'\n\nconst initControllerState = (() => {\n  const localUser = window.localStorage.getItem('iofogUser')\n  if (localUser) {\n    controllerJson.user = JSON.parse(localUser)\n  }\n  return {\n    ...controllerJson,\n    api: `${window.location.protocol}//${controllerJson.ip}:${controllerJson.port || 80}/`,\n    location: {\n      lat: 'Unknown',\n      lon: 'Unknown',\n      query: controllerJson.ip\n    },\n    status: {\n      versions: {\n        controller: '',\n        ecnViewer: ''\n      }\n    }\n  }\n})()\n\nconst IPLookUp = 'http://ip-api.com/json/'\n\n// If dev mode, use proxy\n// Otherwise assume you are running on the Controller\nconst getUrl = (path) => controllerJson.dev ? `/api/controllerApi${path}` : `${window.location.protocol}//${[window.location.hostname, controllerJson.port].join(':')}${path}`\nconst getHeaders = (headers, controllerConfig) => controllerJson.dev\n  ? ({\n    ...headers,\n    'ECN-Api-Destination': controllerConfig.api\n  }) : headers\n\nexport const ControllerContext = React.createContext({\n  controller: {\n    status: {}\n  },\n  updateController: () => {}\n})\n\nexport const useController = () => React.useContext(ControllerContext)\n\nconst lookUpControllerInfo = async (controllerConfig) => {\n  if (!controllerConfig.ip) {\n    controllerConfig.ip = window.location.host.split(':')[0] // Get only ip, not port\n  }\n  const localhost = new RegExp('(0\\.0\\.0\\.0|localhost|127\\.0\\.0\\.1|192\\.168\\.)') // eslint-disable-line no-useless-escape\n  const ip = localhost.test(controllerConfig.ip) ? '8.8.8.8' : controllerConfig.ip\n  const response = await window.fetch(IPLookUp + ip)\n  if (response.ok) {\n    return response.json()\n  } else {\n    throw new Error(response.statusText)\n  }\n}\n\nconst getControllerStatus = async (controllerConfig) => {\n  const response = await await window.fetch(getUrl('/api/v3/status'), {\n    headers: getHeaders({}, controllerConfig)\n  })\n  if (response.ok) {\n    return response.json()\n  } else {\n    throw new Error(response.statusText)\n  }\n}\n\nconst updateControllerInfo = async (controllerConfig) => {\n  let ipInfo = {}\n  try {\n    ipInfo = await lookUpControllerInfo(controllerConfig)\n  } catch (e) {\n    ipInfo = {\n      lat: 'Unknown',\n      lon: 'Unknown',\n      query: controllerConfig.ip\n    }\n  }\n\n  return {\n    ...controllerConfig,\n    location: ipInfo,\n    status: await getControllerStatus(controllerConfig)\n  }\n}\n\nconst initState = {\n  controller: initControllerState,\n  token: null\n}\n\nconst actions = {\n  ERROR: 'Error',\n  CLEAN_ERROR: 'Clean error',\n  UPDATE: 'Update',\n  SET_TOKEN: 'Set token'\n}\n\nconst reducer = (state, action) => {\n  console.log({ state, action })\n  const newState = (() => {\n    switch (action.type) {\n      case actions.ERROR:\n        return {\n          ...state,\n          controller: {\n            ...state.controller,\n            error: action.data\n          }\n        }\n      case actions.CLEAN_ERROR:\n        return {\n          ...state,\n          controller: {\n            ...state.controller,\n            error: null\n          }\n        }\n      case actions.UPDATE:\n        return {\n          ...state,\n          controller: {\n            ...state.controller,\n            ...action.data\n          }\n        }\n      case actions.SET_TOKEN:\n        return {\n          ...state,\n          token: action.data,\n          controller: {\n            ...state.controller,\n            error: null\n          }\n        }\n      default:\n        return state\n    }\n  })()\n  newState.controller.dev = controllerJson.dev\n  return newState\n}\n\nexport default function Context (props) {\n  const [state, dispatch] = React.useReducer(reducer, initState)\n  const { token, controller } = state\n\n  const authenticate = async (controllerConfig) => {\n    const response = await window.fetch(getUrl('/api/v3/user/login'), {\n      method: 'POST',\n      headers: getHeaders({\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      }, controllerConfig),\n      body: JSON.stringify(controllerConfig.user)\n    })\n    if (response.ok) {\n      const token = (await response.json()).accessToken\n      dispatch({ type: actions.SET_TOKEN, data: token })\n      return token\n    } else {\n      dispatch({ type: actions.SET_TOKEN, data: null })\n      throw new Error(response.statusText)\n    }\n  }\n\n  // Wrapper around window.fetch to add proxy and authorization headers\n  const request = async (path, options = {}) => {\n    try {\n      let t = token\n      if (!t) {\n        t = await authenticate(controller)\n      }\n      const response = await window.fetch(getUrl(path), {\n        ...options,\n        headers: getHeaders({\n          ...options.headers,\n          Authorization: t\n        }, controller)\n      })\n      if (state.controller.error) {\n        dispatch({ type: actions.CLEAN_ERROR })\n      }\n      return response\n    } catch (err) {\n      dispatch({ type: actions.ERROR, data: err })\n      return ({\n        ok: false,\n        statusText: err.message || 'Could not reach controller'\n      })\n    }\n  }\n\n  const updateController = async (newController) => {\n    if (controllerJson.dev) { newController.api = `http://${newController.ip}:${newController.port || 80}/` }\n    window.localStorage.setItem('iofogUser', JSON.stringify(newController.user))\n    try {\n      await authenticate(newController)\n    } catch (e) {\n      dispatch({ type: actions.ERROR, data: e })\n      dispatch({ type: actions.UPDATE, data: await updateControllerInfo(newController) })\n      throw e\n    }\n    dispatch({ type: actions.UPDATE, data: await updateControllerInfo(newController) })\n  }\n\n  useEffect(() => {\n    const effect = async () => {\n      dispatch({ type: actions.UPDATE, data: await updateControllerInfo(initState.controller) })\n    }\n    effect()\n  }, [])\n\n  return (\n    <ControllerContext.Provider value={{ controller, updateController, request }}>\n      {props.children}\n    </ControllerContext.Provider>\n  )\n}\n","import React from 'react'\n\nimport { Divider, TextField, Grid, Button } from '@material-ui/core'\nimport { FeedbackContext } from '../../Utils/FeedbackContext'\n\nimport { makeStyles } from '@material-ui/styles'\nimport { ControllerContext } from '../../ControllerProvider'\nconst useStyles = makeStyles({\n  divider: {\n    margin: '5px'\n  }\n})\n\nconst initNode = {\n  name: '',\n  ip: '',\n  key: '',\n  port: 54321\n}\n\nconst newError = (message) => ({ message })\n\nexport default function ConnectNode (props) {\n  const classes = useStyles()\n  const [node, setNode] = React.useState({ ...initNode })\n  const { pushFeedback } = React.useContext(FeedbackContext)\n  const { request } = React.useContext(ControllerContext)\n\n  const handleChange = key => (event) => {\n    setNode({ ...node, [key]: event.target.value })\n  }\n\n  const createAgent = async (agent) => {\n    const response = await request('/api/v3/iofog', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(agent)\n    })\n    if (response.ok) {\n      pushFeedback({ message: 'ioFog created!', type: 'success' })\n      const a = await response.json()\n      return a.uuid\n    }\n    throw (newError(`Failed to create iofog: ${response.statusText}`))\n  }\n\n  const getProvisioningKey = async (uuid) => {\n    const response = await request(`/api/v3/iofog/${uuid}/provisioning-key`)\n    if (response.ok) {\n      const a = await response.json()\n      return a.key\n    }\n    throw (newError(`Failed to retrieve provisioning key: ${response.statusText}`))\n  }\n\n  const linkAgent = async (agent, controller) => {\n    const response = await window.fetch('api/agentApi/v2/config', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n        Authorization: agent.key,\n        ioFogApi: `http://${agent.ip}:${agent.port}`\n      },\n      body: JSON.stringify({ 'controller-url': `http://${controller.ip}:${controller.port}/api/v3/` })\n    })\n    if (response.ok) {\n      pushFeedback({ message: 'Agent linked!', type: 'success' })\n      return true\n    }\n    throw (newError(`Failed to link agent: ${response.statusText}`))\n  }\n\n  const provisionAgent = async (agent, key) => {\n    const response = await window.fetch('api/agentApi/v2/provision', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n        Authorization: agent.key,\n        ioFogApi: `http://${agent.ip}:${agent.port}`\n      },\n      body: JSON.stringify({ 'provisioning-key': key })\n    })\n    if (response.ok) {\n      pushFeedback({ message: 'Agent provisioned!', type: 'success' })\n      return true\n    }\n    throw (newError(`Failed to provision agent: ${response.statusText}`))\n  }\n\n  const connect = async () => {\n    try {\n      const iofogUuid = await createAgent({ name: node.name, fogType: 0 })\n      const provisioningKey = await getProvisioningKey(iofogUuid)\n      await linkAgent(node, props.controller)\n      await provisionAgent(node, provisioningKey)\n      pushFeedback({ message: 'Agent connected!', type: 'success' })\n    } catch (e) {\n      pushFeedback({ message: e.message, type: 'error', uuid: 'error' })\n    }\n  }\n\n  return (\n    <>\n      <Grid container spacing={2}>\n        <Grid item xs={12} sm={6}>\n          <TextField\n            id='name'\n            label='Name'\n            onChange={handleChange('name')}\n            value={node.name}\n            fullWidth\n            className={classes.textField}\n            margin='normal'\n          />\n        </Grid>\n        <Grid item xs={6} sm={3}>\n          <TextField\n            id='ip'\n            label='IP'\n            onChange={handleChange('ip')}\n            value={node.ip}\n            fullWidth\n            className={classes.textField}\n            margin='normal'\n          />\n        </Grid>\n        <Grid item xs={6} sm={3}>\n          <TextField\n            id='port'\n            label='Port'\n            onChange={handleChange('port')}\n            value={node.port}\n            fullWidth\n            type='number'\n            className={classes.textField}\n            margin='normal'\n          />\n        </Grid>\n        <Grid item xs={12}>\n          <TextField\n            id='key'\n            label='Authorization key'\n            onChange={handleChange('key')}\n            value={node.key}\n            fullWidth\n            className={classes.textField}\n            margin='normal'\n            helperText='Authorization key can be found in /etc/iofog-agent/local-api file'\n          />\n        </Grid>\n      </Grid>\n      <Divider className={classes.divider} />\n      <Grid container justify='flex-end'>\n        <Grid item>\n          <Button onClick={connect}>\n            Connect\n          </Button>\n        </Grid>\n      </Grid>\n    </>\n  )\n}\n","import React from 'react'\nimport Downshift from 'downshift'\nimport deburr from 'lodash/deburr'\nimport get from 'lodash/get'\nimport { MenuItem, Paper, TextField } from '@material-ui/core'\nimport { makeStyles } from '@material-ui/core/styles'\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1,\n    height: 250\n  },\n  container: {\n    flexGrow: 1,\n    position: 'relative'\n  },\n  paper: {\n    position: 'absolute',\n    zIndex: 1,\n    marginTop: theme.spacing(1),\n    marginBot: theme.spacing(2),\n    left: 0,\n    right: 0,\n    maxHeight: '250px',\n    overflowY: 'scroll'\n  },\n  chip: {\n    margin: theme.spacing(0.5, 0.25)\n  },\n  inputRoot: {\n    flexWrap: 'wrap'\n  },\n  inputInput: {\n    width: 'auto',\n    flexGrow: 1\n  },\n  divider: {\n    height: theme.spacing(2)\n  }\n}))\n\nfunction renderInput (inputProps) {\n  const { InputProps, classes, ref, ...others } = inputProps\n  return (\n    <TextField\n      InputProps={{\n        inputRef: ref,\n        classes: {\n          root: classes.inputRoot,\n          input: classes.inputInput\n        },\n        ...InputProps\n      }}\n      {...others}\n    />\n  )\n}\n\nfunction renderSuggestion (suggestionProps) {\n  const { suggestion, index, itemProps, highlightedIndex, selectedItem } = suggestionProps\n  const isHighlighted = highlightedIndex === index\n  const isSelected = (selectedItem || {}).label === suggestion.label\n\n  return (\n    <MenuItem\n      {...itemProps}\n      key={suggestion.label}\n      selected={isHighlighted}\n      component='div'\n      style={{\n        fontWeight: isSelected ? 500 : 400\n      }}\n    >\n      {suggestion.label}\n    </MenuItem>\n  )\n}\n\nexport default function Autocomplete (props) {\n  const classes = useStyles()\n\n  const getSuggestions = (value, { showEmpty = false } = {}) => {\n    const inputValue = deburr(value.trim()).toLowerCase()\n    const inputLength = inputValue.length\n    let count = 0\n\n    return inputLength === 0 && !showEmpty\n      ? []\n      : props.suggestions.filter(suggestion => {\n        const keep = count < props.maxSuggestions && suggestion.label.toLowerCase().startsWith(inputValue.toLowerCase())\n        if (keep) {\n          count += 1\n        }\n        return keep\n      })\n  }\n\n  return (\n    <Downshift\n      itemToString={item => get(item, 'label', '')}\n      onChange={props.onChange}\n      initialSelectedItem={props.initialSelectedItem}\n      {...(props.selectedItem ? { selectedItem: props.selectedItem } : {})}\n      id='downshift-options'\n    >\n      {({\n        clearSelection,\n        getInputProps,\n        getItemProps,\n        getLabelProps,\n        getMenuProps,\n        highlightedIndex,\n        inputValue,\n        isOpen,\n        openMenu,\n        selectedItem\n      }) => {\n        const { onBlur, onChange, onFocus, ...inputProps } = getInputProps({\n          onChange: event => {\n            if (event.target.value === '') {\n              clearSelection()\n            }\n          },\n          onFocus: openMenu,\n          disabled: props.disabled || false,\n          placeholder: props.placeholder || ''\n        })\n\n        return (\n          <div className={classes.container}>\n            {renderInput({\n              fullWidth: true,\n              classes,\n              label: props.label,\n              InputLabelProps: getLabelProps({ shrink: true }),\n              InputProps: { onBlur, onChange, onFocus },\n              inputProps\n            })}\n\n            <div {...getMenuProps()}>\n              {isOpen ? (\n                <Paper className={classes.paper} square>\n                  {getSuggestions(inputValue, { showEmpty: true }).map((suggestion, index) =>\n                    renderSuggestion({\n                      suggestion,\n                      index,\n                      itemProps: getItemProps({ item: suggestion }),\n                      highlightedIndex,\n                      selectedItem\n                    })\n                  )}\n                </Paper>\n              ) : null}\n            </div>\n          </div>\n        )\n      }}\n    </Downshift>\n  )\n}\n","import React from 'react'\nimport ReactJson from 'react-json-view'\nimport get from 'lodash/get'\n\nimport { Grid, Paper, Typography, TextField, Divider, Select, Input, Button, InputLabel, FormControl, FormControlLabel, Checkbox, MenuItem } from '@material-ui/core'\nimport CloseIcon from '@material-ui/icons/Close'\nimport SwapIcon from '@material-ui/icons/SwapHoriz'\n\nimport Autocomplete from '../../Utils/Autocomplete'\n\nimport { makeStyles } from '@material-ui/styles'\nimport { FeedbackContext } from '../../Utils/FeedbackContext'\nimport { ControllerContext } from '../../ControllerProvider'\n\nconst useStyles = makeStyles({\n  divider: {\n    margin: '5px'\n  },\n  formControl: {\n    width: '100%'\n  },\n  rowIcon: {\n    display: 'flex',\n    justifyContent: 'space-around'\n  },\n  newPaper: {\n    border: '1px solid hsla(0, 0%, 0%, 0.2)',\n    boxShadow: '0 4px 6px 0 hsla(0,0%,0%,0.2)',\n    borderRadius: '4px',\n    padding: '10px',\n    marginTop: '10px'\n  },\n  inputWithIcon: { display: 'flex', alignItems: 'baseline', justifyContent: 'space-between' }\n})\n\nconst ITEM_HEIGHT = 48\nconst ITEM_PADDING_TOP = 8\nconst MenuProps = {\n  PaperProps: {\n    style: {\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n      width: 250\n    }\n  }\n}\n\nconst initMsvc = {\n  flow: {},\n  name: '',\n  catalog: {\n    images: []\n  },\n  volumeMappings: [],\n  ports: [],\n  rootHostAccess: false,\n  _new: true\n}\n\nconst initFlow = {\n  name: '',\n  isActivated: true\n}\n\nconst initCatalogItem = (fogTypeId) => ({\n  name: '',\n  images: [{\n    containerImage: '',\n    fogTypeId\n  }],\n  registryId: 1\n})\n\nconst initRoute = (from) => ({\n  from,\n  to: {}\n})\n\nconst randomString = () => Math.random().toString(36).replace(/[^a-z]+/g, '').substr(0, 5)\n\nconst generateRouteSelect = (current, list, label, onChange) => {\n  const isNewMsvc = get(current, '_new', false)\n  return (\n    <Autocomplete\n      label={label}\n      placeholder='Select a microservice'\n      onChange={onChange}\n      disabled={isNewMsvc}\n      selectedItem={isNewMsvc ? list[list.length - 1] : current}\n      maxSuggestions={20}\n      suggestions={list.filter(e => !isNewMsvc ? !!e.uuid : true).map(m => ({\n        ...m,\n        label: m.name\n      }))}\n    />\n  )\n}\n\nexport default function AddMicroservice (props) {\n  const classes = useStyles()\n  const [flows, setFlows] = React.useState([])\n  const [catalog, setCatalog] = React.useState([])\n  // Due to polling, the component is re-rendering every 3 sec.\n  // To avoid JSON edit popups to be closed every 3 sec,\n  // we need to keep the config and the JSX ReactJson component as ref\n  const config = React.useRef({})\n  const ReactJsonRef = React.useRef(\n    <ReactJson src={config.current} name={false} onAdd={(e) => { config.current = e.updated_src }} onEdit={(e) => { config.current = e.updated_src }} onDelete={(e) => { config.current = e.updated_src }} />\n  )\n  const [msvc, setMsvc] = React.useState(initMsvc)\n  const [newFlow, setNewFlow] = React.useState(initFlow)\n  const [newCatalogItem, setNewCatalogItem] = React.useState(() => initCatalogItem(get(props, 'target.fogTypeId', 1)))\n  const [routes, setRoutes] = React.useState([])\n\n  const agent = props.target\n  const { pushFeedback } = React.useContext(FeedbackContext)\n  const { request } = React.useContext(ControllerContext)\n\n  React.useEffect(() => {\n    Promise.all([(async () => {\n      const flowRaw = await request('/api/v3/flow')\n      if (flowRaw.ok) {\n        const flowsRes = await flowRaw.json()\n        setFlows(flowsRes.flows)\n      }\n    })(), (async () => {\n      const catalogRaw = await request('/api/v3/catalog/microservices')\n      if (catalogRaw.ok) {\n        const catalogRes = await catalogRaw.json()\n        setCatalog(catalogRes.catalogItems.filter(item => {\n          for (const img of item.images) {\n            if (img.fogTypeId === agent.fogTypeId) { return true }\n          }\n          return false\n        })) // TODO: filter per userId\n      }\n    })()])\n  }, [agent.fogTypeId, request])\n\n  const handleChange = (key, setter, prevState) => e => setter({ ...prevState, [key]: e.target.value })\n  const handleMsvcChangeArray = (key, objKey, idx, valueDecorator = x => x) => e => setMsvc({\n    ...msvc,\n    [key]: [\n      ...msvc[key].slice(0, idx),\n      {\n        ...msvc[key][idx],\n        [objKey]: valueDecorator(e.target.value)\n      },\n      ...msvc[key].slice(idx + 1)\n    ]\n  })\n  const getCatalogImage = item => {\n    if (!get(item, 'id', null)) { return 'Select an image' }\n    for (const img of item.images) {\n      if (img.fogTypeId === agent.fogTypeId) { return img.containerImage }\n    }\n    return 'Image not found'\n  }\n\n  const addVolume = () => setMsvc({\n    ...msvc,\n    volumeMappings: [\n      ...msvc.volumeMappings,\n      {\n        hostDestination: '',\n        containerDestination: '',\n        accessMode: 'z'\n      }\n    ]\n  })\n\n  const addPort = () => setMsvc({\n    ...msvc,\n    ports: [\n      ...msvc.ports,\n      {\n        internal: '',\n        external: ''\n      }\n    ]\n  })\n\n  const removeFromArray = (key, idx) => setMsvc({\n    ...msvc,\n    [key]: [...msvc[key].slice(0, idx), ...msvc[key].slice(idx + 1)]\n  })\n\n  const addMsvc = async () => {\n    try {\n      const { name, ports, volumeMappings, rootHostAccess } = msvc\n      const response = await request('/api/v3/microservices', {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          config: JSON.stringify(config.current),\n          name,\n          ports,\n          volumeMappings,\n          rootHostAccess,\n          flowId: msvc.flow.id,\n          iofogUuid: agent.uuid,\n          catalogItemId: msvc.catalog.id\n        })\n      })\n      if (response.ok) {\n        pushFeedback({ message: 'Microservice added!', type: 'success' })\n        const m = await response.json()\n        setMsvc(initMsvc)\n        return m.uuid\n      } else {\n        pushFeedback({ message: response.statusText, type: 'error' })\n      }\n    } catch (e) {\n      pushFeedback({ message: e.message })\n    }\n  }\n\n  const createFlow = async () => {\n    try {\n      const { name } = newFlow\n      const response = await request('/api/v3/flow', {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(newFlow)\n      })\n      if (response.ok) {\n        pushFeedback({ message: 'Flow created!', type: 'success' })\n        setNewFlow(initFlow)\n        const flow = { ...await response.json(), name }\n        setMsvc({ ...msvc, flow })\n        msvc.flow = flow\n        return true\n      } else {\n        pushFeedback({ message: response.statusText, type: 'error' })\n        return false\n      }\n    } catch (e) {\n      pushFeedback({ message: e.message })\n      return false\n    }\n  }\n\n  const createCatalogItem = async () => {\n    try {\n      const catalogItem = {\n        ...newCatalogItem,\n        name: randomString()\n      }\n      const response = await request('/api/v3/catalog/microservices', {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(catalogItem)\n      })\n      if (response.ok) {\n        pushFeedback({ message: 'Image added to catalog!', type: 'success' })\n        setNewCatalogItem(initCatalogItem(agent.fogTypeId))\n        const catalog = { ...await response.json(), ...catalogItem }\n        setMsvc({ ...msvc, catalog })\n        msvc.catalog = catalog\n        return true\n      } else {\n        pushFeedback({ message: response.statusText, type: 'error' })\n        return false\n      }\n    } catch (e) {\n      pushFeedback({ message: e.message })\n      return false\n    }\n  }\n\n  const createRoute = async (route) => {\n    try {\n      const from = get(route, 'from.uuid')\n      const to = get(route, 'to.uuid')\n      const response = await request(`/api/v3/microservices/${from}/routes/${to}`, {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: ''\n      })\n      if (response.ok) {\n        pushFeedback({ message: `Route from ${route.from.name} to ${route.to.name} created !`, type: 'success' })\n        return true\n      } else {\n        pushFeedback({ message: response.statusText, type: 'error' })\n        return false\n      }\n    } catch (e) {\n      pushFeedback({ message: e.message })\n      return false\n    }\n  }\n\n  const createRoutes = async (defaultUuid) => {\n    for (const route of routes) {\n      if (!route.from.uuid) {\n        route.from.uuid = defaultUuid\n      }\n      if (!route.to.uuid) {\n        route.to.uuid = defaultUuid\n      }\n      await createRoute(route)\n    }\n  }\n\n  const createMsvc = async () => {\n    let success = true\n    try {\n      if (msvc.flow.id === -1) {\n        success = await createFlow()\n      }\n      if (success && msvc.catalog.id === -1) {\n        success = await createCatalogItem()\n      }\n      if (success) {\n        const uuid = await addMsvc()\n        await createRoutes(uuid)\n        props.onSuccess()\n      }\n    } catch (e) {\n\n    }\n  }\n\n  const routeList = (props.microservices || [])\n    .map(m => ({\n      ...m,\n      label: m.name\n    }))\n    .concat([{\n      ...msvc,\n      label: msvc.name ? msvc.name : '<New microservice>'\n    }])\n\n  return (\n    <>\n      <Grid container spacing={2}>\n        <Grid item xs={12} sm={6}>\n          <FormControl className={classes.formControl}>\n            <Autocomplete\n              label='Flow'\n              placeholder='Select a flow'\n              onChange={(selected, state) => {\n                handleChange('flow', setMsvc, msvc)({ target: { value: selected || {} } })\n              }}\n              maxSuggestions={20}\n              suggestions={flows.map(f => ({\n                ...f,\n                label: f.name\n              })).concat([{\n                id: -1,\n                label: '+ Add a flow'\n              }])}\n            />\n          </FormControl>\n          {msvc.flow.id === -1 &&\n            <Paper className={classes.newPaper}>\n              <Typography variant='subtitle2'>New flow</Typography>\n              <TextField\n                id='name'\n                label='Name'\n                required\n                onChange={handleChange('name', setNewFlow, newFlow)}\n                value={newFlow.name}\n                fullWidth\n                className={classes.textField}\n                margin='normal'\n              />\n              <FormControlLabel\n                style={{ color: 'rgba(0, 0, 0, 0.54)' }}\n                control={\n                  <Checkbox\n                    checked={newFlow.isActivated}\n                    onChange={e => setNewFlow({ ...newFlow, isActivated: e.target.checked })}\n                    value='checkedB'\n                    color='primary'\n                  />\n                }\n                label='Active'\n              />\n            </Paper>}\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <FormControl className={classes.formControl}>\n            <Autocomplete\n              label='Image'\n              placeholder='Select an image'\n              onChange={(selected, state) => {\n                handleChange('catalog', setMsvc, msvc)({ target: { value: selected || {} } })\n              }}\n              maxSuggestions={20}\n              suggestions={catalog.map(m => ({\n                ...m,\n                label: getCatalogImage(m)\n              })).concat([{\n                id: -1,\n                label: '+ Add an image'\n              }])}\n            />\n          </FormControl>\n          {msvc.catalog.id === -1 &&\n            <Paper className={classes.newPaper}>\n              <Typography variant='subtitle2'>New image</Typography>\n              <TextField\n                id='name'\n                label='Name'\n                required\n                onChange={e => setNewCatalogItem({\n                  ...newCatalogItem,\n                  images: [{\n                    ...newCatalogItem.images[0],\n                    containerImage: e.target.value\n                  }]\n                })}\n                value={newCatalogItem.images[0].containerImage}\n                fullWidth\n                className={classes.textField}\n                margin='normal'\n              />\n            </Paper>}\n        </Grid>\n      </Grid>\n      <Grid container spacing={2}>\n        <Grid item xs={12}>\n          <TextField\n            id='name'\n            label='Name'\n            required\n            onChange={handleChange('name', setMsvc, msvc)}\n            value={msvc.name}\n            fullWidth\n            className={classes.textField}\n            margin='normal'\n          />\n        </Grid>\n      </Grid>\n      <Divider className={classes.divider} />\n      <Grid container spacing={2}>\n        <Grid item xs={12}>\n          <Typography style={{ color: 'rgba(0, 0, 0, 0.54)' }} variant='subtitle1'>Configuration</Typography><br />\n          {ReactJsonRef.current}\n        </Grid>\n      </Grid>\n      <Divider className={classes.divider} />\n      <Grid container spacing={2}>\n        <Grid item xs={12}>\n          <Typography style={{ color: 'rgba(0, 0, 0, 0.54)' }} variant='subtitle1'>Volumes</Typography><br />\n          {msvc.volumeMappings.map((v, idx) =>\n            <Grid container spacing={2} key={idx} style={{ alignItems: 'flex-end' }}>\n              <Grid item xs={11}>\n                <Grid container spacing={2}>\n                  <Grid item xs={12} sm={4}>\n                    <TextField\n                      id='host'\n                      label='Host'\n                      required\n                      onChange={handleMsvcChangeArray('volumeMappings', 'hostDestination', idx)}\n                      value={v.hostDestination}\n                      fullWidth\n                      className={classes.textField}\n                      margin='dense'\n                    />\n                  </Grid>\n                  <Grid item xs={12} sm={4}>\n                    <TextField\n                      id='Container'\n                      label='Container'\n                      required\n                      onChange={handleMsvcChangeArray('volumeMappings', 'containerDestination', idx)}\n                      value={v.containerDestination}\n                      fullWidth\n                      className={classes.textField}\n                      margin='dense'\n                    />\n                  </Grid>\n                  <Grid item xs={12} sm={4}>\n                    <FormControl className={classes.formControl} style={{ marginTop: '5px' }}>\n                      <InputLabel htmlFor='select-flow'>Access mode</InputLabel>\n                      <Select\n                        required\n                        value={v.accessMode}\n                        onChange={handleMsvcChangeArray('volumeMappings', 'accessMode', idx)}\n                        input={<Input id='select-flow-input' />}\n                        MenuProps={MenuProps}\n                      >\n                        <MenuItem value='z'>Z</MenuItem>\n                      </Select>\n                    </FormControl>\n                  </Grid>\n                </Grid>\n              </Grid>\n              <Grid item xs={1} className={classes.rowIcon}>\n                <CloseIcon style={{ cursor: 'pointer' }} onClick={() => removeFromArray('volumeMappings', idx)} />\n              </Grid>\n            </Grid>\n          )}\n          <Typography style={{ color: 'rgba(0, 0, 0, 0.54)', cursor: 'pointer' }} variant='caption' onClick={() => addVolume()}>+ Add</Typography>\n        </Grid>\n      </Grid>\n      <Divider className={classes.divider} />\n      <Grid container spacing={2}>\n        <Grid item xs={12}>\n          <Typography style={{ color: 'rgba(0, 0, 0, 0.54)' }} variant='subtitle1'>Ports</Typography><br />\n          {msvc.ports.map((p, idx) =>\n            <Grid container spacing={2} key={idx} style={{ alignItems: 'flex-end' }}>\n              <Grid item xs={11}>\n                <Grid container spacing={2}>\n                  <Grid item xs={12} sm={6}>\n                    <TextField\n                      id='host'\n                      label='External'\n                      required\n                      type='number'\n                      onChange={handleMsvcChangeArray('ports', 'external', idx, parseInt)}\n                      value={p.external}\n                      fullWidth\n                      className={classes.textField}\n                      margin='dense'\n                    />\n                  </Grid>\n                  <Grid item xs={12} sm={6}>\n                    <TextField\n                      id='Container'\n                      label='Internal'\n                      required\n                      fullWidth\n                      type='number'\n                      onChange={handleMsvcChangeArray('ports', 'internal', idx, parseInt)}\n                      value={p.internal}\n                      className={classes.textField}\n                      margin='dense'\n                    />\n                  </Grid>\n                </Grid>\n              </Grid>\n              <Grid item xs={1} className={classes.rowIcon}>\n                <CloseIcon style={{ cursor: 'pointer' }} onClick={() => removeFromArray('ports', idx)} />\n              </Grid>\n            </Grid>\n          )}\n          <Typography style={{ color: 'rgba(0, 0, 0, 0.54)', cursor: 'pointer' }} variant='caption' onClick={() => addPort()}>+ Add</Typography>\n        </Grid>\n      </Grid>\n      <Divider className={classes.divider} />\n      <Grid container spacing={2}>\n        <Grid item xs={12}>\n          <Typography style={{ color: 'rgba(0, 0, 0, 0.54)' }} variant='subtitle1'>Routes</Typography><br />\n          {routes.map((r, idx) =>\n            <Grid container spacing={2} key={idx} style={{ alignItems: 'flex-end' }}>\n              <Grid item xs={11}>\n                <Grid container spacing={2} style={{ alignItems: 'flex-end' }}>\n                  <Grid item xs={12} sm={5}>\n                    {generateRouteSelect(r.from, routeList, 'From', selected => setRoutes([\n                      ...routes.slice(0, idx),\n                      {\n                        ...r,\n                        from: selected || {}\n                      },\n                      ...routes.slice(idx + 1)\n                    ]))}\n                  </Grid>\n                  <Grid item xs={2} className={classes.rowIcon}>\n                    <SwapIcon\n                      style={{ cursor: 'pointer' }} onClick={() => setRoutes([\n                        ...routes.slice(0, idx),\n                        {\n                          ...r,\n                          from: r.to,\n                          to: r.from\n                        },\n                        ...routes.slice(idx + 1)\n                      ])}\n                    />\n                  </Grid>\n                  <Grid item xs={12} sm={5}>\n                    {generateRouteSelect(r.to, routeList, 'To', selected => setRoutes([\n                      ...routes.slice(0, idx),\n                      {\n                        ...r,\n                        to: selected || {}\n                      },\n                      ...routes.slice(idx + 1)\n                    ]))}\n                  </Grid>\n                </Grid>\n              </Grid>\n              <Grid item xs={1} className={classes.rowIcon}>\n                <CloseIcon style={{ cursor: 'pointer' }} onClick={() => setRoutes([...routes.slice(0, idx), ...routes.slice(idx + 1)])} />\n              </Grid>\n            </Grid>\n          )}\n          <Typography style={{ color: 'rgba(0, 0, 0, 0.54)', cursor: 'pointer' }} variant='caption' onClick={() => setRoutes([...routes, initRoute(msvc)])}>+ Add</Typography>\n        </Grid>\n      </Grid>\n      <Divider className={classes.divider} />\n      <FormControlLabel\n        style={{ color: 'rgba(0, 0, 0, 0.54)' }}\n        control={\n          <Checkbox\n            checked={msvc.rootHostAccess}\n            onChange={e => setMsvc({ ...msvc, rootHostAccess: e.target.checked })}\n            value='checkedB'\n            color='primary'\n          />\n        }\n        label='Root host access'\n      />\n      <Divider className={classes.divider} />\n      <Grid container justify='flex-end'>\n        <Grid item>\n          <Button onClick={createMsvc}>\n            Add\n          </Button>\n        </Grid>\n      </Grid>\n    </>\n  )\n}\n","import React from 'react'\n\nimport { FormControl, Divider, Grid, Button, Input, InputLabel, Select, MenuItem, Checkbox, ListItemText, Chip } from '@material-ui/core'\n\nimport { makeStyles } from '@material-ui/styles'\nimport { FeedbackContext } from '../../Utils/FeedbackContext'\nimport { ControllerContext } from '../../ControllerProvider'\nconst useStyles = makeStyles({\n  chips: {\n    display: 'flex',\n    flexWrap: 'wrap'\n  },\n  chip: {\n    margin: 2\n  },\n  formControl: {\n    width: '100%',\n    marginBottom: '15px'\n  },\n  divider: {\n    margin: '5px'\n  }\n})\n\nconst ITEM_HEIGHT = 48\nconst ITEM_PADDING_TOP = 8\nconst MenuProps = {\n  PaperProps: {\n    style: {\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n      width: 250\n    }\n  }\n}\n\nexport default function RemoveMicroservice (props) {\n  const classes = useStyles()\n  const [msvcsToRemove, setMsvcsToRemove] = React.useState([])\n  const { pushFeedback } = React.useContext(FeedbackContext)\n  const { request } = React.useContext(ControllerContext)\n\n  function handleChange (event) {\n    setMsvcsToRemove(event.target.value)\n  }\n\n  const remove = async () => {\n    try {\n      let success = true\n      for (const uuid of msvcsToRemove) {\n        const res = request(`/api/v3/microservices/${uuid}`, {\n          method: 'DELETE'\n        })\n        if (!res.ok) {\n          success = false\n          pushFeedback({ message: `${msvcsPerUUID[uuid].name}: ${res.statusText}`, type: 'error', uuid })\n        } else {\n          const idx = msvcsToRemove.indexOf(uuid)\n          setMsvcsToRemove([...msvcsToRemove.slice(0, idx), ...msvcsToRemove.slice(idx + 1)])\n        }\n      }\n      if (success) {\n        pushFeedback({ message: 'Microservices removed', type: 'success', uuid: 'success' })\n        props.onSuccess()\n      }\n    } catch (e) {\n      pushFeedback({ message: e.message, type: 'error', uuid: 'error' })\n    }\n  }\n\n  const { msvcs } = props\n\n  const msvcsPerUUID = msvcs.reduce((r, m) => ({\n    ...r,\n    [m.uuid]: m\n  }), {})\n\n  return (\n    <>\n      <FormControl className={classes.formControl}>\n        <InputLabel htmlFor='select-multiple-checkbox'>Microservices to remove</InputLabel>\n        <Select\n          multiple\n          value={msvcsToRemove}\n          onChange={handleChange}\n          input={<Input id='select-multiple-checkbox-rm-msvcs' />}\n          renderValue={selected => (\n            <div className={classes.chips}>\n              {selected.map(uuid => (\n                msvcsPerUUID[uuid] && <Chip key={uuid} label={msvcsPerUUID[uuid].name} className={classes.chip} />\n              ))}\n            </div>\n          )}\n          MenuProps={MenuProps}\n        >\n          {msvcs.map(m => (\n            <MenuItem key={m.uuid} value={m.uuid}>\n              <Checkbox checked={msvcsToRemove.indexOf(m.uuid) > -1} />\n              <ListItemText primary={m.name} />\n            </MenuItem>\n          ))}\n        </Select>\n      </FormControl>\n      <Divider className={classes.divider} />\n      <Grid container justify='flex-end'>\n        <Grid item>\n          <Button onClick={remove}>\n            Remove\n          </Button>\n        </Grid>\n      </Grid>\n    </>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { makeStyles } from '@material-ui/core/styles'\nimport Tabs from '@material-ui/core/Tabs'\nimport Tab from '@material-ui/core/Tab'\nimport Typography from '@material-ui/core/Typography'\n\nfunction TabContainer (props) {\n  return (\n    <Typography component='div' style={{ padding: 8 * 3 }}>\n      {props.children}\n    </Typography>\n  )\n}\n\nTabContainer.propTypes = {\n  children: PropTypes.node.isRequired\n}\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1,\n    backgroundColor: theme.palette.background.paper\n  }\n}))\n\nexport default function SimpleTabs (props) {\n  const classes = useStyles()\n  const [value, setValue] = React.useState(0)\n\n  function handleChange (event, newValue) {\n    setValue(newValue)\n  }\n\n  return (\n    <div className={classes.root}>\n      <Tabs value={value} onChange={handleChange}>\n        {props.children.map((child, idx) => {\n          return (\n            <Tab key={child.id || idx} label={child.props.title} />\n          )\n        })}\n      </Tabs>\n      <TabContainer>{props.children[value]}</TabContainer>\n    </div>\n  )\n}\n","import { get as lget, set as lset } from 'lodash'\nimport React from 'react'\nimport { useController } from '../../ControllerProvider'\nimport { theme } from '../../Theme/ThemeProvider'\n\nexport const ConfigContext = React.createContext()\nexport const useConfig = () => React.useContext(ConfigContext)\n\nconst _initConfig = {\n  tags: {}\n}\n\nconst defaultTagColor = theme.colors.cobalt\n\nconst ecnViewerConfigKey = 'ecn-viewer-config'\n\nexport const ConfigProvider = ({\n  children\n}) => {\n  const { request } = useController()\n  const [config, setConfig] = React.useState(_initConfig)\n\n  const _fetchConfig = async () => {\n    try {\n      const res = await request(`/api/v3/config/${ecnViewerConfigKey}`)\n      if (res.ok) {\n        const { value: stringifiedConfig } = await res.json()\n        setConfig(JSON.parse(stringifiedConfig))\n      }\n    } catch (e) {\n\n    }\n  }\n\n  const saveConfig = async (newConfig) => {\n    const res = await request('/api/v3/config', {\n      method: 'PUT',\n      headers: {\n        'content-type': 'application/json'\n      },\n      body: JSON.stringify({\n        key: ecnViewerConfigKey,\n        value: JSON.stringify(newConfig)\n      })\n    })\n    if (res.ok) {\n      setConfig(newConfig)\n    }\n    return res\n  }\n\n  const getTagDisplayInfo = value => {\n    return { ...lget(config, `tags['${value}']`, { color: defaultTagColor }), value }\n  }\n\n  const updateTags = (agents = []) => {\n    let updated = false\n    for (const agent of agents) {\n      if (agent.tags) {\n        for (const tag of agent.tags) {\n          if (!lget(config, `tags['${tag}']`)) {\n            updated = true\n            lset(config, `tags['${tag}']`, { icon: '', color: defaultTagColor })\n          }\n        }\n      }\n    }\n    if (updated) {\n      setConfig(config)\n    }\n  }\n\n  React.useEffect(() => {\n    _fetchConfig()\n  }, [])\n\n  const isDebug = window.location.search.includes('debug=true')\n  return (\n    <ConfigContext.Provider\n      value={{\n        isDebug,\n        editConfig: setConfig,\n        updateTags,\n        getTagDisplayInfo,\n        saveConfig,\n        config\n      }}\n    >\n      {children}\n    </ConfigContext.Provider>\n  )\n}\n","import React from 'react'\nimport ReactJson from 'react-json-view'\nimport Skeleton from 'react-loading-skeleton'\n\nimport { List, ListItem, ListSubheader, ListItemAvatar, Chip, Avatar, ListItemText, Menu, MenuItem } from '@material-ui/core'\n\nimport MoreIcon from '@material-ui/icons/MoreVert'\nimport MemoryIcon from '@material-ui/icons/Memory'\n\nimport { makeStyles } from '@material-ui/styles'\n\nimport { statusColor, msvcStatusColor, tagColor } from '../utils'\nimport Modal from '../../Utils/Modal'\n\nimport ConnectNode from './ConnectNode'\nimport AddMicroservice from './AddMicroservice'\nimport RemoveMicroservice from './RemoveMicroservice'\nimport SimpleTabs from '../../Utils/Tabs'\nimport Icon from '@material-ui/core/Icon'\nimport { useConfig } from '../../providers/Config'\n\nconst useStyles = makeStyles(theme => ({\n  avatarList: {\n    color: 'white',\n    backgroundColor: 'var(--statusColor, white)',\n    boxShadow: `0px 2px 2px ${theme.colors.carbon}`\n  },\n  msvcChipList: {\n    display: 'flex',\n    flexDirection: 'column',\n    width: '20%',\n    flex: '1',\n    paddingRight: '15px'\n  },\n  msvcChip: {\n    marginTop: 'var(--mTop, 0px)',\n    backgroundColor: `var(--color, ${theme.colors.cobalt})`,\n    fontSize: '10px',\n    borderRadius: '5px',\n    height: '20px',\n    margin: '2px',\n    width: '100px',\n    color: 'white',\n    '& .MuiChip-label': {\n      textOverflow: 'ellipsis',\n      whiteSpace: 'nowrap',\n      overflow: 'hidden',\n      display: 'block'\n    }\n  },\n  jsonDisplay: {\n    width: '99%',\n    minHeight: '30rem',\n    fontFamily: '\"Lucida Console\", Monaco, monospace',\n    fontSize: '0.8rem',\n    lineHeight: '1.2'\n  },\n  listTitle: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'baseline',\n    color: theme.palette.text.primary\n  },\n  link: {\n    color: theme.palette.text.secondary,\n    cursor: 'pointer',\n    '&:hover': {\n      textDecoration: 'underline'\n    }\n  }\n}))\n\nconst TagChip = ({ tag, first }) => {\n  const classes = useStyles()\n  if (!tag.icon) {\n    return (\n      <Chip\n        size='small'\n        label={tag.value}\n        style={{\n          '--mTop': first ? '0px' : '2px',\n          '--color': tag.color || tagColor,\n          color: 'white'\n        }}\n        className={classes.msvcChip}\n        title={tag.value}\n      />)\n  }\n  return (\n    <Chip\n      icon={<Icon style={{ fontSize: 16, color: 'white' }}>{tag.icon}</Icon>}\n      size='small'\n      label={tag.value}\n      style={{\n        '--mTop': first ? '0px' : '2px',\n        '--color': tag.color || tagColor,\n        color: 'white'\n      }}\n      className={classes.msvcChip}\n      title={tag.value}\n    />\n  )\n}\n\nexport default function AgentList (props) {\n  const classes = useStyles()\n  const { getTagDisplayInfo } = useConfig()\n  const [openDetailsModal, setOpenDetailsModal] = React.useState(false)\n  const [openConnectNodeModal, setOpenConnectNodeModal] = React.useState(false)\n  const [openAddMicroserviceModal, setOpenAddMicroserviceModal] = React.useState(false)\n  const [openRemoveMicroserviceModal, setOpenRemoveMicroserviceModal] = React.useState(false)\n  const [menuAnchorEl, setMenuAnchorEl] = React.useState(null)\n  const { msvcsPerAgent, msvcs, agents, agent, setAgent, setAutozoom, loading } = props\n\n  const handleCloseMenu = () => setMenuAnchorEl(null)\n  const openMenu = (e) => setMenuAnchorEl(e.currentTarget)\n  const openDetails = () => {\n    setOpenDetailsModal(true)\n    handleCloseMenu()\n  }\n  // const openAddMicroservice = () => {\n  //   setOpenAddMicroserviceModal(true)\n  //   handleCloseMenu()\n  // }\n  // const openRemoveMicroservice = () => {\n  //   setOpenRemoveMicroserviceModal(true)\n  //   handleCloseMenu()\n  // }\n\n  return (\n    <>\n      <List\n        subheader={\n          <ListSubheader component='div' id='agent-list-subheader' style={{ position: 'relative', marginBottom: '5px' }} disableGutters disableSticky>\n            <div className={classes.listTitle}>\n              <div>\n                {/* <Typography variant='h5'><small>{loading ? 0 : agents.length} nodes</small></Typography> */}\n              </div>\n              <div>\n                <small className={classes.link} onClick={() => setAutozoom(true)}>See all ECN</small>\n              </div>\n            </div>\n          </ListSubheader>\n        }\n      >\n        {(loading ? [1, 2, 3].map((idx) => <ListItem key={idx}><ListItemText><Skeleton height={72} /></ListItemText></ListItem>) : agents.map(a => {\n          const msvcs = msvcsPerAgent[a.uuid] || []\n          const tags = (a.tags || []).map(getTagDisplayInfo)\n          return (\n            <ListItem button key={a.uuid} onClick={() => setAgent(a)} selected={a.uuid === agent.uuid}>\n              <ListItemAvatar>\n                <Avatar style={{ '--statusColor': statusColor[a.daemonStatus] }} className={classes.avatarList}>\n                  <MemoryIcon />\n                </Avatar>\n              </ListItemAvatar>\n              <ListItemText primary={a.name} secondary={`${msvcs.length} Microservices`} />\n              <div className={classes.msvcChipList}>\n                {tags.map((t, idx) => (\n                  <TagChip key={t.value} tag={t} first={!idx} />\n                ))}\n              </div>\n              <div className={classes.msvcChipList}>\n                {msvcs.length > 4\n                  ? (\n                    <Chip\n                      size='small'\n                      label={`${msvcs.length} microservices`}\n                      style={{\n                        '--mTop': '0px',\n                        '--color': msvcStatusColor[(a.daemonStatus === 'RUNNING') ? 'RUNNING' : 'UNKNOWN']\n                      }}\n                      className={classes.msvcChip}\n                      title={`${msvcs.length} microservices`}\n                    />\n                  )\n                  : msvcs.map((m, idx) => (\n                    <React.Fragment key={m.uuid}>\n                      <Chip\n                        size='small'\n                        label={m.name}\n                        style={{\n                          '--mTop': idx ? '2px' : '0px',\n                          '--color': msvcStatusColor[(a.daemonStatus === 'RUNNING' && m.status.status === 'RUNNING' && m.flowActive) ? 'RUNNING' : 'UNKNOWN']\n                        }}\n                        className={classes.msvcChip}\n                        title={m.name}\n                      />\n                    </React.Fragment>\n                  ))}\n              </div>\n              <MoreIcon onClick={openMenu} />\n            </ListItem>\n          )\n        }))}\n      </List>\n      <Modal\n        {...{\n          open: openDetailsModal,\n          title: `${agent.name} details`,\n          onClose: () => setOpenDetailsModal(false)\n        }}\n      >\n        <SimpleTabs>\n          <ReactJson title='Agent' src={agent} name={false} />\n          <ReactJson title='Microservices' src={msvcsPerAgent[agent.uuid]} name={false} />\n        </SimpleTabs>\n      </Modal>\n      <Modal\n        {...{\n          open: openAddMicroserviceModal,\n          title: `Deploy microservice to ${agent.name}`,\n          onClose: () => setOpenAddMicroserviceModal(false)\n        }}\n      >\n        <AddMicroservice {...{\n          target: agent,\n          microservices: msvcs,\n          onSuccess: () => setOpenAddMicroserviceModal(false)\n        }}\n        />\n      </Modal>\n      <Modal\n        {...{\n          open: openRemoveMicroserviceModal,\n          title: `Remove microservice from ${agent.name}`,\n          onClose: () => setOpenRemoveMicroserviceModal(false)\n        }}\n      >\n        <RemoveMicroservice\n          {...{\n            target: agent,\n            msvcs: msvcsPerAgent[agent.uuid] || [],\n            onSuccess: () => setOpenRemoveMicroserviceModal(false)\n          }}\n        />\n      </Modal>\n      <Modal\n        {...{\n          open: openConnectNodeModal,\n          title: 'Connect agent',\n          onClose: () => setOpenConnectNodeModal(false)\n        }}\n      >\n        <ConnectNode\n          {...{\n            controller: props.controller,\n            onSuccess: () => setOpenConnectNodeModal(false)\n          }}\n        />\n      </Modal>\n      <Menu\n        id='agent-menu'\n        anchorEl={menuAnchorEl}\n        keepMounted\n        open={Boolean(menuAnchorEl)}\n        onClose={handleCloseMenu}\n      >\n        <MenuItem onClick={openDetails}>Details</MenuItem>\n        {/* <Divider />\n        <MenuItem onClick={openAddMicroservice}>Add microservice</MenuItem>\n        <MenuItem onClick={openRemoveMicroservice}>Remove microservice</MenuItem> */}\n      </Menu>\n    </>\n  )\n}\n","import React from 'react'\nimport { useDrop } from 'react-dnd'\nimport { NativeTypes } from 'react-dnd-html5-backend'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { CircularProgress } from '@material-ui/core'\n\nconst { FILE } = NativeTypes\n\nconst useStyles = makeStyles(theme => ({\n  dropZone: {\n    width: '100%',\n    border: '1px dashed',\n    height: '50px',\n    // padding: '1rem',\n    textAlign: 'center',\n    verticalAlign: 'center',\n    borderRadius: '4px',\n    background: 'aliceblue',\n    color: theme.colors.carbon,\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'center',\n    alignItems: 'center'\n  },\n  active: {\n    backgroundColor: '#d8dfe5'\n    // border: '1px solid'\n  }\n}))\n\nexport default function FileDrop (props) {\n  const classes = useStyles()\n  const [collectedProps, drop] = useDrop({\n    accept: FILE,\n    drop: props.onDrop,\n    collect: (monitor) => ({\n      highlighted: monitor.canDrop(),\n      hovered: monitor.isOver()\n    })\n  })\n\n  const active = collectedProps.hovered && collectedProps.highlighted\n  const className = [\n    classes.dropZone,\n    (collectedProps.hovered ? classes.hovered : ''),\n    (collectedProps.highlighted ? classes.highlighted : ''),\n    (active ? classes.active : '')\n  ].join(' ')\n\n  return props.loading\n    ? (\n      <div className={className}><CircularProgress size={24} /></div>\n    )\n    : (\n      <div className={className} ref={drop}>\n        {active ? 'Release to drop' : props.children}\n      </div>\n    )\n}\n","export const API_VERSIONS = ['iofog.org/v1', 'iofog.org/v2']\nexport default {\n  API_VERSIONS\n}\n","import React from 'react'\nimport { isFinite, get } from 'lodash'\nimport { fitBounds } from 'google-map-react/utils'\n\nimport mapStyle from './mapStyle.json'\n\nexport const MapContext = React.createContext()\nexport const useMap = () => React.useContext(MapContext)\n\nconst hasValidCoordinates = (coordinates) => {\n  return isFinite(coordinates[0]) && isFinite(coordinates[1])\n}\n\nexport const MapProvider = ({\n  children\n}) => {\n  const mapRef = React.useRef()\n  const [map, _setMap] = React.useState({\n    center: [0, 0],\n    zoom: 15,\n    options: {\n      styles: mapStyle\n    }\n  })\n\n  const setMap = (agents, controllerInfo, includeController) => {\n    const newMap = {}\n    const bounds = new window.google.maps.LatLngBounds() // need handler incase `google` not yet available\n\n    const validAgents = agents.filter(a => hasValidCoordinates([a.latitude, a.longitude]))\n    console.log({ agents, validAgents })\n\n    if (!validAgents.length) {\n      newMap.center = [get(controllerInfo, 'location.lat', 0), get(controllerInfo, 'location.lon', 0)]\n      newMap.zoom = 9\n      _setMap({ ...map, ...newMap })\n      return\n    } else if (validAgents.length === 1 && !includeController) {\n      newMap.center = [get(validAgents[0], 'latitude', 0), get(validAgents[0], 'longitude', 0)]\n      newMap.zoom = 9\n      _setMap({ ...map, ...newMap })\n      return\n    }\n\n    validAgents.forEach(marker => {\n      bounds.extend(new window.google.maps.LatLng(get(marker, 'latitude', 0), get(marker, 'longitude', 0)))\n    })\n\n    if (includeController) {\n      bounds.extend(new window.google.maps.LatLng(get(controllerInfo, 'location.lat', 0), get(controllerInfo, 'location.lon', 0)))\n    }\n\n    const newBounds = {\n      ne: {\n        lat: bounds.getNorthEast().lat(),\n        lng: bounds.getNorthEast().lng()\n      },\n      sw: {\n        lat: bounds.getSouthWest().lat(),\n        lng: bounds.getSouthWest().lng()\n      }\n    }\n\n    const size = {\n      width: get(mapRef, 'current.offsetWidth', 600),\n      height: get(mapRef, 'current.offsetHeight', 800)\n    }\n\n    const { center, zoom } = fitBounds(newBounds, size)\n    newMap.center = center\n    newMap.zoom = zoom\n    _setMap({ ...map, ...newMap })\n  }\n\n  return (\n    <MapContext.Provider\n      value={{\n        map,\n        mapRef,\n        hasValidCoordinates,\n        setMap\n      }}\n    >\n      {children}\n    </MapContext.Provider>\n  )\n}\n","import React from 'react'\nimport ReactJson from 'react-json-view'\nimport Skeleton from 'react-loading-skeleton'\nimport yaml from 'js-yaml'\n\nimport { List, ListItem, ListSubheader, Divider, ListItemAvatar, Chip, Avatar, ListItemText, Menu, MenuItem, Dialog, DialogContent, DialogActions, DialogTitle, DialogContentText, Button } from '@material-ui/core'\n\nimport MoreIcon from '@material-ui/icons/MoreVert'\nimport AppsIcon from '@material-ui/icons/ViewQuilt'\n\nimport { makeStyles } from '@material-ui/styles'\n\nimport { statusColor, msvcStatusColor, tagColor } from '../utils'\nimport Modal from '../../Utils/Modal'\nimport FileDrop from '../../Utils/FileDrop'\nimport { API_VERSIONS } from '../../Utils/constants'\n\nimport Icon from '@material-ui/core/Icon'\nimport { useConfig } from '../../providers/Config'\nimport { useMap } from '../../providers/Map'\nimport { useController } from '../../ControllerProvider'\nimport { useFeedback } from '../../Utils/FeedbackContext'\nimport { get as lget, uniqBy } from 'lodash'\n\nconst useStyles = makeStyles(theme => ({\n  avatarList: {\n    color: 'white',\n    backgroundColor: 'var(--statusColor, white)',\n    boxShadow: `0px 2px 2px ${theme.colors.carbon}`\n  },\n  msvcChipList: {\n    display: 'flex',\n    flexDirection: 'column',\n    width: '20%',\n    flex: '1',\n    paddingRight: '15px'\n  },\n  msvcChip: {\n    marginTop: 'var(--mTop, 0px)',\n    backgroundColor: `var(--color, ${theme.colors.cobalt})`,\n    fontSize: '10px',\n    borderRadius: '5px',\n    height: '20px',\n    margin: '2px',\n    width: '100px',\n    color: 'white',\n    '& .MuiChip-label': {\n      textOverflow: 'ellipsis',\n      whiteSpace: 'nowrap',\n      overflow: 'hidden',\n      display: 'block'\n    }\n  },\n  jsonDisplay: {\n    width: '99%',\n    minHeight: '30rem',\n    fontFamily: '\"Lucida Console\", Monaco, monospace',\n    fontSize: '0.8rem',\n    lineHeight: '1.2'\n  },\n  listTitle: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'baseline',\n    height: '50px',\n    color: theme.palette.text.primary\n  },\n  link: {\n    color: theme.palette.text.secondary,\n    cursor: 'pointer',\n    '&:hover': {\n      textDecoration: 'underline'\n    }\n  }\n}))\n\nconst TagChip = ({ tag, first }) => {\n  const classes = useStyles()\n  if (!tag.icon) {\n    return (\n      <Chip\n        size='small'\n        label={tag.value}\n        style={{\n          '--mTop': first ? '0px' : '2px',\n          '--color': tag.color || tagColor,\n          color: 'white'\n        }}\n        className={classes.msvcChip}\n        title={tag.value}\n      />)\n  }\n  return (\n    <Chip\n      icon={<Icon style={{ fontSize: 16, color: 'white' }}>{tag.icon}</Icon>}\n      size='small'\n      label={tag.value}\n      style={{\n        '--mTop': first ? '0px' : '2px',\n        '--color': tag.color || tagColor,\n        color: 'white'\n      }}\n      className={classes.msvcChip}\n      title={tag.value}\n    />\n  )\n}\n\nexport default function ApplicationList ({ applications, loading, setAutozoom, agents, controllerInfo }) {\n  const classes = useStyles()\n  const { getTagDisplayInfo } = useConfig()\n  const { request } = useController()\n  const { setMap } = useMap()\n  const { pushFeedback } = useFeedback()\n  const [fileParsing, setFileParsing] = React.useState(false)\n  const [openDetailsModal, setOpenDetailsModal] = React.useState(false)\n  const [openStartStopModal, setOpenStartStopModal] = React.useState(false)\n  const [openDeleteApplicationModal, setOpenDeleteApplicationModal] = React.useState(false)\n  const [menuAnchorEl, setMenuAnchorEl] = React.useState(null)\n  const [application, setApplication] = React.useState(applications[0] || {})\n  const [agentsByName, setAgentsByName] = React.useState((agents || {}).reduce((res, agent) => { res[agent.name] = agent; return res }, {}))\n  const [agentsByUUID, setAgentsByUUID] = React.useState((agents || {}).reduce((res, agent) => { res[agent.uuid] = agent; return res }, {}))\n\n  React.useEffect(() => {\n    const reduced = (agents || []).reduce((res, agent) => { res.byName[agent.name] = agent; res.byUUID[agent.uuid] = agent; return res }, {\n      byName: {},\n      byUUID: {}\n    })\n    setAgentsByName(reduced.byName)\n    setAgentsByUUID(reduced.byUUID)\n  }, [agents])\n\n  const handleCloseMenu = () => setMenuAnchorEl(null)\n  const openMenu = (e) => setMenuAnchorEl(e.currentTarget)\n  const openDetails = () => {\n    setOpenDetailsModal(true)\n    handleCloseMenu()\n  }\n  const openStartStop = () => {\n    setOpenStartStopModal(true)\n    handleCloseMenu()\n  }\n  const openDeleteApplication = () => {\n    setOpenDeleteApplicationModal(true)\n    handleCloseMenu()\n  }\n\n  const toggleApplication = async (application) => {\n    try {\n      const res = await request(`/api/v3/application/${application.name}`, {\n        method: 'PATCH',\n        headers: {\n          'content-type': 'application/json'\n        },\n        body: JSON.stringify({ isActivated: !application.isActivated })\n      })\n      if (res.ok) {\n        pushFeedback({ message: application.isActivated ? 'Application stopped!' : 'Application started!', type: 'success' })\n        setOpenStartStopModal(false)\n      } else {\n        pushFeedback({ message: res.statusText, type: 'error' })\n      }\n    } catch (e) {\n      pushFeedback({ message: e.message, type: 'error' })\n    }\n  }\n\n  const deleteApplication = async (application) => {\n    try {\n      const res = await request(`/api/v3/application/${application.name}`, {\n        method: 'DELETE'\n      })\n      if (res.ok) {\n        pushFeedback({ message: 'Application deleted!', type: 'success' })\n        setOpenDeleteApplicationModal(false)\n      } else {\n        pushFeedback({ message: res.statusText, type: 'error' })\n      }\n    } catch (e) {\n      pushFeedback({ message: e.message, type: 'error' })\n    }\n  }\n\n  const mapImages = (images) => {\n    const imgs = []\n    if (images.x86) {\n      imgs.push({\n        fogTypeId: 1,\n        containerImage: images.x86\n      })\n    }\n    if (images.arm) {\n      imgs.push({\n        fogTypeId: 2,\n        containerImage: images.arm\n      })\n    }\n    return imgs\n  }\n\n  const parseMicroserviceImages = async (fileImages) => {\n    if (fileImages.catalogId) {\n      return { registryId: undefined, images: undefined, catalogItemId: fileImages.catalogId }\n    }\n    const registryByName = {\n      remote: 1,\n      local: 2\n    }\n    const images = mapImages(fileImages)\n    const registryId = fileImages.registry ? registryByName[fileImages.registry] || window.parseInt(fileImages.registry) : 1\n    return { registryId, catalogItemId: undefined, images }\n  }\n\n  const _deleteUndefinedFields = (obj) => Object.keys(obj).forEach(key => obj[key] === undefined && delete obj[key])\n\n  const parseMicroservice = async (microservice) => {\n    const { registryId, catalogItemId, images } = await parseMicroserviceImages(microservice.images)\n    const microserviceData = {\n      config: microservice.config ? JSON.stringify(microservice.config) : undefined,\n      name: microservice.name,\n      logSize: microservice.logSize,\n      catalogItemId,\n      iofogUuid: agentsByName[microservice.agent.name].uuid,\n      registryId,\n      ...microservice.container,\n      ports: lget(microservice, 'container.ports', []).map(p => ({ ...p, publicPort: p.public })),\n      volumeMappings: lget(microservice, 'container.volumes', []),\n      cmd: lget(microservice, 'container.commands', []),\n      env: lget(microservice, 'container.env', []),\n      images,\n      extraHosts: lget(microservice, 'container.extraHosts', [])\n    }\n    _deleteUndefinedFields(microserviceData)\n    return microserviceData\n  }\n\n  const parseApplicationFile = async (doc) => {\n    if (API_VERSIONS.indexOf(doc.apiVersion) === -1) {\n      return [{}, `Invalid API Version ${doc.apiVersion}, current version is ${API_VERSIONS.slice(-1)[0]}`]\n    }\n    if (doc.kind !== 'Application') {\n      return [{}, `Invalid kind ${doc.kind}`]\n    }\n    if (!doc.metadata || !doc.spec) {\n      return [{}, 'Invalid YAML format']\n    }\n    const application = {\n      name: lget(doc, 'metadata.name', undefined),\n      ...doc.spec,\n      isActivated: true,\n      microservices: await Promise.all((doc.spec.microservices || []).map(async m => parseMicroservice(m)))\n    }\n\n    return [application]\n  }\n\n  const deployApplication = async (application, newApplication) => {\n    const url = `/api/v3/application${newApplication ? '' : `/${application.name}`}`\n    try {\n      const res = await request(url, {\n        method: newApplication ? 'POST' : 'PUT',\n        headers: {\n          'content-type': 'application/json'\n        },\n        body: JSON.stringify(application)\n      })\n      return res\n    } catch (e) {\n      pushFeedback({ message: e.message, type: 'error' })\n    }\n  }\n\n  const readApplicationFile = async (item) => {\n    setFileParsing(true)\n    const file = item.files[0]\n    if (file) {\n      const reader = new window.FileReader()\n\n      reader.onload = async function (evt) {\n        try {\n          const doc = yaml.safeLoad(evt.target.result)\n          console.log({ doc })\n          const [applicationData, err] = await parseApplicationFile(doc)\n          if (err) {\n            setFileParsing(false)\n            return pushFeedback({ message: err, type: 'error' })\n          }\n          const newApplication = !applications.find(a => a.name === applicationData.name)\n          const res = await deployApplication(applicationData, newApplication)\n          if (!res.ok) {\n            try {\n              const error = await res.json()\n              pushFeedback({ message: error.message, type: 'error' })\n            } catch (e) {\n              pushFeedback({ message: res.statusText, type: 'error' })\n            }\n          } else {\n            pushFeedback({ message: newApplication ? 'Application deployed!' : 'Application updated!', type: 'success' })\n          }\n          setFileParsing(false)\n        } catch (e) {\n          pushFeedback({ message: e.message, type: 'error' })\n          setFileParsing(false)\n        }\n      }\n\n      reader.onerror = function (evt) {\n        pushFeedback({ message: evt, type: 'error' })\n        setFileParsing(false)\n      }\n\n      reader.readAsText(file, 'UTF-8')\n    }\n  }\n\n  const selectApplication = (application) => {\n    setApplication(application)\n    setMap(uniqBy(application.microservices.map(m => agentsByUUID[m.iofogUuid]), a => a.uuid), null, false)\n  }\n\n  return (\n    <>\n      <List\n        subheader={\n          <ListSubheader component='div' id='agent-list-subheader' style={{ position: 'relative', marginBottom: '5px' }} disableGutters disableSticky>\n            <div className={classes.listTitle}>\n              <FileDrop {...{ onDrop: readApplicationFile, loading: fileParsing }}>\n                <div className={classes.flexColumn}>\n                  <span>Drag a file here to deploy an application</span>\n                </div>\n              </FileDrop>\n            </div>\n          </ListSubheader>\n        }\n      >\n        {(loading ? [1, 2, 3].map((idx) => <ListItem key={idx}><ListItemText><Skeleton height={72} /></ListItemText></ListItem>) : applications.map(a => {\n          const msvcs = a.microservices || []\n          const tags = (a.tags || []).map(getTagDisplayInfo)\n          return (\n            <ListItem button key={a.id} onClick={() => selectApplication(a)} selected={a.id === application.id}>\n              <ListItemAvatar>\n                <Avatar style={{ '--statusColor': statusColor[a.isActivated ? 'RUNNING' : 'OFFLINE'] }} className={classes.avatarList}>\n                  <AppsIcon />\n                </Avatar>\n              </ListItemAvatar>\n              <ListItemText style={{ width: '100px', textOverflow: 'ellipsis' }} primary={a.name} secondary={`${msvcs.length} Microservices`} />\n              <div className={classes.msvcChipList}>\n                {tags.map((t, idx) => (\n                  <TagChip key={t.value} tag={t} first={!idx} />\n                ))}\n              </div>\n              <div className={classes.msvcChipList}>\n                {msvcs.length > 4\n                  ? (\n                    <Chip\n                      size='small'\n                      label={`${msvcs.length} microservices`}\n                      style={{\n                        '--mTop': '0px',\n                        '--color': msvcStatusColor[a.isActivated ? 'RUNNING' : 'UNKNOWN']\n                      }}\n                      className={classes.msvcChip}\n                      title={`${msvcs.length} microservices`}\n                    />\n                  )\n                  : msvcs.map((m, idx) => (\n                    <React.Fragment key={m.uuid}>\n                      <Chip\n                        size='small'\n                        label={m.name}\n                        style={{\n                          '--mTop': idx ? '2px' : '0px',\n                          '--color': msvcStatusColor[a.isActivated && m.status.status === 'RUNNING' ? 'RUNNING' : 'UNKNOWN']\n                        }}\n                        className={classes.msvcChip}\n                        title={m.name}\n                      />\n                    </React.Fragment>\n                  ))}\n              </div>\n              <MoreIcon onClick={openMenu} />\n            </ListItem>\n          )\n        }))}\n      </List>\n      <Modal\n        {...{\n          open: openDetailsModal,\n          title: `${application.name} details`,\n          onClose: () => setOpenDetailsModal(false)\n        }}\n      >\n        <ReactJson title='Application' src={application} name={false} />\n      </Modal>\n      <Dialog\n        open={openStartStopModal}\n        onClose={() => setOpenStartStopModal(false)}\n      >\n        <DialogTitle id='alert-dialog-title'>{`${application.isActivated ? 'Stop' : 'Start'} ${application.name}?`}</DialogTitle>\n        <DialogContent>\n          <DialogContentText id='alert-dialog-description'>\n            {application.isActivated ? 'Stopping an application will stop all its microservices' : 'Starting an application will start all its microservices'}\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setOpenStartStopModal(false)} color='primary'>\n            Cancel\n          </Button>\n          <Button onClick={() => toggleApplication(application)} color='primary' autoFocus>\n            {application.isActivated ? 'Stop' : 'Start'}\n          </Button>\n        </DialogActions>\n      </Dialog>\n      <Dialog\n        open={openDeleteApplicationModal}\n        onClose={() => setOpenDeleteApplicationModal(false)}\n      >\n        <DialogTitle id='alert-dialog-title'>Delete {application.name}?</DialogTitle>\n        <DialogContent>\n          <DialogContentText id='alert-dialog-description'>\n            <span>Deleting an application will delete all its microservices.</span><br />\n            <span>This is not reversible.</span>\n          </DialogContentText>\n        </DialogContent>\n        <DialogActions>\n          <Button onClick={() => setOpenDeleteApplicationModal(false)} color='primary'>\n            Cancel\n          </Button>\n          <Button onClick={() => deleteApplication(application)} color='primary' autoFocus>\n            Delete\n          </Button>\n        </DialogActions>\n      </Dialog>\n      <Menu\n        id='agent-menu'\n        anchorEl={menuAnchorEl}\n        keepMounted\n        open={Boolean(menuAnchorEl)}\n        onClose={handleCloseMenu}\n      >\n        <MenuItem onClick={openDetails}>Details</MenuItem>\n        <Divider />\n        <MenuItem onClick={openStartStop}>{`${application.isActivated ? 'Stop' : 'Start'}`}</MenuItem>\n        <MenuItem onClick={openDeleteApplication}>Delete</MenuItem>\n      </Menu>\n    </>\n  )\n}\n","import React from 'react'\n\nimport GoogleMapReact from 'google-map-react'\n\nimport { Badge, Avatar } from '@material-ui/core'\n\nimport MemoryIcon from '@material-ui/icons/Memory'\nimport CtrlIcon from '@material-ui/icons/DeveloperBoard'\nimport Icon from '@material-ui/core/Icon'\n\nimport { makeStyles, useTheme } from '@material-ui/styles'\n\nimport { statusColor, msvcStatusColor, tagColor } from './utils'\nimport { useConfig } from '../providers/Config'\nimport { useMap } from '../providers/Map'\n\nconst useStyles = makeStyles(theme => ({\n  mapMarkerTransform: {\n    transform: 'translate(-50%, -100%)',\n    position: 'absolute'\n  },\n  msvcBadge: {\n    '& .MuiBadge-badge': {\n      backgroundColor: `var(--color, ${theme.colors.cobalt})`\n    }\n  },\n  mapMarker: {\n    backgroundColor: `var(--markerColor, ${theme.colors.success})`,\n    borderRadius: '50% 50% 50% 0 !important',\n    border: `2px solid var(--markerColor, ${theme.colors.success})`,\n    transform: 'rotate(-45deg)',\n    '& .MuiSvgIcon-root': {\n      transform: 'rotate(-45deg)'\n    }\n  },\n  mapWrapper: {\n    boxShadow: '0px 1px 3px 0px rgba(0,0,0,0.2), 0px 1px 1px 0px rgba(0,0,0,0.14), 0px 2px 1px -1px rgba(0,0,0,0.12)',\n    borderRadius: '4px',\n    width: '100%',\n    height: '100%',\n    maxHeight: '700px',\n    position: 'sticky',\n    top: '25px',\n    borderColor: theme.colors.aluminium,\n    '& div': {\n      borderRadius: '4px',\n      '& div': {\n        borderRadius: '4px'\n      }\n    }\n  }\n}))\n\nexport default function Map (props) {\n  const { getTagDisplayInfo } = useConfig()\n  const classes = useStyles()\n  const theme = useTheme()\n  const { controller, agent, setAgent, msvcsPerAgent, loading } = props\n  const { map, mapRef, hasValidCoordinates } = useMap()\n\n  return (\n    <div className={classes.mapWrapper} ref={mapRef}>\n      <GoogleMapReact\n        {...map}\n        bootstrapURLKeys={{\n          key: 'AIzaSyChp_fUXiK05ulRl_ewRGKWsQ1k0ULIFkA'\n        }}\n      >\n        {(loading ? [] : controller.agents).filter(a => hasValidCoordinates([a.latitude, a.longitude])).map(a =>\n          <div\n            key={a.uuid}\n            lat={a.latitude} lng={a.longitude}\n            className={classes.mapMarkerTransform}\n            onClick={() => setAgent(a)}\n          >\n            <Badge color='primary' style={{ '--color': msvcStatusColor[a.daemonStatus] }} badgeContent={(msvcsPerAgent[a.uuid] || []).filter(m => m.flowActive && m.status.status === 'RUNNING').length} invisible={a.uuid !== agent.uuid} className={`${classes.msvcBadge}`}>\n              <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\n                <Avatar\n                  style={{ '--markerColor': statusColor[a.daemonStatus] }}\n                  className={classes.mapMarker}\n                >\n                  <MemoryIcon />\n                </Avatar>\n                <div style={{ display: 'flex', position: 'absolute', bottom: -15 }}>\n                  {a.tags && a.tags.map(getTagDisplayInfo).map(t => t.icon ? <div style={{ backgroundColor: t.color || tagColor, margin: '2px', padding: '4px', borderRadius: '100%' }}><Icon key={t.name} style={{ fontSize: 16, color: 'white', marginBottom: -3 }}>{t.icon}</Icon></div> : null)}\n                </div>\n\n              </div>\n            </Badge>\n          </div>\n        )}\n        {!loading && controller.info && hasValidCoordinates([controller.info.location.lat, controller.info.location.lon]) &&\n          <Avatar\n            lat={controller.info.location.lat}\n            lng={controller.info.location.lon}\n            style={{ '--markerColor': theme.colors.argon }}\n            className={classes.mapMarker}\n          >\n            <CtrlIcon />\n          </Avatar>}\n      </GoogleMapReact>\n    </div>\n  )\n}\n","import React, { useState } from 'react'\nimport useRecursiveTimeout from '../hooks/useInterval'\nimport { find, groupBy, get, isFinite } from 'lodash'\n\nimport Divider from '@material-ui/core/Divider'\nimport { makeStyles } from '@material-ui/styles'\n\nimport ControllerInfo from './ControllerInfo'\nimport ActiveResources from './ActiveResources'\nimport AgentList from './AgentList'\nimport ApplicationList from './ApplicationList'\nimport Map from './Map'\nimport SimpleTabs from '../Utils/Tabs'\n\n// import logo from '../assets/logo.png'\nimport './layout.scss'\n\nimport { ControllerContext } from '../ControllerProvider'\nimport { useConfig } from '../providers/Config'\nimport { useMap } from '../providers/Map'\n\nconst useStyles = makeStyles({\n  divider: {\n    margin: '15px 0'\n  }\n})\n\nconst initState = {\n  controller: {\n    info: {\n      location: {},\n      user: {}\n    },\n    agents: [],\n    flows: [],\n    microservices: []\n  },\n  agent: {},\n  activeAgents: [],\n  activeMsvcs: [],\n  msvcsPerAgent: [],\n  applications: []\n}\n\nexport const actions = {\n  UPDATE: 'UPDATE',\n  SET_AGENT: 'SET_AGENT'\n}\n\nconst updateData = (state, newController) => {\n  if (!newController) {\n    return state\n  }\n  const activeFlows = newController.applications.filter(f => f.isActivated === true)\n  const activeAgents = newController.agents.filter(a => a.daemonStatus === 'RUNNING')\n  const msvcsPerAgent = groupBy(newController.microservices.map(m => ({\n    ...m,\n    flowActive: !!find(activeFlows, f => m.flowId === f.id)\n  })), 'iofogUuid')\n  const activeMsvcs = activeAgents.reduce((res, a) => res.concat(get(msvcsPerAgent, a.uuid, []).filter(m => !!find(activeFlows, f => f.id === m.flowId)) || []), [])\n\n  if (!state.agent || !state.agent.uuid) {\n    state.agent = newController.agents[0] || {}\n  }\n\n  return {\n    ...state,\n    controller: newController,\n    applications: newController.applications,\n    activeFlows,\n    activeAgents,\n    activeMsvcs,\n    msvcsPerAgent\n  }\n}\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case actions.UPDATE:\n      return updateData(state, action.data)\n    case actions.SET_AGENT:\n      return {\n        ...state,\n        agent: action.data\n      }\n    default:\n      return state\n  }\n}\n\nexport default function ECNViewer () {\n  const classes = useStyles()\n  const { updateTags } = useConfig()\n  const [state, dispatch] = React.useReducer(reducer, initState)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState(false)\n  const { controller: controllerInfo, request } = React.useContext(ControllerContext)\n  const timeout = +controllerInfo.refresh || 3000\n  const { setMap } = useMap()\n  React.useEffect(() => {\n    setLoading(true)\n    setError(null)\n  }, [controllerInfo.ip, controllerInfo.port, controllerInfo.user])\n\n  const update = async () => {\n    const agentsResponse = await request('/api/v3/iofog-list')\n    if (!agentsResponse.ok) {\n      setError({ message: agentsResponse.statusText })\n      return\n    }\n    const agents = (await agentsResponse.json()).fogs\n    const applicationResponse = await request('/api/v3/application')\n    if (!applicationResponse.ok) {\n      setError({ message: applicationResponse.statusText })\n      return\n    }\n    const applications = (await applicationResponse.json()).applications\n\n    let microservices = []\n    for (const application of applications) {\n      const microservicesResponse = await request(`/api/v3/microservices?application=${application.name}`)\n      if (!microservicesResponse.ok) {\n        setError({ message: microservicesResponse.statusText })\n        return\n      }\n      const newMicroservices = (await microservicesResponse.json()).microservices\n      microservices = microservices.concat(newMicroservices)\n      application.microservices = newMicroservices\n    }\n    if (loading) {\n      setMap(agents, controllerInfo, true)\n      setLoading(false)\n    }\n    if (error) {\n      setError(false)\n    }\n    updateTags(agents)\n    dispatch({ type: actions.UPDATE, data: { agents, applications, microservices } })\n  }\n\n  useRecursiveTimeout(update, timeout)\n\n  const setAgent = a => dispatch({ type: actions.SET_AGENT, data: a })\n\n  const selectAgent = (a) => {\n    setAgent(a)\n    if (isFinite(a.latitude) && isFinite(a.longitude)) {\n      setMap([a], controllerInfo, false)\n    }\n  }\n\n  const selectController = () => {\n    setMap([], controllerInfo, true)\n  }\n\n  const setAutozoom = () => {\n    setMap(state.controller.agents, controllerInfo, true)\n  }\n\n  const { controller, activeAgents, applications, activeMsvcs, agent, msvcsPerAgent } = state\n  return (\n    <div className='viewer-layout-container'>\n      <div className='box sidebar'>\n        <ControllerInfo {...{ controller: controllerInfo, selectController, loading, error }} />\n        <Divider className={classes.divider} />\n        <ActiveResources {...{ activeAgents, applications, activeMsvcs, loading }} />\n        <Divider className={classes.divider} />\n\n        <SimpleTabs>\n          <AgentList title='Agents' {...{ msvcsPerAgent, loading, msvcs: controller.microservices, agents: controller.agents, agent, setAgent: selectAgent, setAutozoom, controller: controller.info }} />\n          <ApplicationList title='Applications' {...{ applications, controllerInfo, loading, agents: controller.agents, setAutozoom }} />\n        </SimpleTabs>\n      </div>\n      <div className='map-grid-container'>\n        <Map {...{ controller: { ...controller, info: controllerInfo }, agent, setAgent, msvcsPerAgent, loading }} />\n      </div>\n    </div>\n  )\n}\n","import React from 'react'\nimport { makeStyles } from '@material-ui/styles'\n\nimport Skeleton from 'react-loading-skeleton'\nimport { TextField, InputAdornment, Paper, Table, TableRow, TableCell, TableContainer, TableHead, TableBody, TablePagination } from '@material-ui/core'\n\nimport MoreIcon from '@material-ui/icons/MoreVert'\nimport SearchIcon from '@material-ui/icons/Search'\nimport ClearIcon from '@material-ui/icons/Clear'\nimport lget from 'lodash/get'\n\nconst useStyles = makeStyles(theme => ({\n  pointer: {\n    cursor: 'pointer'\n  },\n  avatarContainer: {\n    backgroundColor: theme.colors.chromium\n  },\n  tableActions: {\n    marginBottom: '10px',\n    display: 'flex',\n    justifyContent: 'space-between'\n  }\n}))\n\nconst filterFields = [\n  'name',\n  'description',\n  'publisher',\n  'supportedPlatforms',\n  'category',\n  'registry.url'\n]\n\nexport default function CatalogTable (props) {\n  const classes = useStyles()\n  const { loading, openMenu, catalog } = props\n  const [filter, setFilter] = React.useState('')\n  const [page, setPage] = React.useState(0)\n  const [rowsPerPage, setRowsPerPage] = React.useState(5)\n\n  const handleChangePage = (event, newPage) => {\n    setPage(newPage)\n  }\n\n  const handleChangeRowsPerPage = event => {\n    setRowsPerPage(parseInt(event.target.value, 10))\n    setPage(0)\n  }\n\n  const filterItem = (item) => {\n    for (const field of filterFields) {\n      if (lget(item, field, '').toString().toLowerCase().includes(filter)) { return true }\n    }\n    return false\n  }\n\n  const filteredCatalog = catalog.filter(filterItem)\n\n  const emptyRows = loading ? 0 : rowsPerPage - Math.min(rowsPerPage, filteredCatalog.length - page * rowsPerPage)\n  return (\n    <>\n      <div className={`${classes.tableActions} ${classes.pointer}`}>\n        <TextField\n          className={classes.margin}\n          id='input-with-icon-textfield'\n          label='Filter'\n          value={filter}\n          onChange={(e) => setFilter(e.target.value.toLowerCase())}\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position='start'>\n                <SearchIcon />\n              </InputAdornment>\n            ),\n            endAdornment: (\n              <InputAdornment className={classes.pointer} position='start'>\n                <ClearIcon onClick={() => setFilter('')} />\n              </InputAdornment>\n            )\n          }}\n        />\n      </div>\n      <TableContainer component={Paper}>\n        <Table className={classes.table} stickyHeader aria-label='simple table'>\n          <TableHead>\n            <TableRow>\n              <TableCell>Name</TableCell>\n              <TableCell align='right'>Description</TableCell>\n              <TableCell align='right'>Supported platforms</TableCell>\n              <TableCell align='right'>Publisher</TableCell>\n              <TableCell align='right'>Registry</TableCell>\n              <TableCell align='right'>Category</TableCell>\n              <TableCell align='right' />\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {loading ? <TableRow><TableCell colSpan={7}><Skeleton height={50} count={5} /></TableCell></TableRow> : filteredCatalog\n              .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\n              .map(row => (\n                <TableRow key={row.name}>\n                  <TableCell component='th' scope='row'>\n                    {row.name}\n                  </TableCell>\n                  <TableCell align='right'>{row.description}</TableCell>\n                  <TableCell align='right'>{row.supportedPlatforms.join(', ')}</TableCell>\n                  <TableCell align='right'>{row.publisher}</TableCell>\n                  <TableCell align='right'>{row.registry.url}</TableCell>\n                  <TableCell align='right'>{row.category}</TableCell>\n                  <TableCell align='right' className={classes.pointer}>\n                    <MoreIcon onClick={(e) => openMenu(row, e)} />\n                  </TableCell>\n                </TableRow>\n              ))}\n            {emptyRows > 0 && (\n              <TableRow style={{ height: 53 * emptyRows }}>\n                <TableCell colSpan={6} />\n              </TableRow>\n            )}\n          </TableBody>\n        </Table>\n      </TableContainer>\n      <TablePagination\n        rowsPerPageOptions={[5, 10, 25]}\n        component='div'\n        count={filteredCatalog.length}\n        rowsPerPage={rowsPerPage}\n        page={page}\n        onChangePage={handleChangePage}\n        onChangeRowsPerPage={handleChangeRowsPerPage}\n      />\n    </>\n  )\n}\n","import React from 'react'\nimport { makeStyles } from '@material-ui/styles'\n\nimport Skeleton from 'react-loading-skeleton'\nimport { TextField, Grid, Button, MenuItem } from '@material-ui/core'\n\nconst useStyles = makeStyles(theme => ({\n  pointer: {\n    cursor: 'pointer'\n  },\n  avatarContainer: {\n    backgroundColor: theme.colors.chromium\n  },\n  tableActions: {\n    marginBottom: '10px',\n    display: 'flex',\n    justifyContent: 'space-between'\n  }\n}))\nexport default function AddCatalogItemForm (props) {\n  const classes = useStyles()\n  const [newItem, setNewItem] = React.useState({\n    images: {\n      x86: '',\n      arm: ''\n    },\n    registryId: 1,\n    name: '',\n    description: '',\n    category: '',\n    ...props.newCatalogItem\n  })\n  const { onSave, loading, registries } = props\n  const handleChange = (key) => (e) => setNewItem({ ...newItem, [key]: e.target.value })\n  const handleImageChange = (key) => (e) => setNewItem({ ...newItem, images: { ...newItem.images, [key]: e.target.value } })\n  return (\n    <>\n      <Grid container spacing={2}>\n        <Grid item xs={12} sm={6}>\n          <TextField\n            id='name'\n            label='Name'\n            onChange={handleChange('name')}\n            value={newItem.name}\n            fullWidth\n            className={classes.textField}\n            margin='normal'\n            variant='outlined'\n          />\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <TextField\n            id='description'\n            label='Description'\n            onChange={handleChange('description')}\n            value={newItem.description}\n            fullWidth\n            multiline\n            rowsMax='4'\n            className={classes.textField}\n            margin='normal'\n            variant='outlined'\n          />\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <TextField\n            id='x86'\n            label='x86'\n            helperText='image to be used on x86 edge nodes'\n            onChange={handleImageChange('x86')}\n            value={newItem.images.x86}\n            fullWidth\n            className={classes.textField}\n            margin='normal'\n            variant='outlined'\n          />\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <TextField\n            id='arm'\n            label='ARM'\n            helperText='image to be used on ARM edge nodes'\n            onChange={handleImageChange('arm')}\n            value={newItem.images.arm}\n            fullWidth\n            className={classes.textField}\n            margin='normal'\n            variant='outlined'\n          />\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <TextField\n            id='registry'\n            select\n            label='Registry'\n            fullWidth\n            className={classes.textField}\n            value={newItem.registryId}\n            onChange={handleChange('registryId')}\n            variant='outlined'\n            InputProps={{\n              style: { marginTop: '16px' }\n            }}\n            InputLabelProps={{\n              style: { marginTop: '16px' }\n            }}\n          >\n            {registries.map(option => (\n              <MenuItem key={option.id} value={option.id}>\n                {option.url}\n              </MenuItem>\n            ))}\n          </TextField>\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <TextField\n            id='category'\n            label='Category'\n            onChange={handleChange('category')}\n            value={newItem.category}\n            fullWidth\n            multiline\n            rowsMax='4'\n            className={classes.textField}\n            margin='normal'\n            variant='outlined'\n          />\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <TextField\n            id='publisher'\n            label='Publisher'\n            onChange={handleChange('publisher')}\n            value={newItem.publisher}\n            fullWidth\n            multiline\n            rowsMax='4'\n            className={classes.textField}\n            margin='normal'\n            variant='outlined'\n          />\n        </Grid>\n      </Grid>\n      <Grid container justify='flex-end'>\n        <Grid item>\n          <Button onClick={() => onSave(newItem)}>\n            {loading ? <Skeleton> </Skeleton> : 'Save'}\n          </Button>\n        </Grid>\n      </Grid>\n    </>\n  )\n}\n","import React from 'react'\nimport { Button, Divider, Grid } from '@material-ui/core'\n\nimport Modal from './Modal'\n\nimport { makeStyles } from '@material-ui/styles'\nconst useStyles = makeStyles(theme => ({\n  divider: {\n    margin: '5px'\n  }\n}))\n\nexport default function Confirm (props) {\n  const classes = useStyles()\n  const { open, onClose, title, onConfirm } = props\n  return (\n    <Modal\n      {...{\n        title,\n        open,\n        onClose\n      }}\n    >\n      {props.children}\n      <Divider className={classes.divider} />\n      <Grid container justify='flex-end' spacing={2}>\n        <Grid item>\n          <Button onClick={onClose}>\n            Cancel\n          </Button>\n        </Grid>\n        <Grid item>\n          <Button variant='contained' color='primary' onClick={onConfirm}>\n            Confirm\n          </Button>\n        </Grid>\n      </Grid>\n\n    </Modal>\n  )\n}\n","import React from 'react'\nimport { makeStyles } from '@material-ui/styles'\nimport ReactJson from 'react-json-view'\nimport yaml from 'js-yaml'\nimport { Avatar, Menu, MenuItem, Divider, Typography } from '@material-ui/core'\n\nimport { ControllerContext } from '../ControllerProvider'\nimport { FeedbackContext } from '../Utils/FeedbackContext'\nimport Modal from '../Utils/Modal'\nimport CatalogTable from './CatalogTable'\nimport AddCatalogItemForm from './AddCatalogItemForm'\nimport Confirm from '../Utils/Confirm'\nimport FileDrop from '../Utils/FileDrop'\n\nimport lget from 'lodash/get'\n\nconst useStyles = makeStyles(theme => ({\n  pointer: {\n    cursor: 'pointer'\n  },\n  avatarContainer: {\n    backgroundColor: theme.colors.chromium\n  },\n  container: {\n    padding: '10px 50px 10px 30px'\n  },\n  flexColumn: {\n    display: 'flex',\n    flexDirection: 'column'\n  },\n  titleRow: {\n    marginBottom: '30px'\n  }\n}))\n\nconst mapImages = (images) => {\n  const supportedPlatforms = []\n  for (const img of images) {\n    if (img.containerImage) {\n      switch (img.fogTypeId) {\n        case 1:\n          supportedPlatforms.push('x86')\n          break\n        case 2:\n          supportedPlatforms.push('arm')\n          break\n        default:\n          break\n      }\n    }\n  }\n  return supportedPlatforms\n}\nconst mapCatalogItem = (item, registries) => {\n  item.supportedPlatforms = mapImages(item.images)\n  item.registry = registries.find(r => r.id === item.registryId)\n  if (item.configExample) {\n    try {\n      item.configExample = JSON.parse(item.configExample)\n    } catch (e) {\n    }\n  }\n  return item\n}\n\nconst getRegistryIdFromRegistry = (registry) => {\n  if (registry === 'remote') {\n    return 1\n  }\n  if (registry === 'local') {\n    return 2\n  }\n  return +(registry)\n}\n\nconst parseCatalogItem = (doc) => {\n  if (doc.apiVersion !== 'iofog.org/v2') {\n    return [{}, `Invalid API Version ${doc.apiVersion}, current version is iofog.org/v2`]\n  }\n  if (doc.kind !== 'CatalogItem') {\n    return [{}, `Invalid kind ${doc.kind}`]\n  }\n  if (!doc.metadata || !doc.spec) {\n    return [{}, 'Invalid YAML format']\n  }\n  const catalogItem = {\n    name: lget(doc, 'metadata.name', lget(doc, 'spec.name', undefined)),\n    images: {\n      x86: lget(doc, 'spec.x86', ''),\n      arm: lget(doc, 'spec.arm', '')\n    },\n    description: lget(doc, 'spec.description', ''),\n    publisher: lget(doc, 'spec.publisher', ''),\n    category: lget(doc, 'spec.category', ''),\n    registry: lget(doc, 'spec.registry', ''),\n    configExample: lget(doc, 'spec.configExample', {})\n  }\n\n  catalogItem.registryId = catalogItem.registry ? getRegistryIdFromRegistry(catalogItem.registry) : 1\n  return [catalogItem]\n}\n\nexport default function Catalog () {\n  const classes = useStyles()\n  const [openDetailsModal, setOpenDetailsModal] = React.useState(false)\n  const [openRemoveConfirm, setOpenRemoveConfirm] = React.useState(false)\n  const [openAddCatalogItemModal, setOpenAddCatalogItemModal] = React.useState(false)\n  const [newCatalogItem, setNewCatalogItem] = React.useState(null)\n  const [fetching, setFetching] = React.useState(true)\n  const [loading, setLoading] = React.useState(false)\n  const [catalog, setCatalog] = React.useState([])\n  const [registries, setRegistries] = React.useState([])\n  const [selectedItem, setSelectedItem] = React.useState({})\n  const [menuAnchorEl, setMenuAnchorEl] = React.useState(null)\n  const { request } = React.useContext(ControllerContext)\n  const { pushFeedback } = React.useContext(FeedbackContext)\n\n  const handleCloseMenu = () => setMenuAnchorEl(null)\n  const openMenu = (item, e) => {\n    setSelectedItem(item)\n    setMenuAnchorEl(e.currentTarget)\n  }\n  const openDetails = () => {\n    setOpenDetailsModal(true)\n    handleCloseMenu()\n  }\n  const openRemove = () => {\n    setOpenRemoveConfirm(true)\n    handleCloseMenu()\n  }\n\n  async function fetchCatalog () {\n    try {\n      setFetching(true)\n      const catalogItemsResponse = await request('/api/v3/catalog/microservices')\n      if (!catalogItemsResponse.ok) {\n        pushFeedback({ message: catalogItemsResponse.statusText, type: 'error' })\n        setFetching(false)\n        return\n      }\n      let catalogItems = (await catalogItemsResponse.json()).catalogItems\n      const registriesResponse = await request('/api/v3/registries')\n      if (!registriesResponse.ok) {\n        pushFeedback({ message: registriesResponse.statusText, type: 'error' })\n        setFetching(false)\n        return\n      }\n      const registries = (await registriesResponse.json()).registries\n      catalogItems = catalogItems.map(item => mapCatalogItem(item, registries))\n      console.log({ catalogItems })\n      setCatalog(catalogItems)\n      setRegistries(registries)\n      setFetching(false)\n    } catch (e) {\n      pushFeedback({ message: e.message, type: 'error' })\n      setFetching(false)\n    }\n  }\n\n  React.useEffect(() => {\n    fetchCatalog()\n  }, [])\n\n  const addCatalogItem = async (item) => {\n    const newItem = {\n      ...item,\n      images: [{\n        fogTypeId: 1,\n        containerImage: item.images.x86\n      }, {\n        fogTypeId: 2,\n        containerImage: item.images.arm\n      }]\n    }\n    if (newItem.configExample && typeof newItem.configExample === typeof ({})) {\n      newItem.configExample = JSON.stringify(newItem.configExample)\n    }\n    setLoading(true)\n    const response = await request('/api/v3/catalog/microservices', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(newItem)\n    })\n    if (response.ok) {\n      pushFeedback({ message: 'Item added to the Catalog!', type: 'success' })\n      newItem.id = (await response.json()).id\n      setCatalog([mapCatalogItem(newItem, registries), ...catalog])\n      setLoading(false)\n    } else {\n      pushFeedback({ message: response.statusText, type: 'error' })\n      setLoading(false)\n    }\n  }\n\n  const removeCatalogItem = async (item) => {\n    try {\n      setLoading(true)\n      const res = await request(`/api/v3/catalog/microservices/${item.id}`, {\n        method: 'DELETE'\n      })\n      if (!res.ok) {\n        pushFeedback({ message: res.statusText, type: 'error' })\n      } else {\n        setCatalog(catalog.filter(i => i.id !== item.id))\n        pushFeedback({ message: 'Catalog item deleted', type: 'success' })\n      }\n      setLoading(false)\n    } catch (e) {\n      pushFeedback({ message: e.message, type: 'error', uuid: 'error' })\n      setLoading(false)\n    }\n  }\n\n  const readCatalogItemFile = async (item) => {\n    const file = item.files[0]\n    if (file) {\n      const reader = new window.FileReader()\n\n      reader.onload = function (evt) {\n        console.log({ evt })\n        try {\n          const doc = yaml.safeLoad(evt.target.result)\n          const [catalogItem, err] = parseCatalogItem(doc)\n          if (err) {\n            return pushFeedback({ message: err, type: 'error' })\n          }\n          setNewCatalogItem(catalogItem)\n          setOpenAddCatalogItemModal(true)\n        } catch (e) {\n          console.error({ e })\n          pushFeedback({ message: 'Could not parse the file', type: 'error' })\n        }\n      }\n\n      reader.onerror = function (evt) {\n        pushFeedback({ message: evt, type: 'error' })\n      }\n\n      reader.readAsText(file, 'UTF-8')\n    }\n  }\n\n  return (\n    <>\n      <div className={classes.container}>\n        <div className={classes.titleRow}>\n          <Typography variant='h5'>ECN Microservices Catalog</Typography>\n        </div>\n        <CatalogTable {...{ loading: fetching, openMenu, catalog }} />\n        <div>\n          <FileDrop {...{ onDrop: readCatalogItemFile }}>\n            <div className={classes.flexColumn}>\n              <span>Drag a file here</span>\n              <span>---</span>\n              <Avatar style={{ margin: 'auto' }} className={`${classes.avatarContainer} ${classes.pointer}`} onClick={() => setOpenAddCatalogItemModal(true)}>+</Avatar>\n            </div>\n          </FileDrop>\n        </div>\n      </div>\n      <Modal\n        {...{\n          open: openDetailsModal,\n          title: `${selectedItem.name} details`,\n          onClose: () => setOpenDetailsModal(false)\n        }}\n      >\n        <ReactJson title='Catalog item' src={selectedItem} name={false} />\n      </Modal>\n      <Modal\n        {...{\n          open: openAddCatalogItemModal,\n          title: 'Add an item to the Catalog',\n          onClose: () => setOpenAddCatalogItemModal(false)\n        }}\n      >\n        <AddCatalogItemForm {...{\n          loading,\n          registries,\n          newCatalogItem,\n          onSave: async (item) => {\n            try {\n              await addCatalogItem(item)\n              setNewCatalogItem(null)\n              setOpenAddCatalogItemModal(false)\n            } catch (e) {\n              pushFeedback({ message: e.message, type: 'error' })\n            }\n          }\n        }}\n        />\n      </Modal>\n      <Confirm\n        open={openRemoveConfirm}\n        title={`Delete catalog item ${selectedItem.name} ?`}\n        onClose={() => setOpenRemoveConfirm(false)}\n        onConfirm={() => {\n          removeCatalogItem(selectedItem)\n          setOpenRemoveConfirm(false)\n        }}\n      />\n      <Menu\n        id='catalog-menu'\n        anchorEl={menuAnchorEl}\n        keepMounted\n        open={Boolean(menuAnchorEl)}\n        onClose={handleCloseMenu}\n      >\n        <MenuItem onClick={openDetails}>Details</MenuItem>\n        <Divider />\n        <MenuItem onClick={openRemove}>Remove item</MenuItem>\n      </Menu>\n    </>\n  )\n}\n","import React from 'react'\nimport { TextField, Grid, Button, InputAdornment, Divider } from '@material-ui/core'\nimport { makeStyles } from '@material-ui/styles'\n\nimport { ControllerContext } from '../ControllerProvider'\nimport { FeedbackContext } from '../Utils/FeedbackContext'\n\nconst useStyles = makeStyles({\n  skeleton: {\n    minHeight: '55px'\n  }\n})\n\nexport default function Config (props) {\n  const classes = useStyles()\n  const { pushFeedback } = React.useContext(FeedbackContext)\n  const { controller, updateController } = React.useContext(ControllerContext)\n  const [data, setData] = React.useState({ ...controller })\n\n  const save = async () => {\n    try {\n      await updateController(data)\n      pushFeedback({ message: data.dev ? 'Controller details saved!' : 'Authenticated!', type: 'success' })\n      props.onSave()\n    } catch (e) {\n      pushFeedback({ message: e.message, type: 'error' })\n    }\n  }\n\n  const handleChange = name => event => {\n    setData({ ...data, [name]: event.target.value })\n  }\n  const handleUserChange = name => event => {\n    setData({ ...data, user: { ...data.user, [name]: event.target.value } })\n  }\n  return (\n    <>\n      {data.dev &&\n        <Grid container spacing={2}>\n          <Grid item xs={12} sm={6}>\n            <TextField\n              id='ip'\n              label='IP'\n              onChange={handleChange('ip')}\n              value={data.ip}\n              fullWidth\n              className={classes.textField}\n              margin='normal'\n              variant='outlined'\n            />\n          </Grid>\n          <Grid item xs={12} sm={6}>\n            <TextField\n              id='port'\n              label='Port'\n              onChange={handleChange('port')}\n              value={data.port}\n              fullWidth\n              className={classes.textField}\n              margin='normal'\n              variant='outlined'\n            />\n          </Grid>\n        </Grid>}\n      <Grid container spacing={2}>\n        <Grid item xs={12} sm={6}>\n          <TextField\n            id='email'\n            label='Email'\n            onChange={handleUserChange('email')}\n            value={data.user.email}\n            fullWidth\n            className={classes.textField}\n            margin='normal'\n            variant='outlined'\n          />\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <TextField\n            id='password'\n            label='Password'\n            onChange={handleUserChange('password')}\n            onKeyPress={(e) => e.key === 'Enter' && data.user.email && data.user.password ? save() : null}\n            value={data.user.password}\n            fullWidth\n            type='password'\n            className={classes.textField}\n            margin='normal'\n            variant='outlined'\n          />\n        </Grid>\n      </Grid>\n      <Divider />\n      <Grid container spacing={2}>\n        <Grid item xs={12} sm={6}>\n          <TextField\n            id='refresh'\n            label='Refresh'\n            type='number'\n            onChange={handleChange('refresh')}\n            value={data.refresh}\n            fullWidth\n            className={classes.textField}\n            margin='normal'\n            variant='outlined'\n            inputProps={{\n              min: '1000',\n              step: '500'\n            }}\n            InputProps={{\n              endAdornment: <InputAdornment position='end'>ms</InputAdornment>\n            }}\n          />\n        </Grid>\n      </Grid>\n      <Grid container justify='flex-end'>\n        <Grid item>\n          <Button onClick={save}>\n            Save\n          </Button>\n        </Grid>\n      </Grid>\n    </>\n  )\n}\n","import React from 'react'\nimport { map as lmap } from 'lodash'\nimport { TextField, Typography, Button, Icon, InputAdornment } from '@material-ui/core'\nimport { makeStyles } from '@material-ui/styles'\nimport { theme } from '../Theme/ThemeProvider'\n\nimport { useConfig } from '../providers/Config'\nimport { useFeedback } from '../Utils/FeedbackContext'\n\nconst useStyles = makeStyles({\n  skeleton: {\n    minHeight: '55px'\n  },\n  link: {\n    color: theme.colors.cobalt\n  }\n})\n\nexport default function Config (props) {\n  const classes = useStyles()\n  const { config, saveConfig } = useConfig()\n  const { pushFeedback } = useFeedback()\n  const [tags, setTags] = React.useState(config.tags || {})\n  const [filter, setFilter] = React.useState('')\n\n  const save = async () => {\n    try {\n      const res = await saveConfig({ ...config, tags })\n      if (res.ok) {\n        pushFeedback({ message: 'Saved!', type: 'success' })\n        props.onSave()\n      } else {\n        pushFeedback({ message: res.statusText, type: 'error' })\n      }\n    } catch (e) {\n      pushFeedback({ message: e.message, type: 'error' })\n    }\n  }\n\n  React.useEffect(() => {\n    setTags(config.tags)\n  }, [config])\n\n  const handleChange = (name, key) => e => {\n    const value = e.target.value\n    setTags(tags => ({ ...tags, [name]: { ...tags[name], [key]: value } }))\n  }\n\n  return (\n    <div>\n      <div style={{ display: 'flex', justifyContent: 'space-between', flex: 1, alignItems: 'baseline' }}>\n        <div style={{ display: 'flex', alignItems: 'baseline' }}>\n          <Typography variant='h5' style={{ marginRight: '20px' }}>Tags</Typography>\n          <TextField\n            id='search'\n            label='Search'\n            onChange={e => setFilter(e.target.value)}\n            value={filter}\n            className={classes.textField}\n            margin='normal'\n            InputProps={{\n              startAdornment: (\n                <InputAdornment position='start'>\n                  <Icon>search</Icon>\n                </InputAdornment>\n              )\n            }}\n          />\n        </div>\n        <Typography variant='subtitle2'><a className={classes.link} href='https://material.io/resources/icons/?style=baseline' rel='noopener noreferrer' target='_blank'>Available Icons <Icon style={{ fontSize: 12 }}>open_in_new</Icon></a></Typography>\n      </div>\n      {lmap(tags, (tag, name) => {\n        if (!name.includes(filter)) {\n          return null\n        }\n        return (\n          <div style={{ display: 'flex', alignItems: 'center' }} key={name}>\n            <div style={{ marginRight: '10px', width: '150px', overflow: 'hidden', textOverflow: 'ellipsis' }}>\n              <span>{name}:</span>\n            </div>\n            <div style={{ display: 'flex', flex: 1, alignItems: 'center' }}>\n              <TextField\n                id='color'\n                label='Color'\n                onChange={handleChange(name, 'color')}\n                value={tag.color}\n                fullWidth\n                className={classes.textField}\n                margin='normal'\n                variant='outlined'\n                type='color'\n              />\n              <TextField\n                id='icon'\n                label='Icon Name'\n                onChange={handleChange(name, 'icon')}\n                value={tag.icon}\n                fullWidth\n                className={classes.textField}\n                margin='normal'\n                variant='outlined'\n              />\n            </div>\n          </div>\n        )\n      })}\n      <Button onClick={save} style={{ float: 'right' }}>\n        Save\n      </Button>\n    </div>\n  )\n}\n","import React from 'react'\nimport { HashRouter, Route, Switch, NavLink, Redirect } from 'react-router-dom'\nimport Avatar from '@material-ui/core/Avatar'\nimport SearchIcon from '@material-ui/icons/Search'\nimport NotificationsIcon from '@material-ui/icons/NotificationsOutlined'\nimport HomeIcon from '@material-ui/icons/HomeOutlined'\nimport CatalogIcon from '@material-ui/icons/GraphicEqOutlined'\nimport SettingsIcon from '@material-ui/icons/SettingsOutlined'\n\nimport ECNViewer from '../ECNViewer'\nimport Catalog from '../Catalog'\nimport Modal from '../Utils/Modal'\nimport Config from '../Config'\nimport ECNViewerConfig from '../ECNViewerConfig'\nimport SimpleTabs from '../Utils/Tabs'\nimport { ControllerContext } from '../ControllerProvider'\n\nimport logomark from '../assets/logomark.svg'\nimport './layout.scss'\n\nimport { makeStyles } from '@material-ui/styles'\nimport { MapProvider } from '../providers/Map'\n\nconst useStyles = makeStyles(theme => ({\n  wrapper: {\n    color: theme.colors.carbon,\n    backgroundColor: theme.colors.silver\n  },\n  divider: {\n    margin: '15px 0'\n  },\n  logo: {\n    backgroundColor: theme.colors.phosphorus,\n    color: theme.colors.white\n  },\n  latNav: {\n    backgroundColor: theme.colors.carbon\n  },\n  avatarContainer: {\n    backgroundColor: theme.colors.phosphorus,\n    marginRight: '45px'\n  },\n  latIcons: {\n    margin: 'auto',\n    marginTop: '15px',\n    cursor: 'pointer',\n    backgroundColor: theme.colors.carbon,\n    '.active &': {\n      backgroundColor: theme.colors.aluminium\n    }\n  },\n  topIcons: {\n    height: '100%',\n    width: '25px',\n    marginRight: '25px',\n    cursor: 'pointer'\n  },\n  nav: {\n    marginBottom: '15px',\n    height: '50px',\n    '& a': {\n      height: '100%',\n      '& img': {\n        height: '100%'\n      }\n    }\n  },\n  footerContainer: {\n    display: 'flex',\n    justifyContent: 'space-around',\n    justifyItems: 'center',\n    padding: '20px 10px 20px 0px'\n  },\n  footer: {\n    color: theme.colors.aluminium,\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'flex-end',\n    fontSize: '9pt',\n    '& a': {\n      color: theme.colors.aluminium,\n      textDecoration: 'none!important'\n    }\n  }\n}))\n\nexport default function Layout () {\n  const classes = useStyles()\n  const { controller } = React.useContext(ControllerContext)\n  const [settingsOpen, setSettingsOpen] = React.useState(!(controller.user.email && controller.user.password))\n\n  console.log(' ====> Rendering layout')\n\n  return (\n    <>\n      <HashRouter>\n        <div className={classes.wrapper + ' wrapper'}>\n          <div className={classes.logo + ' logo'}>\n            <NavLink to='/overview'>\n              <img src={logomark} alt='Edgeworx logomark' />\n            </NavLink>\n          </div>\n          <div className='topnav'>\n            <SearchIcon className={classes.topIcons} />\n            <NotificationsIcon className={classes.topIcons} />\n            <Avatar className={classes.avatarContainer}>M</Avatar>\n          </div>\n          <div className={classes.latNav + ' latnav'}>\n            <NavLink to='/overview'>\n              <Avatar className={classes.latIcons}>\n                <HomeIcon />\n              </Avatar>\n            </NavLink>\n            <NavLink to='/catalog'>\n              <Avatar className={classes.latIcons}>\n                <CatalogIcon />\n              </Avatar>\n            </NavLink>\n            <Avatar className={classes.latIcons}>\n              <SettingsIcon onClick={() => setSettingsOpen(!settingsOpen)} />\n            </Avatar>\n          </div>\n          <div className='content'>\n            <Switch>\n              <Route path='/catalog' component={Catalog} />\n              <Route path='/overview' component={() => <MapProvider><ECNViewer /></MapProvider>} />\n              <Route component={() => <Redirect to='/overview' />} />\n            </Switch>\n          </div>\n          <div className={`${classes.footerContainer} footer`}>\n            <span className={classes.footer}>\n              <span>Controller v{controller.status.versions.controller} - ECN Viewer v{controller.status.versions.ecnViewer}</span>\n              <a style={{ margin: 'auto' }} href='http://www.eclipse.org/legal/copyright.php'>© 2020 Eclipse Foundation, Inc.</a>\n            </span>\n          </div>\n        </div>\n      </HashRouter>\n      <Modal\n        {...{\n          open: settingsOpen,\n          title: 'Configuration',\n          onClose: () => setSettingsOpen(false)\n        }}\n      >\n        <SimpleTabs>\n          <Config title={controller.dev ? 'Controller details' : 'User credentials'} {...{ onSave: () => setSettingsOpen(false) }} />\n          <ECNViewerConfig title='ECN Viewer' {...{ onSave: () => setSettingsOpen(false) }} />\n        </SimpleTabs>\n      </Modal>\n    </>\n  )\n}\n","import React from 'react'\n\nimport CssBaseline from '@material-ui/core/CssBaseline'\nimport Backend from 'react-dnd-html5-backend'\nimport { DndProvider } from 'react-dnd'\n\nimport Layout from './Layout'\n\nimport './App.css'\nimport FeedbackContext from './Utils/FeedbackContext'\nimport ThemeContext from './Theme/ThemeProvider'\nimport ControllerContext from './ControllerProvider'\nimport { ConfigProvider } from './providers/Config'\n\nfunction App () {\n  console.log(' ======> Rendering app ')\n  return (\n    <>\n      <CssBaseline />\n      <ThemeContext>\n        <DndProvider backend={Backend}>\n          <ControllerContext>\n            <ConfigProvider>\n              <FeedbackContext>\n                <Layout />\n              </FeedbackContext>\n            </ConfigProvider>\n          </ControllerContext>\n        </DndProvider>\n      </ThemeContext>\n    </>\n  )\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\n/* globals fetch */\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n)\n\nexport function register (config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          )\n        })\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nfunction registerValidSW (swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        if (installingWorker == null) {\n          return\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              )\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker (swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type')\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      )\n    })\n}\n\nexport function unregister () {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister()\n    })\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport * as serviceWorker from './serviceWorker'\n\nReactDOM.render(<App />, document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}