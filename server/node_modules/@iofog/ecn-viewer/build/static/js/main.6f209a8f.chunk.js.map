{"version":3,"sources":["assets/logomark.svg","hooks/useInterval.js","ECNViewer/ControllerInfo.js","ECNViewer/ActiveResources.js","Theme/ThemeProvider.js","ECNViewer/utils.js","Utils/Modal.js","Utils/Alert.js","Utils/FeedbackContext.js","ControllerProvider/index.js","ECNViewer/AgentList/ConnectNode.js","Utils/Autocomplete.js","ECNViewer/AgentList/AddMicroservice.js","ECNViewer/AgentList/RemoveMicroservice.js","Utils/Tabs.js","providers/Config/index.js","ECNViewer/AgentList/index.js","ECNViewer/Map.js","ECNViewer/index.js","Catalog/CatalogTable.js","Catalog/AddCatalogItemForm.js","Utils/Confirm.js","Utils/FileDrop.js","Catalog/index.js","Config/index.js","ECNViewerConfig/index.js","Layout/index.js","App.js","serviceWorker.js","index.js"],"names":["module","exports","useRecursiveTimeout","callback","delay","savedCallback","useRef","useEffect","current","id","setTimeout","tick","ret","Promise","then","clearTimeout","useStyles","makeStyles","theme","controllerInfo","paddingTop","padding","controllerName","fontSize","fontFamily","fontWeight","lineHeight","letterSpacing","width","borderBottom","warningChip","backgroundColor","colors","danger","color","controllerTitle","display","justifyContent","alignItems","textEmphasis","ControllerInfo","props","classes","useTheme","controller","loading","error","location","city","country","lat","lon","query","controllerError","React","useState","window","localStorage","getItem","setControllerName","document","title","className","Typography","style","variant","Input","value","onChange","e","name","target","setItem","onKeyDown","key","blur","Tooltip","message","aria-label","Chip","label","gold","List","ListItem","ListItemIcon","ListItemText","primary","cursor","onClick","selectController","summary","gridTemplateColumns","gridColumnGap","textAlign","ActiveResources","activeFlows","activeAgents","activeMsvcs","Paper","length","phosphorus","cobalt","chromium","argon","carbon","lead","aluminium","silver","white","createMuiTheme","customTheme","success","Theming","ThemeProvider","children","statusColor","RUNNING","UNKNOWN","OFFLINE","msvcStatusColor","tagColor","modalTitle","borderRadius","modal","top","left","position","modalContent","maxHeight","overflowY","modalActions","modalAction","marginLeft","_Modal","open","onClose","Modal","aria-labelledby","actions","map","a","Button","text","variantIcon","CheckCircleIcon","warning","WarningIcon","ErrorIcon","info","InfoIcon","icon","iconVariant","opacity","marginRight","spacing","alert","margin","boxShadow","container","flexDirection","bottom","zIndex","Alert","alerts","idx","handleClick","variantKey","type","Icon","SnackbarContent","aria-describedby","action","IconButton","FeedbackContext","createContext","feedbacks","setFeedbacks","pushFeedback","initState","nextId","reducer","state","data","timeout","dispatch","idxToRemove","findIndex","f","slice","Context","useReducer","console","log","Provider","newFeedbacks","newFeedback","push","Consumer","initControllerState","localUser","controllerJson","user","JSON","parse","api","protocol","ip","port","status","versions","ecnViewer","getUrl","path","dev","hostname","join","getHeaders","headers","controllerConfig","ControllerContext","updateController","lookUpControllerInfo","host","split","localhost","RegExp","test","fetch","response","ok","json","Error","statusText","getControllerStatus","updateControllerInfo","ipInfo","token","newState","authenticate","method","Accept","body","stringify","accessToken","request","options","t","Authorization","newController","effect","divider","initNode","newError","ConnectNode","node","setNode","useContext","handleChange","event","createAgent","agent","uuid","getProvisioningKey","linkAgent","ioFogApi","provisionAgent","connect","fogType","iofogUuid","provisioningKey","Grid","item","xs","sm","TextField","fullWidth","textField","helperText","Divider","justify","root","flexGrow","height","paper","marginTop","marginBot","right","chip","inputRoot","flexWrap","inputInput","Autocomplete","itemToString","get","initialSelectedItem","selectedItem","clearSelection","getInputProps","getItemProps","getLabelProps","getMenuProps","highlightedIndex","inputValue","isOpen","openMenu","onFocus","disabled","placeholder","onBlur","inputProps","InputProps","ref","others","inputRef","input","renderInput","InputLabelProps","shrink","square","showEmpty","deburr","trim","toLowerCase","inputLength","count","suggestions","filter","suggestion","keep","maxSuggestions","startsWith","getSuggestions","index","suggestionProps","itemProps","isHighlighted","isSelected","MenuItem","selected","component","renderSuggestion","formControl","rowIcon","newPaper","border","inputWithIcon","MenuProps","PaperProps","ITEM_HEIGHT","initMsvc","flow","catalog","images","volumeMappings","ports","rootHostAccess","_new","initFlow","isActivated","initCatalogItem","fogTypeId","containerImage","registryId","generateRouteSelect","list","isNewMsvc","m","AddMicroservice","flows","setFlows","setCatalog","config","ReactJsonRef","src","onAdd","updated_src","onEdit","onDelete","msvc","setMsvc","newFlow","setNewFlow","newCatalogItem","setNewCatalogItem","routes","setRoutes","all","flowRaw","flowsRes","catalogRaw","catalogRes","catalogItems","setter","prevState","handleMsvcChangeArray","objKey","valueDecorator","x","getCatalogImage","img","removeFromArray","addMsvc","flowId","catalogItemId","createFlow","createCatalogItem","catalogItem","Math","random","toString","replace","substr","createRoute","route","from","to","createRoutes","defaultUuid","createMsvc","onSuccess","routeList","microservices","concat","FormControl","required","FormControlLabel","control","Checkbox","checked","v","hostDestination","containerDestination","InputLabel","htmlFor","Select","accessMode","p","parseInt","external","internal","r","chips","marginBottom","RemoveMicroservice","msvcsToRemove","setMsvcsToRemove","remove","res","indexOf","msvcsPerUUID","msvcs","reduce","multiple","renderValue","TabContainer","palette","background","SimpleTabs","setValue","Tabs","newValue","child","Tab","ConfigContext","useConfig","_initConfig","tags","defaultTagColor","ConfigProvider","setConfig","_fetchConfig","stringifiedConfig","saveConfig","newConfig","isDebug","search","includes","editConfig","updateTags","agents","updated","tag","lget","lset","getTagDisplayInfo","avatarList","msvcChipList","flex","paddingRight","msvcChip","textOverflow","whiteSpace","overflow","jsonDisplay","minHeight","listTitle","link","secondary","textDecoration","TagChip","first","size","AgentList","openDetailsModal","setOpenDetailsModal","openConnectNodeModal","setOpenConnectNodeModal","openAddMicroserviceModal","setOpenAddMicroserviceModal","openRemoveMicroserviceModal","setOpenRemoveMicroserviceModal","menuAnchorEl","setMenuAnchorEl","msvcsPerAgent","setAgent","setAutozoom","handleCloseMenu","currentTarget","subheader","ListSubheader","disableGutters","disableSticky","button","ListItemAvatar","Avatar","daemonStatus","Fragment","flowActive","Menu","anchorEl","keepMounted","Boolean","mapMarkerTransform","transform","msvcBadge","mapMarker","mapWrapper","borderColor","hasValidCoordinates","coordinates","isFinite","Map","DomElementRef","autozoom","google","bounds","maps","LatLngBounds","latitude","longitude","center","zoom","forEach","marker","extend","LatLng","newBounds","ne","getNorthEast","lng","sw","getSouthWest","fitBounds","setMap","bootstrapURLKeys","Badge","badgeContent","invisible","groupBy","find","updateData","ECNViewer","setLoading","setError","styles","mapStyle","refresh","agentsResponse","fogs","flowsResponse","microservicesResponse","centerMap","pointer","avatarContainer","tableActions","filterFields","CatalogTable","setFilter","page","setPage","rowsPerPage","setRowsPerPage","filteredCatalog","field","emptyRows","min","startAdornment","InputAdornment","endAdornment","TableContainer","Table","table","stickyHeader","TableHead","TableRow","TableCell","align","TableBody","colSpan","row","scope","description","supportedPlatforms","publisher","registry","url","category","TablePagination","rowsPerPageOptions","onChangePage","newPage","onChangeRowsPerPage","AddCatalogItemForm","x86","arm","newItem","setNewItem","onSave","registries","handleImageChange","multiline","rowsMax","select","option","Confirm","onConfirm","FILE","NativeTypes","dropZone","active","FileDrop","useDrop","accept","drop","onDrop","collect","monitor","highlighted","canDrop","hovered","isOver","collectedProps","flexColumn","titleRow","mapCatalogItem","mapImages","configExample","parseCatalogItem","doc","apiVersion","kind","metadata","spec","undefined","Catalog","openRemoveConfirm","setOpenRemoveConfirm","openAddCatalogItemModal","setOpenAddCatalogItemModal","fetching","setFetching","setRegistries","setSelectedItem","catalogItemsResponse","registriesResponse","fetchCatalog","addCatalogItem","removeCatalogItem","i","readCatalogItemFile","file","files","reader","FileReader","onload","evt","yaml","safeLoad","result","err","onerror","readAsText","skeleton","Config","setData","save","handleUserChange","email","onKeyPress","password","step","setTags","href","rel","lmap","float","wrapper","logo","latNav","latIcons","topIcons","nav","footerContainer","justifyItems","footer","Layout","settingsOpen","setSettingsOpen","logomark","alt","App","CssBaseline","DndProvider","backend","Backend","match","ReactDOM","render","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.6f209a8f.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/logomark.380acb6b.svg\";","import React, { useEffect, useRef } from 'react'\n\nfunction useRecursiveTimeout (\n  callback,\n  delay\n) {\n  const savedCallback = useRef(callback)\n\n  // Remember the latest callback.\n  useEffect(() => {\n    savedCallback.current = callback\n  }, [callback])\n\n  // Set up the timeout loop.\n  useEffect(() => {\n    let id\n    function tick () {\n      const ret = savedCallback.current()\n\n      if (ret instanceof Promise) {\n        ret.then(() => {\n          if (delay !== null) {\n            id = setTimeout(tick, delay)\n          }\n        })\n      } else {\n        if (delay !== null) {\n          id = setTimeout(tick, delay)\n        }\n      }\n    }\n    if (delay !== null) {\n      id = setTimeout(tick, delay)\n      return () => id && clearTimeout(id)\n    }\n  }, [delay])\n}\n\nexport default useRecursiveTimeout\n","import React from 'react'\nimport Skeleton from 'react-loading-skeleton'\n\nimport { Typography, List, ListItem, ListItemIcon, ListItemText, Chip, Tooltip, Input } from '@material-ui/core'\n\nimport LocationCityIcon from '@material-ui/icons/LocationCity'\nimport GPSFixedIcon from '@material-ui/icons/GpsFixed'\nimport IPIcon from '@material-ui/icons/WifiTethering'\n\nimport { makeStyles, useTheme } from '@material-ui/styles'\n\nconst CONTROLLER_NAME_KEY = 'ControllerName'\nconst DEFAULT_CONTROLLER_NAME = 'Controller'\n\nconst useStyles = makeStyles(theme => ({\n  controllerInfo: {\n    paddingTop: '0px',\n    '& .paper': {\n      padding: '5px'\n    }\n  },\n  controllerName: {\n    fontSize: '1.5rem',\n    fontFamily: '\"Roboto\", \"Helvetica\", \"Arial\", sans-serif',\n    fontWeight: 400,\n    lineHeight: 1.33,\n    letterSpacing: '0em',\n    width: '100%',\n    '&::before': {\n      borderBottom: 'none !important'\n    }\n  },\n  warningChip: {\n    backgroundColor: `var(--color, ${theme.colors.danger})`,\n    color: 'white'\n  },\n  controllerTitle: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'baseline',\n    textEmphasis: 'bold'\n  }\n}))\n\nexport default function ControllerInfo (props) {\n  const classes = useStyles()\n  const theme = useTheme()\n  const { controller, loading, error } = props\n  const { city, country, lat, lon, query } = controller.location || {}\n\n  const controllerError = error || controller.error || null\n  const [controllerName, setControllerName] = React.useState(() => {\n    return window.localStorage.getItem(CONTROLLER_NAME_KEY) || DEFAULT_CONTROLLER_NAME\n  })\n\n  const loseFocus = (e) => {\n    const { key, target } = e\n    if (key === 'Enter') {\n      target.blur()\n    }\n  }\n\n  const updateControllerName = (e) => {\n    const name = e.target.value\n    window.localStorage.setItem(CONTROLLER_NAME_KEY, name)\n    setControllerName(name)\n  }\n\n  React.useEffect(() => {\n    if (controllerName === DEFAULT_CONTROLLER_NAME) {\n      window.document.title = 'ECN Viewer'\n      return\n    }\n    window.document.title = controllerName\n  }, [controllerName])\n\n  return (\n    <div className={classes.controllerInfo}>\n      <div className={classes.controllerTitle}>\n        <Typography style={{ width: '100%' }} variant='h5'>\n          <Input className={classes.controllerName} value={controllerName} onChange={updateControllerName} onKeyDown={loseFocus} />\n        </Typography>\n        {controllerError &&\n          <Tooltip title={controllerError.message} aria-label='Error'>\n            <Chip label='The controller is not reachable' style={{ '--color': theme.colors.gold }} className={classes.warningChip} />\n          </Tooltip>}\n      </div>\n      <List>\n        <ListItem>\n          <ListItemIcon><LocationCityIcon /></ListItemIcon>\n          {loading ? <ListItemText><Skeleton /></ListItemText> : <ListItemText primary={`${city}, ${country}`} />}\n        </ListItem>\n        <ListItem style={{ cursor: 'pointer' }} onClick={() => props.selectController()}>\n          <ListItemIcon><GPSFixedIcon /></ListItemIcon>\n          {loading ? <ListItemText><Skeleton /></ListItemText> : <ListItemText primary={`${lat}, ${lon}`} />}\n        </ListItem>\n        <ListItem>\n          <ListItemIcon><IPIcon /></ListItemIcon>\n          {loading ? <ListItemText><Skeleton /></ListItemText> : <ListItemText primary={query} />}\n        </ListItem>\n      </List>\n    </div>\n  )\n}\n","import React from 'react'\n\nimport { Typography, Paper } from '@material-ui/core'\n\nimport { makeStyles } from '@material-ui/styles'\nconst useStyles = makeStyles({\n  summary: {\n    display: 'grid',\n    gridTemplateColumns: 'repeat(3, 1fr)',\n    gridColumnGap: '15px',\n    textAlign: 'center'\n  }\n})\n\nexport default function ActiveResources (props) {\n  const classes = useStyles()\n  const { activeFlows, activeAgents, activeMsvcs, loading } = props\n  return (\n    <div>\n      <Typography variant='h5'>Active resources</Typography>\n      <br />\n      <div className={classes.summary}>\n        <Paper>\n          <Typography variant='h3'>{loading ? 0 : activeFlows.length}</Typography>\n          <Typography variant='subtitle1'>Applications</Typography>\n        </Paper>\n        <Paper>\n          <Typography variant='h3'>{loading ? 0 : activeAgents.length}</Typography>\n          <Typography variant='subtitle1'>Agents</Typography>\n        </Paper>\n        <Paper>\n          <Typography variant='h3'>{loading ? 0 : activeMsvcs.length}</Typography>\n          <Typography variant='subtitle1'>Microservices</Typography>\n        </Paper>\n      </div>\n    </div>\n  )\n}\n","import React from 'react'\nimport { ThemeProvider } from '@material-ui/styles'\nimport { createMuiTheme } from '@material-ui/core/styles'\n\nimport customTheme from './theme.json'\n\nconst colors = {\n  phosphorus: '#FF585D',\n  cobalt: '#5064EC',\n  gold: '#F5A623',\n  chromium: '#00C0A9',\n  argon: '#7A3BFF',\n  carbon: '#002E43',\n  lead: '#57687D',\n  aluminium: '#ACB5C6',\n  silver: '#FAFCFF',\n  white: '#FFFFFF'\n}\n\nexport const theme = createMuiTheme({\n  ...customTheme,\n  colors: {\n    ...colors,\n    success: colors.chromium,\n    error: colors.phosphorus,\n    danger: colors.gold\n  }\n})\n\nexport default function Theming (props) {\n  return (\n    <ThemeProvider theme={theme}>\n      {props.children}\n    </ThemeProvider>\n  )\n}\n","import { theme } from '../Theme/ThemeProvider'\n\nexport const statusColor = {\n  RUNNING: theme.colors.chromium,\n  UNKNOWN: theme.colors.aluminium,\n  OFFLINE: theme.colors.phosphorus\n}\n\nexport const msvcStatusColor = {\n  RUNNING: theme.colors.chromium,\n  UNKNOWN: theme.colors.aluminium,\n  OFFLINE: theme.colors.aluminium\n}\n\nexport const tagColor = theme.colors.cobalt\n","import React from 'react'\nimport { Modal, Paper, Typography, Button } from '@material-ui/core'\nimport CloseIcon from '@material-ui/icons/Close'\n\nimport { makeStyles } from '@material-ui/styles'\nconst useStyles = makeStyles(theme => ({\n  modalTitle: {\n    backgroundColor: theme.colors.carbon,\n    borderRadius: '4px 4px 0 0',\n    color: 'white',\n    padding: '5px',\n    display: 'flex',\n    justifyContent: 'space-between'\n  },\n  modal: {\n    width: '60%',\n    top: '15%',\n    left: '20%',\n    position: 'absolute',\n    borderRadius: '4px'\n  },\n  modalContent: {\n    maxHeight: '600px',\n    overflowY: 'scroll',\n    padding: '15px'\n  },\n  modalActions: {\n    display: 'flex',\n    backgroundColor: theme.colors.silver,\n    alignItems: 'flex-end'\n  },\n  modalAction: {\n    marginLeft: '5px'\n  }\n}))\n\nexport default function _Modal (props) {\n  const classes = useStyles()\n  const { title, open, onClose } = props\n  return (\n    <Modal\n      aria-labelledby={`${title} modal`}\n      {...{\n        open,\n        onClose\n      }}\n    >\n      <Paper className={classes.modal}>\n        <div className={classes.modalTitle}>\n          <Typography variant='h5'>{title}</Typography>\n          <CloseIcon style={{ cursor: 'pointer' }} onClick={onClose} />\n        </div>\n        <div className={classes.modalContent}>\n          {props.children}\n        </div>\n        {props.actions && !!props.actions.length &&\n          <div className={classes.modalActions}>\n            {props.actions.map(a => <Button key={a.text} className={`${a.className} ${classes.modalAction}`} {...{ variant: a.variant, onClick: a.onClick }}>{a.text}</Button>)}\n          </div>}\n      </Paper>\n    </Modal>\n  )\n}\n","import React from 'react'\nimport IconButton from '@material-ui/core/IconButton'\nimport WarningIcon from '@material-ui/icons/Warning'\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle'\nimport ErrorIcon from '@material-ui/icons/Error'\nimport InfoIcon from '@material-ui/icons/Info'\nimport CloseIcon from '@material-ui/icons/Close'\nimport { makeStyles } from '@material-ui/core/styles'\nimport { SnackbarContent } from '@material-ui/core'\n\nconst variantIcon = {\n  success: CheckCircleIcon,\n  warning: WarningIcon,\n  error: ErrorIcon,\n  info: InfoIcon\n}\n\nconst useStyles = makeStyles(theme => ({\n  success: {\n    backgroundColor: theme.colors.success\n  },\n  error: {\n    backgroundColor: theme.colors.error\n  },\n  info: {\n    backgroundColor: theme.colors.cobalt\n  },\n  warning: {\n    backgroundColor: theme.colors.danger\n  },\n  icon: {\n    fontSize: 20\n  },\n  iconVariant: {\n    opacity: 0.9,\n    marginRight: theme.spacing(1)\n  },\n  message: {\n    display: 'flex',\n    alignItems: 'center'\n  },\n  alert: {\n    margin: '5px',\n    borderRadius: '4px',\n    boxShadow: `0 4px 6px 0 ${theme.colors.carbon}`\n  },\n  container: {\n    display: 'flex',\n    flexDirection: 'column',\n    position: 'fixed',\n    bottom: '10px',\n    left: '10px',\n    zIndex: '9999'\n  }\n}))\n\nexport default function Alert (props) {\n  const classes = useStyles()\n  const { open, alerts } = props\n\n  return open ? (\n    <div className={classes.container}>\n      {alerts.map((a, idx) => {\n        const handleClick = a.onClose\n        const variantKey = a.type || 'info'\n        const Icon = variantIcon[variantKey]\n        return (\n          <SnackbarContent\n            key={a.key || a.id || idx}\n            className={`${classes[variantKey]} ${classes.alert} ${a.className}`}\n            aria-describedby='client-snackbar'\n            message={\n              <span id='client-snackbar' className={classes.message}>\n                <Icon className={`${classes.icon} ${classes.iconVariant}`} />\n                {a.message}\n              </span>\n            }\n            action={[\n              <IconButton key='close' aria-label='Close' color='inherit' onClick={handleClick}>\n                <CloseIcon className={classes.icon} />\n              </IconButton>\n            ]}\n          />\n        )\n      })}\n    </div>\n  ) : null\n}\n","import React from 'react'\nimport { findIndex } from 'lodash'\nimport Alert from './Alert'\n\nexport const FeedbackContext = React.createContext({\n  feedbacks: [],\n  setFeedbacks: () => {},\n  pushFeedback: () => {}\n})\n\nexport const useFeedback = () => React.useContext(FeedbackContext)\n\nconst AUTO_HIDE = 6000\n\nconst actions = {\n  ADD: 'add',\n  REMOVE: 'remove',\n  SET: 'set'\n}\n\nconst initState = {\n  feedbacks: [],\n  nextId: 0\n}\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case actions.ADD:\n      return {\n        feedbacks: [...state.feedbacks,\n          {\n            ...action.data,\n            timeout: setTimeout(() => {\n              action.dispatch({ type: actions.REMOVE, data: { id: state.nextId } })\n            }, AUTO_HIDE),\n            id: state.nextId\n          }],\n        nextId: state.nextId + 1\n      }\n    case actions.REMOVE: {\n      const idxToRemove = findIndex(state.feedbacks, f => f.id === action.data.id)\n      if (idxToRemove === -1) return state\n      return {\n        ...state,\n        feedbacks: [...state.feedbacks.slice(0, idxToRemove), ...state.feedbacks.slice(idxToRemove + 1)]\n      }\n    }\n    case actions.SET:\n      return {\n        ...state,\n        feedbacks: action.data\n      }\n    default:\n      return state\n  }\n}\n\nexport default function Context (props) {\n  const [state, dispatch] = React.useReducer(reducer, initState)\n  const setFeedbacks = (newFeedbacks) => {\n    console.log(' ---> SetFeedbacks ')\n    dispatch({ type: actions.SET, data: newFeedbacks })\n  }\n  const pushFeedback = (newFeedback) => {\n    console.log(' ---> pushFeedback ')\n    dispatch({ type: actions.ADD, data: newFeedback, dispatch })\n    // Update current feedback array (same array will be used if multiple calls to pushFeedback in the same render loop)\n    state.feedbacks.push(newFeedback)\n  }\n\n  console.log('======> Updating feedback context')\n\n  return (\n    <FeedbackContext.Provider value={{ feedbacks: state.feedbacks, setFeedbacks, pushFeedback }}>\n      {props.children}\n      <FeedbackContext.Consumer>\n        {({ feedbacks, setFeedbacks }) =>\n          <Alert\n            open={!!feedbacks.length}\n            alerts={feedbacks.map((f, idx) => ({\n              ...f,\n              onClose: () => dispatch({ type: actions.REMOVE, data: f })\n            }))}\n          />}\n      </FeedbackContext.Consumer>\n    </FeedbackContext.Provider>\n  )\n}\n","import React, { useEffect } from 'react'\n\nimport controllerJson from './controller.json'\n\nconst initControllerState = (() => {\n  const localUser = window.localStorage.getItem('iofogUser')\n  if (localUser) {\n    controllerJson.user = JSON.parse(localUser)\n  }\n  return {\n    ...controllerJson,\n    api: `${window.location.protocol}//${controllerJson.ip}:${controllerJson.port || 80}/`,\n    location: {\n      lat: 'Unknown',\n      lon: 'Unknown',\n      query: controllerJson.ip\n    },\n    status: {\n      versions: {\n        controller: '',\n        ecnViewer: ''\n      }\n    }\n  }\n})()\n\nconst IPLookUp = 'http://ip-api.com/json/'\n\n// If dev mode, use proxy\n// Otherwise assume you are running on the Controller\nconst getUrl = (path) => controllerJson.dev ? `/api/controllerApi${path}` : `${window.location.protocol}//${[window.location.hostname, controllerJson.port].join(':')}${path}`\nconst getHeaders = (headers, controllerConfig) => controllerJson.dev\n  ? ({\n    ...headers,\n    'ECN-Api-Destination': controllerConfig.api\n  }) : headers\n\nexport const ControllerContext = React.createContext({\n  controller: {\n    status: {}\n  },\n  updateController: () => {}\n})\n\nexport const useController = () => React.useContext(ControllerContext)\n\nconst lookUpControllerInfo = async (controllerConfig) => {\n  if (!controllerConfig.ip) {\n    controllerConfig.ip = window.location.host.split(':')[0] // Get only ip, not port\n  }\n  const localhost = new RegExp('(0\\.0\\.0\\.0|localhost|127\\.0\\.0\\.1|192\\.168\\.)') // eslint-disable-line no-useless-escape\n  const ip = localhost.test(controllerConfig.ip) ? '8.8.8.8' : controllerConfig.ip\n  const response = await window.fetch(IPLookUp + ip)\n  if (response.ok) {\n    return response.json()\n  } else {\n    throw new Error(response.statusText)\n  }\n}\n\nconst getControllerStatus = async (controllerConfig) => {\n  const response = await await window.fetch(getUrl('/api/v3/status'), {\n    headers: getHeaders({}, controllerConfig)\n  })\n  if (response.ok) {\n    return response.json()\n  } else {\n    throw new Error(response.statusText)\n  }\n}\n\nconst updateControllerInfo = async (controllerConfig) => {\n  let ipInfo = {}\n  try {\n    ipInfo = await lookUpControllerInfo(controllerConfig)\n  } catch (e) {\n    ipInfo = {\n      lat: 'Unknown',\n      lon: 'Unknown',\n      query: controllerConfig.ip\n    }\n  }\n\n  return {\n    ...controllerConfig,\n    location: ipInfo,\n    status: await getControllerStatus(controllerConfig)\n  }\n}\n\nconst initState = {\n  controller: initControllerState,\n  token: null\n}\n\nconst actions = {\n  ERROR: 'Error',\n  CLEAN_ERROR: 'Clean error',\n  UPDATE: 'Update',\n  SET_TOKEN: 'Set token'\n}\n\nconst reducer = (state, action) => {\n  console.log({ state, action })\n  const newState = (() => {\n    switch (action.type) {\n      case actions.ERROR:\n        return {\n          ...state,\n          controller: {\n            ...state.controller,\n            error: action.data\n          }\n        }\n      case actions.CLEAN_ERROR:\n        return {\n          ...state,\n          controller: {\n            ...state.controller,\n            error: null\n          }\n        }\n      case actions.UPDATE:\n        return {\n          ...state,\n          controller: {\n            ...state.controller,\n            ...action.data\n          }\n        }\n      case actions.SET_TOKEN:\n        return {\n          ...state,\n          token: action.data,\n          controller: {\n            ...state.controller,\n            error: null\n          }\n        }\n      default:\n        return state\n    }\n  })()\n  newState.controller.dev = controllerJson.dev\n  return newState\n}\n\nexport default function Context (props) {\n  const [state, dispatch] = React.useReducer(reducer, initState)\n  const { token, controller } = state\n\n  const authenticate = async (controllerConfig) => {\n    const response = await window.fetch(getUrl('/api/v3/user/login'), {\n      method: 'POST',\n      headers: getHeaders({\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      }, controllerConfig),\n      body: JSON.stringify(controllerConfig.user)\n    })\n    if (response.ok) {\n      const token = (await response.json()).accessToken\n      dispatch({ type: actions.SET_TOKEN, data: token })\n      return token\n    } else {\n      dispatch({ type: actions.SET_TOKEN, data: null })\n      throw new Error(response.statusText)\n    }\n  }\n\n  // Wrapper around window.fetch to add proxy and authorization headers\n  const request = async (path, options = {}) => {\n    try {\n      let t = token\n      if (!t) {\n        t = await authenticate(controller)\n      }\n      const response = await window.fetch(getUrl(path), {\n        ...options,\n        headers: getHeaders({\n          ...options.headers,\n          Authorization: t\n        }, controller)\n      })\n      if (state.controller.error) {\n        dispatch({ type: actions.CLEAN_ERROR })\n      }\n      return response\n    } catch (err) {\n      dispatch({ type: actions.ERROR, data: err })\n      return ({\n        ok: false,\n        statusText: err.message || 'Could not reach controller'\n      })\n    }\n  }\n\n  const updateController = async (newController) => {\n    if (controllerJson.dev) { newController.api = `http://${newController.ip}:${newController.port || 80}/` }\n    window.localStorage.setItem('iofogUser', JSON.stringify(newController.user))\n    try {\n      await authenticate(newController)\n    } catch (e) {\n      dispatch({ type: actions.ERROR, data: e })\n      dispatch({ type: actions.UPDATE, data: await updateControllerInfo(newController) })\n      throw e\n    }\n    dispatch({ type: actions.UPDATE, data: await updateControllerInfo(newController) })\n  }\n\n  useEffect(() => {\n    const effect = async () => {\n      dispatch({ type: actions.UPDATE, data: await updateControllerInfo(initState.controller) })\n    }\n    effect()\n  }, [])\n\n  return (\n    <ControllerContext.Provider value={{ controller, updateController, request }}>\n      {props.children}\n    </ControllerContext.Provider>\n  )\n}\n","import React from 'react'\n\nimport { Divider, TextField, Grid, Button } from '@material-ui/core'\nimport { FeedbackContext } from '../../Utils/FeedbackContext'\n\nimport { makeStyles } from '@material-ui/styles'\nimport { ControllerContext } from '../../ControllerProvider'\nconst useStyles = makeStyles({\n  divider: {\n    margin: '5px'\n  }\n})\n\nconst initNode = {\n  name: '',\n  ip: '',\n  key: '',\n  port: 54321\n}\n\nconst newError = (message) => ({ message })\n\nexport default function ConnectNode (props) {\n  const classes = useStyles()\n  const [node, setNode] = React.useState({ ...initNode })\n  const { pushFeedback } = React.useContext(FeedbackContext)\n  const { request } = React.useContext(ControllerContext)\n\n  const handleChange = key => (event) => {\n    setNode({ ...node, [key]: event.target.value })\n  }\n\n  const createAgent = async (agent) => {\n    const response = await request('/api/v3/iofog', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(agent)\n    })\n    if (response.ok) {\n      pushFeedback({ message: 'ioFog created!', type: 'success' })\n      const a = await response.json()\n      return a.uuid\n    }\n    throw (newError(`Failed to create iofog: ${response.statusText}`))\n  }\n\n  const getProvisioningKey = async (uuid) => {\n    const response = await request(`/api/v3/iofog/${uuid}/provisioning-key`)\n    if (response.ok) {\n      const a = await response.json()\n      return a.key\n    }\n    throw (newError(`Failed to retrieve provisioning key: ${response.statusText}`))\n  }\n\n  const linkAgent = async (agent, controller) => {\n    const response = await window.fetch('api/agentApi/v2/config', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n        Authorization: agent.key,\n        ioFogApi: `http://${agent.ip}:${agent.port}`\n      },\n      body: JSON.stringify({ 'controller-url': `http://${controller.ip}:${controller.port}/api/v3/` })\n    })\n    if (response.ok) {\n      pushFeedback({ message: 'Agent linked!', type: 'success' })\n      return true\n    }\n    throw (newError(`Failed to link agent: ${response.statusText}`))\n  }\n\n  const provisionAgent = async (agent, key) => {\n    const response = await window.fetch('api/agentApi/v2/provision', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json',\n        Authorization: agent.key,\n        ioFogApi: `http://${agent.ip}:${agent.port}`\n      },\n      body: JSON.stringify({ 'provisioning-key': key })\n    })\n    if (response.ok) {\n      pushFeedback({ message: 'Agent provisioned!', type: 'success' })\n      return true\n    }\n    throw (newError(`Failed to provision agent: ${response.statusText}`))\n  }\n\n  const connect = async () => {\n    try {\n      const iofogUuid = await createAgent({ name: node.name, fogType: 0 })\n      const provisioningKey = await getProvisioningKey(iofogUuid)\n      await linkAgent(node, props.controller)\n      await provisionAgent(node, provisioningKey)\n      pushFeedback({ message: 'Agent connected!', type: 'success' })\n    } catch (e) {\n      pushFeedback({ message: e.message, type: 'error', uuid: 'error' })\n    }\n  }\n\n  return (\n    <>\n      <Grid container spacing={2}>\n        <Grid item xs={12} sm={6}>\n          <TextField\n            id='name'\n            label='Name'\n            onChange={handleChange('name')}\n            value={node.name}\n            fullWidth\n            className={classes.textField}\n            margin='normal'\n          />\n        </Grid>\n        <Grid item xs={6} sm={3}>\n          <TextField\n            id='ip'\n            label='IP'\n            onChange={handleChange('ip')}\n            value={node.ip}\n            fullWidth\n            className={classes.textField}\n            margin='normal'\n          />\n        </Grid>\n        <Grid item xs={6} sm={3}>\n          <TextField\n            id='port'\n            label='Port'\n            onChange={handleChange('port')}\n            value={node.port}\n            fullWidth\n            type='number'\n            className={classes.textField}\n            margin='normal'\n          />\n        </Grid>\n        <Grid item xs={12}>\n          <TextField\n            id='key'\n            label='Authorization key'\n            onChange={handleChange('key')}\n            value={node.key}\n            fullWidth\n            className={classes.textField}\n            margin='normal'\n            helperText='Authorization key can be found in /etc/iofog-agent/local-api file'\n          />\n        </Grid>\n      </Grid>\n      <Divider className={classes.divider} />\n      <Grid container justify='flex-end'>\n        <Grid item>\n          <Button onClick={connect}>\n            Connect\n          </Button>\n        </Grid>\n      </Grid>\n    </>\n  )\n}\n","import React from 'react'\nimport Downshift from 'downshift'\nimport deburr from 'lodash/deburr'\nimport get from 'lodash/get'\nimport { MenuItem, Paper, TextField } from '@material-ui/core'\nimport { makeStyles } from '@material-ui/core/styles'\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1,\n    height: 250\n  },\n  container: {\n    flexGrow: 1,\n    position: 'relative'\n  },\n  paper: {\n    position: 'absolute',\n    zIndex: 1,\n    marginTop: theme.spacing(1),\n    marginBot: theme.spacing(2),\n    left: 0,\n    right: 0,\n    maxHeight: '250px',\n    overflowY: 'scroll'\n  },\n  chip: {\n    margin: theme.spacing(0.5, 0.25)\n  },\n  inputRoot: {\n    flexWrap: 'wrap'\n  },\n  inputInput: {\n    width: 'auto',\n    flexGrow: 1\n  },\n  divider: {\n    height: theme.spacing(2)\n  }\n}))\n\nfunction renderInput (inputProps) {\n  const { InputProps, classes, ref, ...others } = inputProps\n  return (\n    <TextField\n      InputProps={{\n        inputRef: ref,\n        classes: {\n          root: classes.inputRoot,\n          input: classes.inputInput\n        },\n        ...InputProps\n      }}\n      {...others}\n    />\n  )\n}\n\nfunction renderSuggestion (suggestionProps) {\n  const { suggestion, index, itemProps, highlightedIndex, selectedItem } = suggestionProps\n  const isHighlighted = highlightedIndex === index\n  const isSelected = (selectedItem || {}).label === suggestion.label\n\n  return (\n    <MenuItem\n      {...itemProps}\n      key={suggestion.label}\n      selected={isHighlighted}\n      component='div'\n      style={{\n        fontWeight: isSelected ? 500 : 400\n      }}\n    >\n      {suggestion.label}\n    </MenuItem>\n  )\n}\n\nexport default function Autocomplete (props) {\n  const classes = useStyles()\n\n  const getSuggestions = (value, { showEmpty = false } = {}) => {\n    const inputValue = deburr(value.trim()).toLowerCase()\n    const inputLength = inputValue.length\n    let count = 0\n\n    return inputLength === 0 && !showEmpty\n      ? []\n      : props.suggestions.filter(suggestion => {\n        const keep = count < props.maxSuggestions && suggestion.label.toLowerCase().startsWith(inputValue.toLowerCase())\n        if (keep) {\n          count += 1\n        }\n        return keep\n      })\n  }\n\n  return (\n    <Downshift\n      itemToString={item => get(item, 'label', '')}\n      onChange={props.onChange}\n      initialSelectedItem={props.initialSelectedItem}\n      {...(props.selectedItem ? { selectedItem: props.selectedItem } : {})}\n      id='downshift-options'\n    >\n      {({\n        clearSelection,\n        getInputProps,\n        getItemProps,\n        getLabelProps,\n        getMenuProps,\n        highlightedIndex,\n        inputValue,\n        isOpen,\n        openMenu,\n        selectedItem\n      }) => {\n        const { onBlur, onChange, onFocus, ...inputProps } = getInputProps({\n          onChange: event => {\n            if (event.target.value === '') {\n              clearSelection()\n            }\n          },\n          onFocus: openMenu,\n          disabled: props.disabled || false,\n          placeholder: props.placeholder || ''\n        })\n\n        return (\n          <div className={classes.container}>\n            {renderInput({\n              fullWidth: true,\n              classes,\n              label: props.label,\n              InputLabelProps: getLabelProps({ shrink: true }),\n              InputProps: { onBlur, onChange, onFocus },\n              inputProps\n            })}\n\n            <div {...getMenuProps()}>\n              {isOpen ? (\n                <Paper className={classes.paper} square>\n                  {getSuggestions(inputValue, { showEmpty: true }).map((suggestion, index) =>\n                    renderSuggestion({\n                      suggestion,\n                      index,\n                      itemProps: getItemProps({ item: suggestion }),\n                      highlightedIndex,\n                      selectedItem\n                    })\n                  )}\n                </Paper>\n              ) : null}\n            </div>\n          </div>\n        )\n      }}\n    </Downshift>\n  )\n}\n","import React from 'react'\nimport ReactJson from 'react-json-view'\nimport get from 'lodash/get'\n\nimport { Grid, Paper, Typography, TextField, Divider, Select, Input, Button, InputLabel, FormControl, FormControlLabel, Checkbox, MenuItem } from '@material-ui/core'\nimport CloseIcon from '@material-ui/icons/Close'\nimport SwapIcon from '@material-ui/icons/SwapHoriz'\n\nimport Autocomplete from '../../Utils/Autocomplete'\n\nimport { makeStyles } from '@material-ui/styles'\nimport { FeedbackContext } from '../../Utils/FeedbackContext'\nimport { ControllerContext } from '../../ControllerProvider'\n\nconst useStyles = makeStyles({\n  divider: {\n    margin: '5px'\n  },\n  formControl: {\n    width: '100%'\n  },\n  rowIcon: {\n    display: 'flex',\n    justifyContent: 'space-around'\n  },\n  newPaper: {\n    border: '1px solid hsla(0, 0%, 0%, 0.2)',\n    boxShadow: '0 4px 6px 0 hsla(0,0%,0%,0.2)',\n    borderRadius: '4px',\n    padding: '10px',\n    marginTop: '10px'\n  },\n  inputWithIcon: { display: 'flex', alignItems: 'baseline', justifyContent: 'space-between' }\n})\n\nconst ITEM_HEIGHT = 48\nconst ITEM_PADDING_TOP = 8\nconst MenuProps = {\n  PaperProps: {\n    style: {\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n      width: 250\n    }\n  }\n}\n\nconst initMsvc = {\n  flow: {},\n  name: '',\n  catalog: {\n    images: []\n  },\n  volumeMappings: [],\n  ports: [],\n  rootHostAccess: false,\n  _new: true\n}\n\nconst initFlow = {\n  name: '',\n  isActivated: true\n}\n\nconst initCatalogItem = (fogTypeId) => ({\n  name: '',\n  images: [{\n    containerImage: '',\n    fogTypeId\n  }],\n  registryId: 1\n})\n\nconst initRoute = (from) => ({\n  from,\n  to: {}\n})\n\nconst randomString = () => Math.random().toString(36).replace(/[^a-z]+/g, '').substr(0, 5)\n\nconst generateRouteSelect = (current, list, label, onChange) => {\n  const isNewMsvc = get(current, '_new', false)\n  return (\n    <Autocomplete\n      label={label}\n      placeholder='Select a microservice'\n      onChange={onChange}\n      disabled={isNewMsvc}\n      selectedItem={isNewMsvc ? list[list.length - 1] : current}\n      maxSuggestions={20}\n      suggestions={list.filter(e => !isNewMsvc ? !!e.uuid : true).map(m => ({\n        ...m,\n        label: m.name\n      }))}\n    />\n  )\n}\n\nexport default function AddMicroservice (props) {\n  const classes = useStyles()\n  const [flows, setFlows] = React.useState([])\n  const [catalog, setCatalog] = React.useState([])\n  // Due to polling, the component is re-rendering every 3 sec.\n  // To avoid JSON edit popups to be closed every 3 sec,\n  // we need to keep the config and the JSX ReactJson component as ref\n  const config = React.useRef({})\n  const ReactJsonRef = React.useRef(\n    <ReactJson src={config.current} name={false} onAdd={(e) => { config.current = e.updated_src }} onEdit={(e) => { config.current = e.updated_src }} onDelete={(e) => { config.current = e.updated_src }} />\n  )\n  const [msvc, setMsvc] = React.useState(initMsvc)\n  const [newFlow, setNewFlow] = React.useState(initFlow)\n  const [newCatalogItem, setNewCatalogItem] = React.useState(() => initCatalogItem(get(props, 'target.fogTypeId', 1)))\n  const [routes, setRoutes] = React.useState([])\n\n  const agent = props.target\n  const { pushFeedback } = React.useContext(FeedbackContext)\n  const { request } = React.useContext(ControllerContext)\n\n  React.useEffect(() => {\n    Promise.all([(async () => {\n      const flowRaw = await request('/api/v3/flow')\n      if (flowRaw.ok) {\n        const flowsRes = await flowRaw.json()\n        setFlows(flowsRes.flows)\n      }\n    })(), (async () => {\n      const catalogRaw = await request('/api/v3/catalog/microservices')\n      if (catalogRaw.ok) {\n        const catalogRes = await catalogRaw.json()\n        setCatalog(catalogRes.catalogItems.filter(item => {\n          for (const img of item.images) {\n            if (img.fogTypeId === agent.fogTypeId) { return true }\n          }\n          return false\n        })) // TODO: filter per userId\n      }\n    })()])\n  }, [agent.fogTypeId, request])\n\n  const handleChange = (key, setter, prevState) => e => setter({ ...prevState, [key]: e.target.value })\n  const handleMsvcChangeArray = (key, objKey, idx, valueDecorator = x => x) => e => setMsvc({\n    ...msvc,\n    [key]: [\n      ...msvc[key].slice(0, idx),\n      {\n        ...msvc[key][idx],\n        [objKey]: valueDecorator(e.target.value)\n      },\n      ...msvc[key].slice(idx + 1)\n    ]\n  })\n  const getCatalogImage = item => {\n    if (!get(item, 'id', null)) { return 'Select an image' }\n    for (const img of item.images) {\n      if (img.fogTypeId === agent.fogTypeId) { return img.containerImage }\n    }\n    return 'Image not found'\n  }\n\n  const addVolume = () => setMsvc({\n    ...msvc,\n    volumeMappings: [\n      ...msvc.volumeMappings,\n      {\n        hostDestination: '',\n        containerDestination: '',\n        accessMode: 'z'\n      }\n    ]\n  })\n\n  const addPort = () => setMsvc({\n    ...msvc,\n    ports: [\n      ...msvc.ports,\n      {\n        internal: '',\n        external: ''\n      }\n    ]\n  })\n\n  const removeFromArray = (key, idx) => setMsvc({\n    ...msvc,\n    [key]: [...msvc[key].slice(0, idx), ...msvc[key].slice(idx + 1)]\n  })\n\n  const addMsvc = async () => {\n    try {\n      const { name, ports, volumeMappings, rootHostAccess } = msvc\n      const response = await request('/api/v3/microservices', {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify({\n          config: JSON.stringify(config.current),\n          name,\n          ports,\n          volumeMappings,\n          rootHostAccess,\n          flowId: msvc.flow.id,\n          iofogUuid: agent.uuid,\n          catalogItemId: msvc.catalog.id\n        })\n      })\n      if (response.ok) {\n        pushFeedback({ message: 'Microservice added!', type: 'success' })\n        const m = await response.json()\n        setMsvc(initMsvc)\n        return m.uuid\n      } else {\n        pushFeedback({ message: response.statusText, type: 'error' })\n      }\n    } catch (e) {\n      pushFeedback({ message: e.message })\n    }\n  }\n\n  const createFlow = async () => {\n    try {\n      const { name } = newFlow\n      const response = await request('/api/v3/flow', {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(newFlow)\n      })\n      if (response.ok) {\n        pushFeedback({ message: 'Flow created!', type: 'success' })\n        setNewFlow(initFlow)\n        const flow = { ...await response.json(), name }\n        setMsvc({ ...msvc, flow })\n        msvc.flow = flow\n        return true\n      } else {\n        pushFeedback({ message: response.statusText, type: 'error' })\n        return false\n      }\n    } catch (e) {\n      pushFeedback({ message: e.message })\n      return false\n    }\n  }\n\n  const createCatalogItem = async () => {\n    try {\n      const catalogItem = {\n        ...newCatalogItem,\n        name: randomString()\n      }\n      const response = await request('/api/v3/catalog/microservices', {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: JSON.stringify(catalogItem)\n      })\n      if (response.ok) {\n        pushFeedback({ message: 'Image added to catalog!', type: 'success' })\n        setNewCatalogItem(initCatalogItem(agent.fogTypeId))\n        const catalog = { ...await response.json(), ...catalogItem }\n        setMsvc({ ...msvc, catalog })\n        msvc.catalog = catalog\n        return true\n      } else {\n        pushFeedback({ message: response.statusText, type: 'error' })\n        return false\n      }\n    } catch (e) {\n      pushFeedback({ message: e.message })\n      return false\n    }\n  }\n\n  const createRoute = async (route) => {\n    try {\n      const from = get(route, 'from.uuid')\n      const to = get(route, 'to.uuid')\n      const response = await request(`/api/v3/microservices/${from}/routes/${to}`, {\n        method: 'POST',\n        headers: {\n          Accept: 'application/json',\n          'Content-Type': 'application/json'\n        },\n        body: ''\n      })\n      if (response.ok) {\n        pushFeedback({ message: `Route from ${route.from.name} to ${route.to.name} created !`, type: 'success' })\n        return true\n      } else {\n        pushFeedback({ message: response.statusText, type: 'error' })\n        return false\n      }\n    } catch (e) {\n      pushFeedback({ message: e.message })\n      return false\n    }\n  }\n\n  const createRoutes = async (defaultUuid) => {\n    for (const route of routes) {\n      if (!route.from.uuid) {\n        route.from.uuid = defaultUuid\n      }\n      if (!route.to.uuid) {\n        route.to.uuid = defaultUuid\n      }\n      await createRoute(route)\n    }\n  }\n\n  const createMsvc = async () => {\n    let success = true\n    try {\n      if (msvc.flow.id === -1) {\n        success = await createFlow()\n      }\n      if (success && msvc.catalog.id === -1) {\n        success = await createCatalogItem()\n      }\n      if (success) {\n        const uuid = await addMsvc()\n        await createRoutes(uuid)\n        props.onSuccess()\n      }\n    } catch (e) {\n\n    }\n  }\n\n  const routeList = (props.microservices || [])\n    .map(m => ({\n      ...m,\n      label: m.name\n    }))\n    .concat([{\n      ...msvc,\n      label: msvc.name ? msvc.name : '<New microservice>'\n    }])\n\n  return (\n    <>\n      <Grid container spacing={2}>\n        <Grid item xs={12} sm={6}>\n          <FormControl className={classes.formControl}>\n            <Autocomplete\n              label='Flow'\n              placeholder='Select a flow'\n              onChange={(selected, state) => {\n                handleChange('flow', setMsvc, msvc)({ target: { value: selected || {} } })\n              }}\n              maxSuggestions={20}\n              suggestions={flows.map(f => ({\n                ...f,\n                label: f.name\n              })).concat([{\n                id: -1,\n                label: '+ Add a flow'\n              }])}\n            />\n          </FormControl>\n          {msvc.flow.id === -1 &&\n            <Paper className={classes.newPaper}>\n              <Typography variant='subtitle2'>New flow</Typography>\n              <TextField\n                id='name'\n                label='Name'\n                required\n                onChange={handleChange('name', setNewFlow, newFlow)}\n                value={newFlow.name}\n                fullWidth\n                className={classes.textField}\n                margin='normal'\n              />\n              <FormControlLabel\n                style={{ color: 'rgba(0, 0, 0, 0.54)' }}\n                control={\n                  <Checkbox\n                    checked={newFlow.isActivated}\n                    onChange={e => setNewFlow({ ...newFlow, isActivated: e.target.checked })}\n                    value='checkedB'\n                    color='primary'\n                  />\n                }\n                label='Active'\n              />\n            </Paper>}\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <FormControl className={classes.formControl}>\n            <Autocomplete\n              label='Image'\n              placeholder='Select an image'\n              onChange={(selected, state) => {\n                handleChange('catalog', setMsvc, msvc)({ target: { value: selected || {} } })\n              }}\n              maxSuggestions={20}\n              suggestions={catalog.map(m => ({\n                ...m,\n                label: getCatalogImage(m)\n              })).concat([{\n                id: -1,\n                label: '+ Add an image'\n              }])}\n            />\n          </FormControl>\n          {msvc.catalog.id === -1 &&\n            <Paper className={classes.newPaper}>\n              <Typography variant='subtitle2'>New image</Typography>\n              <TextField\n                id='name'\n                label='Name'\n                required\n                onChange={e => setNewCatalogItem({\n                  ...newCatalogItem,\n                  images: [{\n                    ...newCatalogItem.images[0],\n                    containerImage: e.target.value\n                  }]\n                })}\n                value={newCatalogItem.images[0].containerImage}\n                fullWidth\n                className={classes.textField}\n                margin='normal'\n              />\n            </Paper>}\n        </Grid>\n      </Grid>\n      <Grid container spacing={2}>\n        <Grid item xs={12}>\n          <TextField\n            id='name'\n            label='Name'\n            required\n            onChange={handleChange('name', setMsvc, msvc)}\n            value={msvc.name}\n            fullWidth\n            className={classes.textField}\n            margin='normal'\n          />\n        </Grid>\n      </Grid>\n      <Divider className={classes.divider} />\n      <Grid container spacing={2}>\n        <Grid item xs={12}>\n          <Typography style={{ color: 'rgba(0, 0, 0, 0.54)' }} variant='subtitle1'>Configuration</Typography><br />\n          {ReactJsonRef.current}\n        </Grid>\n      </Grid>\n      <Divider className={classes.divider} />\n      <Grid container spacing={2}>\n        <Grid item xs={12}>\n          <Typography style={{ color: 'rgba(0, 0, 0, 0.54)' }} variant='subtitle1'>Volumes</Typography><br />\n          {msvc.volumeMappings.map((v, idx) =>\n            <Grid container spacing={2} key={idx} style={{ alignItems: 'flex-end' }}>\n              <Grid item xs={11}>\n                <Grid container spacing={2}>\n                  <Grid item xs={12} sm={4}>\n                    <TextField\n                      id='host'\n                      label='Host'\n                      required\n                      onChange={handleMsvcChangeArray('volumeMappings', 'hostDestination', idx)}\n                      value={v.hostDestination}\n                      fullWidth\n                      className={classes.textField}\n                      margin='dense'\n                    />\n                  </Grid>\n                  <Grid item xs={12} sm={4}>\n                    <TextField\n                      id='Container'\n                      label='Container'\n                      required\n                      onChange={handleMsvcChangeArray('volumeMappings', 'containerDestination', idx)}\n                      value={v.containerDestination}\n                      fullWidth\n                      className={classes.textField}\n                      margin='dense'\n                    />\n                  </Grid>\n                  <Grid item xs={12} sm={4}>\n                    <FormControl className={classes.formControl} style={{ marginTop: '5px' }}>\n                      <InputLabel htmlFor='select-flow'>Access mode</InputLabel>\n                      <Select\n                        required\n                        value={v.accessMode}\n                        onChange={handleMsvcChangeArray('volumeMappings', 'accessMode', idx)}\n                        input={<Input id='select-flow-input' />}\n                        MenuProps={MenuProps}\n                      >\n                        <MenuItem value='z'>Z</MenuItem>\n                      </Select>\n                    </FormControl>\n                  </Grid>\n                </Grid>\n              </Grid>\n              <Grid item xs={1} className={classes.rowIcon}>\n                <CloseIcon style={{ cursor: 'pointer' }} onClick={() => removeFromArray('volumeMappings', idx)} />\n              </Grid>\n            </Grid>\n          )}\n          <Typography style={{ color: 'rgba(0, 0, 0, 0.54)', cursor: 'pointer' }} variant='caption' onClick={() => addVolume()}>+ Add</Typography>\n        </Grid>\n      </Grid>\n      <Divider className={classes.divider} />\n      <Grid container spacing={2}>\n        <Grid item xs={12}>\n          <Typography style={{ color: 'rgba(0, 0, 0, 0.54)' }} variant='subtitle1'>Ports</Typography><br />\n          {msvc.ports.map((p, idx) =>\n            <Grid container spacing={2} key={idx} style={{ alignItems: 'flex-end' }}>\n              <Grid item xs={11}>\n                <Grid container spacing={2}>\n                  <Grid item xs={12} sm={6}>\n                    <TextField\n                      id='host'\n                      label='External'\n                      required\n                      type='number'\n                      onChange={handleMsvcChangeArray('ports', 'external', idx, parseInt)}\n                      value={p.external}\n                      fullWidth\n                      className={classes.textField}\n                      margin='dense'\n                    />\n                  </Grid>\n                  <Grid item xs={12} sm={6}>\n                    <TextField\n                      id='Container'\n                      label='Internal'\n                      required\n                      fullWidth\n                      type='number'\n                      onChange={handleMsvcChangeArray('ports', 'internal', idx, parseInt)}\n                      value={p.internal}\n                      className={classes.textField}\n                      margin='dense'\n                    />\n                  </Grid>\n                </Grid>\n              </Grid>\n              <Grid item xs={1} className={classes.rowIcon}>\n                <CloseIcon style={{ cursor: 'pointer' }} onClick={() => removeFromArray('ports', idx)} />\n              </Grid>\n            </Grid>\n          )}\n          <Typography style={{ color: 'rgba(0, 0, 0, 0.54)', cursor: 'pointer' }} variant='caption' onClick={() => addPort()}>+ Add</Typography>\n        </Grid>\n      </Grid>\n      <Divider className={classes.divider} />\n      <Grid container spacing={2}>\n        <Grid item xs={12}>\n          <Typography style={{ color: 'rgba(0, 0, 0, 0.54)' }} variant='subtitle1'>Routes</Typography><br />\n          {routes.map((r, idx) =>\n            <Grid container spacing={2} key={idx} style={{ alignItems: 'flex-end' }}>\n              <Grid item xs={11}>\n                <Grid container spacing={2} style={{ alignItems: 'flex-end' }}>\n                  <Grid item xs={12} sm={5}>\n                    {generateRouteSelect(r.from, routeList, 'From', selected => setRoutes([\n                      ...routes.slice(0, idx),\n                      {\n                        ...r,\n                        from: selected || {}\n                      },\n                      ...routes.slice(idx + 1)\n                    ]))}\n                  </Grid>\n                  <Grid item xs={2} className={classes.rowIcon}>\n                    <SwapIcon\n                      style={{ cursor: 'pointer' }} onClick={() => setRoutes([\n                        ...routes.slice(0, idx),\n                        {\n                          ...r,\n                          from: r.to,\n                          to: r.from\n                        },\n                        ...routes.slice(idx + 1)\n                      ])}\n                    />\n                  </Grid>\n                  <Grid item xs={12} sm={5}>\n                    {generateRouteSelect(r.to, routeList, 'To', selected => setRoutes([\n                      ...routes.slice(0, idx),\n                      {\n                        ...r,\n                        to: selected || {}\n                      },\n                      ...routes.slice(idx + 1)\n                    ]))}\n                  </Grid>\n                </Grid>\n              </Grid>\n              <Grid item xs={1} className={classes.rowIcon}>\n                <CloseIcon style={{ cursor: 'pointer' }} onClick={() => setRoutes([...routes.slice(0, idx), ...routes.slice(idx + 1)])} />\n              </Grid>\n            </Grid>\n          )}\n          <Typography style={{ color: 'rgba(0, 0, 0, 0.54)', cursor: 'pointer' }} variant='caption' onClick={() => setRoutes([...routes, initRoute(msvc)])}>+ Add</Typography>\n        </Grid>\n      </Grid>\n      <Divider className={classes.divider} />\n      <FormControlLabel\n        style={{ color: 'rgba(0, 0, 0, 0.54)' }}\n        control={\n          <Checkbox\n            checked={msvc.rootHostAccess}\n            onChange={e => setMsvc({ ...msvc, rootHostAccess: e.target.checked })}\n            value='checkedB'\n            color='primary'\n          />\n        }\n        label='Root host access'\n      />\n      <Divider className={classes.divider} />\n      <Grid container justify='flex-end'>\n        <Grid item>\n          <Button onClick={createMsvc}>\n            Add\n          </Button>\n        </Grid>\n      </Grid>\n    </>\n  )\n}\n","import React from 'react'\n\nimport { FormControl, Divider, Grid, Button, Input, InputLabel, Select, MenuItem, Checkbox, ListItemText, Chip } from '@material-ui/core'\n\nimport { makeStyles } from '@material-ui/styles'\nimport { FeedbackContext } from '../../Utils/FeedbackContext'\nimport { ControllerContext } from '../../ControllerProvider'\nconst useStyles = makeStyles({\n  chips: {\n    display: 'flex',\n    flexWrap: 'wrap'\n  },\n  chip: {\n    margin: 2\n  },\n  formControl: {\n    width: '100%',\n    marginBottom: '15px'\n  },\n  divider: {\n    margin: '5px'\n  }\n})\n\nconst ITEM_HEIGHT = 48\nconst ITEM_PADDING_TOP = 8\nconst MenuProps = {\n  PaperProps: {\n    style: {\n      maxHeight: ITEM_HEIGHT * 4.5 + ITEM_PADDING_TOP,\n      width: 250\n    }\n  }\n}\n\nexport default function RemoveMicroservice (props) {\n  const classes = useStyles()\n  const [msvcsToRemove, setMsvcsToRemove] = React.useState([])\n  const { pushFeedback } = React.useContext(FeedbackContext)\n  const { request } = React.useContext(ControllerContext)\n\n  function handleChange (event) {\n    setMsvcsToRemove(event.target.value)\n  }\n\n  const remove = async () => {\n    try {\n      let success = true\n      for (const uuid of msvcsToRemove) {\n        const res = request(`/api/v3/microservices/${uuid}`, {\n          method: 'DELETE'\n        })\n        if (!res.ok) {\n          success = false\n          pushFeedback({ message: `${msvcsPerUUID[uuid].name}: ${res.statusText}`, type: 'error', uuid })\n        } else {\n          const idx = msvcsToRemove.indexOf(uuid)\n          setMsvcsToRemove([...msvcsToRemove.slice(0, idx), ...msvcsToRemove.slice(idx + 1)])\n        }\n      }\n      if (success) {\n        pushFeedback({ message: 'Microservices removed', type: 'success', uuid: 'success' })\n        props.onSuccess()\n      }\n    } catch (e) {\n      pushFeedback({ message: e.message, type: 'error', uuid: 'error' })\n    }\n  }\n\n  const { msvcs } = props\n\n  const msvcsPerUUID = msvcs.reduce((r, m) => ({\n    ...r,\n    [m.uuid]: m\n  }), {})\n\n  return (\n    <>\n      <FormControl className={classes.formControl}>\n        <InputLabel htmlFor='select-multiple-checkbox'>Microservices to remove</InputLabel>\n        <Select\n          multiple\n          value={msvcsToRemove}\n          onChange={handleChange}\n          input={<Input id='select-multiple-checkbox-rm-msvcs' />}\n          renderValue={selected => (\n            <div className={classes.chips}>\n              {selected.map(uuid => (\n                msvcsPerUUID[uuid] && <Chip key={uuid} label={msvcsPerUUID[uuid].name} className={classes.chip} />\n              ))}\n            </div>\n          )}\n          MenuProps={MenuProps}\n        >\n          {msvcs.map(m => (\n            <MenuItem key={m.uuid} value={m.uuid}>\n              <Checkbox checked={msvcsToRemove.indexOf(m.uuid) > -1} />\n              <ListItemText primary={m.name} />\n            </MenuItem>\n          ))}\n        </Select>\n      </FormControl>\n      <Divider className={classes.divider} />\n      <Grid container justify='flex-end'>\n        <Grid item>\n          <Button onClick={remove}>\n            Remove\n          </Button>\n        </Grid>\n      </Grid>\n    </>\n  )\n}\n","import React from 'react'\nimport PropTypes from 'prop-types'\nimport { makeStyles } from '@material-ui/core/styles'\nimport Tabs from '@material-ui/core/Tabs'\nimport Tab from '@material-ui/core/Tab'\nimport Typography from '@material-ui/core/Typography'\n\nfunction TabContainer (props) {\n  return (\n    <Typography component='div' style={{ padding: 8 * 3 }}>\n      {props.children}\n    </Typography>\n  )\n}\n\nTabContainer.propTypes = {\n  children: PropTypes.node.isRequired\n}\n\nconst useStyles = makeStyles(theme => ({\n  root: {\n    flexGrow: 1,\n    backgroundColor: theme.palette.background.paper\n  }\n}))\n\nexport default function SimpleTabs (props) {\n  const classes = useStyles()\n  const [value, setValue] = React.useState(0)\n\n  function handleChange (event, newValue) {\n    setValue(newValue)\n  }\n\n  return (\n    <div className={classes.root}>\n      <Tabs value={value} onChange={handleChange}>\n        {props.children.map((child, idx) => {\n          return (\n            <Tab key={child.id || idx} label={child.props.title} />\n          )\n        })}\n      </Tabs>\n      <TabContainer>{props.children[value]}</TabContainer>\n    </div>\n  )\n}\n","import { get as lget, set as lset } from 'lodash'\nimport React from 'react'\nimport { useController } from '../../ControllerProvider'\nimport { theme } from '../../Theme/ThemeProvider'\n\nexport const ConfigContext = React.createContext()\nexport const useConfig = () => React.useContext(ConfigContext)\n\nconst _initConfig = {\n  tags: {}\n}\n\nconst defaultTagColor = theme.colors.cobalt\n\nconst ecnViewerConfigKey = 'ecn-viewer-config'\n\nexport const ConfigProvider = ({\n  children\n}) => {\n  const { request } = useController()\n  const [config, setConfig] = React.useState(_initConfig)\n\n  const _fetchConfig = async () => {\n    try {\n      const res = await request(`/api/v3/config/${ecnViewerConfigKey}`)\n      if (res.ok) {\n        const { value: stringifiedConfig } = await res.json()\n        setConfig(JSON.parse(stringifiedConfig))\n      }\n    } catch (e) {\n\n    }\n  }\n\n  const saveConfig = async (newConfig) => {\n    const res = await request('/api/v3/config', {\n      method: 'PUT',\n      headers: {\n        'content-type': 'application/json'\n      },\n      body: JSON.stringify({\n        key: ecnViewerConfigKey,\n        value: JSON.stringify(newConfig)\n      })\n    })\n    if (res.ok) {\n      setConfig(newConfig)\n    }\n    return res\n  }\n\n  const getTagDisplayInfo = value => {\n    return { ...lget(config, `tags['${value}']`, { color: defaultTagColor }), value }\n  }\n\n  const updateTags = (agents = []) => {\n    let updated = false\n    for (const agent of agents) {\n      if (agent.tags) {\n        for (const tag of agent.tags) {\n          if (!lget(config, `tags['${tag}']`)) {\n            updated = true\n            lset(config, `tags['${tag}']`, { icon: '', color: defaultTagColor })\n          }\n        }\n      }\n    }\n    if (updated) {\n      setConfig(config)\n    }\n  }\n\n  React.useEffect(() => {\n    _fetchConfig()\n  }, [])\n\n  const isDebug = window.location.search.includes('debug=true')\n  return (\n    <ConfigContext.Provider\n      value={{\n        isDebug,\n        editConfig: setConfig,\n        updateTags,\n        getTagDisplayInfo,\n        saveConfig,\n        config\n      }}\n    >\n      {children}\n    </ConfigContext.Provider>\n  )\n}\n","import React from 'react'\nimport ReactJson from 'react-json-view'\n\nimport { List, ListItem, ListSubheader, ListItemAvatar, Chip, Avatar, ListItemText, Menu, MenuItem, Typography } from '@material-ui/core'\n\nimport MoreIcon from '@material-ui/icons/MoreVert'\nimport MemoryIcon from '@material-ui/icons/Memory'\n\nimport { makeStyles } from '@material-ui/styles'\n\nimport { statusColor, msvcStatusColor, tagColor } from '../utils'\nimport Modal from '../../Utils/Modal'\n\nimport ConnectNode from './ConnectNode'\nimport AddMicroservice from './AddMicroservice'\nimport RemoveMicroservice from './RemoveMicroservice'\nimport SimpleTabs from '../../Utils/Tabs'\nimport Icon from '@material-ui/core/Icon'\nimport { useConfig } from '../../providers/Config'\n\nconst useStyles = makeStyles(theme => ({\n  avatarList: {\n    color: 'white',\n    backgroundColor: 'var(--statusColor, white)',\n    boxShadow: `0px 2px 2px ${theme.colors.carbon}`\n  },\n  msvcChipList: {\n    display: 'flex',\n    flexDirection: 'column',\n    width: '20%',\n    flex: '1',\n    paddingRight: '15px'\n  },\n  msvcChip: {\n    marginTop: 'var(--mTop, 0px)',\n    backgroundColor: `var(--color, ${theme.colors.cobalt})`,\n    fontSize: '10px',\n    borderRadius: '5px',\n    height: '20px',\n    margin: '2px',\n    width: '100px',\n    color: 'white',\n    '& .MuiChip-label': {\n      textOverflow: 'ellipsis',\n      whiteSpace: 'nowrap',\n      overflow: 'hidden',\n      display: 'block'\n    }\n  },\n  jsonDisplay: {\n    width: '99%',\n    minHeight: '30rem',\n    fontFamily: '\"Lucida Console\", Monaco, monospace',\n    fontSize: '0.8rem',\n    lineHeight: '1.2'\n  },\n  listTitle: {\n    display: 'flex',\n    justifyContent: 'space-between',\n    alignItems: 'baseline',\n    color: theme.palette.text.primary\n  },\n  link: {\n    color: theme.palette.text.secondary,\n    cursor: 'pointer',\n    '&:hover': {\n      textDecoration: 'underline'\n    }\n  }\n}))\n\nconst TagChip = ({ tag, first }) => {\n  const classes = useStyles()\n  if (!tag.icon) {\n    return (\n      <Chip\n        size='small'\n        label={tag.value}\n        style={{\n          '--mTop': first ? '0px' : '2px',\n          '--color': tag.color || tagColor,\n          color: 'white'\n        }}\n        className={classes.msvcChip}\n        title={tag.value}\n      />)\n  }\n  return (\n    <Chip\n      icon={<Icon style={{ fontSize: 16, color: 'white' }}>{tag.icon}</Icon>}\n      size='small'\n      label={tag.value}\n      style={{\n        '--mTop': first ? '0px' : '2px',\n        '--color': tag.color || tagColor,\n        color: 'white'\n      }}\n      className={classes.msvcChip}\n      title={tag.value}\n    />\n  )\n}\n\nexport default function AgentList (props) {\n  const classes = useStyles()\n  const { getTagDisplayInfo } = useConfig()\n  const [openDetailsModal, setOpenDetailsModal] = React.useState(false)\n  const [openConnectNodeModal, setOpenConnectNodeModal] = React.useState(false)\n  const [openAddMicroserviceModal, setOpenAddMicroserviceModal] = React.useState(false)\n  const [openRemoveMicroserviceModal, setOpenRemoveMicroserviceModal] = React.useState(false)\n  const [menuAnchorEl, setMenuAnchorEl] = React.useState(null)\n  const { msvcsPerAgent, msvcs, agents, agent, setAgent, setAutozoom, loading } = props\n\n  const handleCloseMenu = () => setMenuAnchorEl(null)\n  const openMenu = (e) => setMenuAnchorEl(e.currentTarget)\n  const openDetails = () => {\n    setOpenDetailsModal(true)\n    handleCloseMenu()\n  }\n  // const openAddMicroservice = () => {\n  //   setOpenAddMicroserviceModal(true)\n  //   handleCloseMenu()\n  // }\n  // const openRemoveMicroservice = () => {\n  //   setOpenRemoveMicroserviceModal(true)\n  //   handleCloseMenu()\n  // }\n\n  return (\n    <>\n      <List\n        subheader={\n          <ListSubheader component='div' id='agent-list-subheader' style={{ position: 'relative' }} disableGutters disableSticky>\n            <div className={classes.listTitle}>\n              <div>\n                <Typography variant='h5'>Agents - <small>{loading ? 0 : agents.length} nodes</small></Typography>\n              </div>\n              <div>\n                <small className={classes.link} onClick={() => setAutozoom(true)}>See all ECN</small>\n              </div>\n            </div>\n          </ListSubheader>\n        }\n      >\n        {(loading ? [] : agents).map(a => {\n          const msvcs = msvcsPerAgent[a.uuid] || []\n          const tags = (a.tags || []).map(getTagDisplayInfo)\n          return (\n            <ListItem button key={a.uuid} onClick={() => setAgent(a)} selected={a.uuid === agent.uuid}>\n              <ListItemAvatar>\n                <Avatar style={{ '--statusColor': statusColor[a.daemonStatus] }} className={classes.avatarList}>\n                  <MemoryIcon />\n                </Avatar>\n              </ListItemAvatar>\n              <ListItemText primary={a.name} secondary={`${msvcs.length} Microservices`} />\n              <div className={classes.msvcChipList}>\n                {tags.map((t, idx) => (\n                  <TagChip key={t.value} tag={t} first={!idx} />\n                ))}\n              </div>\n              <div className={classes.msvcChipList}>\n                {msvcs.length > 4\n                  ? (\n                    <Chip\n                      size='small'\n                      label={`${msvcs.length} microservices`}\n                      style={{\n                        '--mTop': '0px',\n                        '--color': msvcStatusColor[(a.daemonStatus === 'RUNNING') ? 'RUNNING' : 'UNKNOWN']\n                      }}\n                      className={classes.msvcChip}\n                      title={`${msvcs.length} microservices`}\n                    />\n                  )\n                  : msvcs.map((m, idx) => (\n                    <React.Fragment key={m.uuid}>\n                      <Chip\n                        size='small'\n                        label={m.name}\n                        style={{\n                          '--mTop': idx ? '2px' : '0px',\n                          '--color': msvcStatusColor[(a.daemonStatus === 'RUNNING' && m.flowActive) ? 'RUNNING' : 'UNKNOWN']\n                        }}\n                        className={classes.msvcChip}\n                        title={m.name}\n                      />\n                    </React.Fragment>\n                  ))}\n              </div>\n              <MoreIcon onClick={openMenu} />\n            </ListItem>\n          )\n        })}\n      </List>\n      <Modal\n        {...{\n          open: openDetailsModal,\n          title: `${agent.name} details`,\n          onClose: () => setOpenDetailsModal(false)\n        }}\n      >\n        <SimpleTabs>\n          <ReactJson title='Agent' src={agent} name={false} />\n          <ReactJson title='Microservices' src={msvcsPerAgent[agent.uuid]} name={false} />\n        </SimpleTabs>\n      </Modal>\n      <Modal\n        {...{\n          open: openAddMicroserviceModal,\n          title: `Deploy microservice to ${agent.name}`,\n          onClose: () => setOpenAddMicroserviceModal(false)\n        }}\n      >\n        <AddMicroservice {...{\n          target: agent,\n          microservices: msvcs,\n          onSuccess: () => setOpenAddMicroserviceModal(false)\n        }}\n        />\n      </Modal>\n      <Modal\n        {...{\n          open: openRemoveMicroserviceModal,\n          title: `Remove microservice from ${agent.name}`,\n          onClose: () => setOpenRemoveMicroserviceModal(false)\n        }}\n      >\n        <RemoveMicroservice\n          {...{\n            target: agent,\n            msvcs: msvcsPerAgent[agent.uuid] || [],\n            onSuccess: () => setOpenRemoveMicroserviceModal(false)\n          }}\n        />\n      </Modal>\n      <Modal\n        {...{\n          open: openConnectNodeModal,\n          title: 'Connect agent',\n          onClose: () => setOpenConnectNodeModal(false)\n        }}\n      >\n        <ConnectNode\n          {...{\n            controller: props.controller,\n            onSuccess: () => setOpenConnectNodeModal(false)\n          }}\n        />\n      </Modal>\n      <Menu\n        id='agent-menu'\n        anchorEl={menuAnchorEl}\n        keepMounted\n        open={Boolean(menuAnchorEl)}\n        onClose={handleCloseMenu}\n      >\n        <MenuItem onClick={openDetails}>Details</MenuItem>\n        {/* <Divider />\n        <MenuItem onClick={openAddMicroservice}>Add microservice</MenuItem>\n        <MenuItem onClick={openRemoveMicroservice}>Remove microservice</MenuItem> */}\n      </Menu>\n    </>\n  )\n}\n","import React from 'react'\nimport { isFinite, get } from 'lodash'\n\nimport GoogleMapReact from 'google-map-react'\nimport { fitBounds } from 'google-map-react/utils'\n\nimport { Badge, Avatar } from '@material-ui/core'\n\nimport MemoryIcon from '@material-ui/icons/Memory'\nimport CtrlIcon from '@material-ui/icons/DeveloperBoard'\nimport Icon from '@material-ui/core/Icon'\n\nimport { makeStyles, useTheme } from '@material-ui/styles'\n\nimport { statusColor, msvcStatusColor, tagColor } from './utils'\nimport { useConfig } from '../providers/Config'\n\nconst useStyles = makeStyles(theme => ({\n  mapMarkerTransform: {\n    transform: 'translate(-50%, -100%)',\n    position: 'absolute'\n  },\n  msvcBadge: {\n    '& .MuiBadge-badge': {\n      backgroundColor: `var(--color, ${theme.colors.cobalt})`\n    }\n  },\n  mapMarker: {\n    backgroundColor: `var(--markerColor, ${theme.colors.success})`,\n    borderRadius: '50% 50% 50% 0 !important',\n    border: `2px solid var(--markerColor, ${theme.colors.success})`,\n    transform: 'rotate(-45deg)',\n    '& .MuiSvgIcon-root': {\n      transform: 'rotate(-45deg)'\n    }\n  },\n  mapWrapper: {\n    boxShadow: '0px 1px 3px 0px rgba(0,0,0,0.2), 0px 1px 1px 0px rgba(0,0,0,0.14), 0px 2px 1px -1px rgba(0,0,0,0.12)',\n    borderRadius: '4px',\n    width: '100%',\n    height: '100%',\n    maxHeight: '700px',\n    position: 'sticky',\n    top: '25px',\n    borderColor: theme.colors.aluminium,\n    '& div': {\n      borderRadius: '4px',\n      '& div': {\n        borderRadius: '4px'\n      }\n    }\n  }\n}))\n\nconst hasValidCoordinates = (coordinates) => {\n  return isFinite(coordinates[0]) && isFinite(coordinates[1])\n}\n\nexport default function Map (props) {\n  const { getTagDisplayInfo } = useConfig()\n  const classes = useStyles()\n  const theme = useTheme()\n  const DomElementRef = React.useRef()\n  const { controller, agent, setAgent, msvcsPerAgent, map, autozoom, loading } = props\n\n  const setMap = () => {\n    const bounds = new window.google.maps.LatLngBounds() // need handler incase `google` not yet available\n\n    const agents = (controller.agents || []).filter(a => hasValidCoordinates([a.latitude, a.longitude]))\n\n    if (!agents.length) {\n      map.center = [get(controller, 'info.location.lat', 0), get(controller, 'info.location.lon', 0)]\n      map.zoom = 9\n      return\n    }\n\n    agents.forEach(marker => {\n      bounds.extend(new window.google.maps.LatLng(get(marker, 'latitude', 0), get(marker, 'longitude', 0)))\n    })\n\n    bounds.extend(new window.google.maps.LatLng(get(controller, 'info.location.lat', 0), get(controller, 'info.location.lon', 0)))\n\n    const newBounds = {\n      ne: {\n        lat: bounds.getNorthEast().lat(),\n        lng: bounds.getNorthEast().lng()\n      },\n      sw: {\n        lat: bounds.getSouthWest().lat(),\n        lng: bounds.getSouthWest().lng()\n      }\n    }\n\n    const size = {\n      width: get(DomElementRef, 'current.offsetWidth', 600),\n      height: get(DomElementRef, 'current.offsetHeight', 800)\n    }\n\n    const { center, zoom } = fitBounds(newBounds, size)\n    map.center = center\n    map.zoom = zoom\n  }\n\n  if (autozoom && window.google) {\n    setMap()\n  }\n\n  return (\n    <div className={classes.mapWrapper} ref={DomElementRef}>\n      <GoogleMapReact\n        {...map}\n        bootstrapURLKeys={{\n          key: 'AIzaSyChp_fUXiK05ulRl_ewRGKWsQ1k0ULIFkA'\n        }}\n      >\n        {(loading ? [] : controller.agents).filter(a => hasValidCoordinates([a.latitude, a.longitude])).map(a =>\n          <div\n            key={a.uuid}\n            lat={a.latitude} lng={a.longitude}\n            className={classes.mapMarkerTransform}\n            onClick={() => setAgent(a)}\n          >\n            <Badge color='primary' style={{ '--color': msvcStatusColor[a.daemonStatus] }} badgeContent={(msvcsPerAgent[a.uuid] || []).filter(m => m.flowActive).length} invisible={a.uuid !== agent.uuid} className={`${classes.msvcBadge}`}>\n              <div style={{ display: 'flex', flexDirection: 'column', alignItems: 'center' }}>\n                <Avatar\n                  style={{ '--markerColor': statusColor[a.daemonStatus] }}\n                  className={classes.mapMarker}\n                >\n                  <MemoryIcon />\n                </Avatar>\n                <div style={{ display: 'flex', position: 'absolute', bottom: -15 }}>\n                  {a.tags && a.tags.map(getTagDisplayInfo).map(t => t.icon ? <div style={{ backgroundColor: t.color || tagColor, margin: '2px', padding: '4px', borderRadius: '100%' }}><Icon key={t.name} style={{ fontSize: 16, color: 'white', marginBottom: -3 }}>{t.icon}</Icon></div> : null)}\n                </div>\n\n              </div>\n            </Badge>\n          </div>\n        )}\n        {!loading && controller.info && hasValidCoordinates([controller.info.location.lat, controller.info.location.lon]) &&\n          <Avatar\n            lat={controller.info.location.lat}\n            lng={controller.info.location.lon}\n            style={{ '--markerColor': theme.colors.argon }}\n            className={classes.mapMarker}\n          >\n            <CtrlIcon />\n          </Avatar>}\n      </GoogleMapReact>\n    </div>\n  )\n}\n","import React, { useState } from 'react'\nimport useRecursiveTimeout from '../hooks/useInterval'\nimport { find, groupBy, get, isFinite } from 'lodash'\n\nimport Divider from '@material-ui/core/Divider'\nimport { makeStyles } from '@material-ui/styles'\n\nimport ControllerInfo from './ControllerInfo'\nimport ActiveResources from './ActiveResources'\nimport AgentList from './AgentList'\nimport Map from './Map'\n\n// import logo from '../assets/logo.png'\nimport './layout.scss'\n\nimport mapStyle from './mapStyle.json'\nimport { ControllerContext } from '../ControllerProvider'\nimport { useConfig } from '../providers/Config'\n\nconst useStyles = makeStyles({\n  divider: {\n    margin: '15px 0'\n  }\n})\n\nconst initState = {\n  controller: {\n    info: {\n      location: {},\n      user: {}\n    },\n    agents: [],\n    flows: [],\n    microservices: []\n  },\n  agent: {},\n  activeAgents: [],\n  activeFlows: [],\n  activeMsvcs: [],\n  msvcsPerAgent: []\n}\n\nexport const actions = {\n  UPDATE: 'UPDATE',\n  SET_AGENT: 'SET_AGENT'\n}\n\nconst updateData = (state, newController) => {\n  if (!newController) {\n    return state\n  }\n  const activeFlows = newController.flows.filter(f => f.isActivated === true)\n  const activeAgents = newController.agents.filter(a => a.daemonStatus === 'RUNNING')\n  const msvcsPerAgent = groupBy(newController.microservices.map(m => ({\n    ...m,\n    flowActive: !!find(activeFlows, f => m.flowId === f.id)\n  })), 'iofogUuid')\n  const activeMsvcs = activeAgents.reduce((res, a) => res.concat(get(msvcsPerAgent, a.uuid, []).filter(m => !!find(activeFlows, f => f.id === m.flowId)) || []), [])\n\n  if (!state.agent || !state.agent.uuid) {\n    state.agent = newController.agents[0] || {}\n  }\n\n  return {\n    ...state,\n    controller: newController,\n    activeFlows,\n    activeAgents,\n    activeMsvcs,\n    msvcsPerAgent\n  }\n}\n\nconst reducer = (state, action) => {\n  switch (action.type) {\n    case actions.UPDATE:\n      return updateData(state, action.data)\n    case actions.SET_AGENT:\n      return {\n        ...state,\n        agent: action.data\n      }\n    default:\n      return state\n  }\n}\n\nexport default function ECNViewer () {\n  const classes = useStyles()\n  const { updateTags } = useConfig()\n  const [state, dispatch] = React.useReducer(reducer, initState)\n  const [autozoom, setAutozoom] = useState(true)\n  const [loading, setLoading] = useState(true)\n  const [error, setError] = useState(false)\n  const [map, setMap] = useState({\n    center: [0, 0],\n    zoom: 15,\n    options: {\n      styles: mapStyle\n    }\n  })\n  const { controller: controllerInfo, request } = React.useContext(ControllerContext)\n  const timeout = +controllerInfo.refresh || 3000\n  React.useEffect(() => {\n    setLoading(true)\n    setError(null)\n  }, [controllerInfo.ip, controllerInfo.port, controllerInfo.user])\n\n  const update = async () => {\n    const agentsResponse = await request('/api/v3/iofog-list')\n    if (!agentsResponse.ok) {\n      setError({ message: agentsResponse.statusText })\n      return\n    }\n    const agents = (await agentsResponse.json()).fogs\n    const flowsResponse = await request('/api/v3/flow')\n    if (!flowsResponse.ok) {\n      setError({ message: agentsResponse.statusText })\n      return\n    }\n    const flows = (await flowsResponse.json()).flows\n\n    let microservices = []\n    for (const flow of flows) {\n      const microservicesResponse = await request(`/api/v3/microservices?flowId=${flow.id}`)\n      if (!flowsResponse.ok) {\n        setError({ message: agentsResponse.statusText })\n        return\n      }\n      microservices = microservices.concat((await microservicesResponse.json()).microservices)\n    }\n    if (loading) {\n      setLoading(false)\n    }\n    if (error) {\n      setError(false)\n    }\n    updateTags(agents)\n    dispatch({ type: actions.UPDATE, data: { agents, flows, microservices } })\n  }\n\n  useRecursiveTimeout(update, timeout)\n\n  const setAgent = a => dispatch({ type: actions.SET_AGENT, data: a })\n\n  const selectAgent = (a) => {\n    setAgent(a)\n    if (isFinite(a.latitude) && isFinite(a.longitude)) {\n      setMap({ ...map, center: [a.latitude, a.longitude], zoom: 15 })\n      setAutozoom(false)\n    }\n  }\n\n  const selectController = () => {\n    setMap({ ...map, center: [controllerInfo.location.lat, controllerInfo.location.lon], zoom: 15 })\n    setAutozoom(false)\n  }\n\n  const centerMap = (coordinates) => { setMap({ ...map, center: coordinates }) }\n\n  const { controller, activeAgents, activeFlows, activeMsvcs, agent, msvcsPerAgent } = state\n  return (\n    <div className='viewer-layout-container'>\n      <div className='box sidebar'>\n        <ControllerInfo {...{ controller: controllerInfo, selectController, loading, error }} />\n        <Divider className={classes.divider} />\n        <ActiveResources {...{ activeAgents, activeFlows, activeMsvcs, loading }} />\n        <Divider className={classes.divider} />\n        <AgentList {...{ msvcsPerAgent, loading, msvcs: controller.microservices, agents: controller.agents, agent, setAgent: selectAgent, centerMap, setAutozoom, controller: controller.info }} />\n      </div>\n      <div className='map-grid-container'>\n        <Map {...{ controller: { ...controller, info: controllerInfo }, agent, setAgent, msvcsPerAgent, map, autozoom, setAutozoom, loading }} />\n      </div>\n    </div>\n  )\n}\n","import React from 'react'\nimport { makeStyles } from '@material-ui/styles'\n\nimport Skeleton from 'react-loading-skeleton'\nimport { TextField, InputAdornment, Paper, Table, TableRow, TableCell, TableContainer, TableHead, TableBody, TablePagination } from '@material-ui/core'\n\nimport MoreIcon from '@material-ui/icons/MoreVert'\nimport SearchIcon from '@material-ui/icons/Search'\nimport ClearIcon from '@material-ui/icons/Clear'\nimport lget from 'lodash/get'\n\nconst useStyles = makeStyles(theme => ({\n  pointer: {\n    cursor: 'pointer'\n  },\n  avatarContainer: {\n    backgroundColor: theme.colors.chromium\n  },\n  tableActions: {\n    marginBottom: '10px',\n    display: 'flex',\n    justifyContent: 'space-between'\n  }\n}))\n\nconst filterFields = [\n  'name',\n  'description',\n  'publisher',\n  'supportedPlatforms',\n  'category',\n  'registry.url'\n]\n\nexport default function CatalogTable (props) {\n  const classes = useStyles()\n  const { loading, openMenu, catalog } = props\n  const [filter, setFilter] = React.useState('')\n  const [page, setPage] = React.useState(0)\n  const [rowsPerPage, setRowsPerPage] = React.useState(5)\n\n  const handleChangePage = (event, newPage) => {\n    setPage(newPage)\n  }\n\n  const handleChangeRowsPerPage = event => {\n    setRowsPerPage(parseInt(event.target.value, 10))\n    setPage(0)\n  }\n\n  const filterItem = (item) => {\n    for (const field of filterFields) {\n      if (lget(item, field, '').toString().toLowerCase().includes(filter)) { return true }\n    }\n    return false\n  }\n\n  const filteredCatalog = catalog.filter(filterItem)\n\n  const emptyRows = loading ? 0 : rowsPerPage - Math.min(rowsPerPage, filteredCatalog.length - page * rowsPerPage)\n  return (\n    <>\n      <div className={`${classes.tableActions} ${classes.pointer}`}>\n        <TextField\n          className={classes.margin}\n          id='input-with-icon-textfield'\n          label='Filter'\n          value={filter}\n          onChange={(e) => setFilter(e.target.value.toLowerCase())}\n          InputProps={{\n            startAdornment: (\n              <InputAdornment position='start'>\n                <SearchIcon />\n              </InputAdornment>\n            ),\n            endAdornment: (\n              <InputAdornment className={classes.pointer} position='start'>\n                <ClearIcon onClick={() => setFilter('')} />\n              </InputAdornment>\n            )\n          }}\n        />\n      </div>\n      <TableContainer component={Paper}>\n        <Table className={classes.table} stickyHeader aria-label='simple table'>\n          <TableHead>\n            <TableRow>\n              <TableCell>Name</TableCell>\n              <TableCell align='right'>Description</TableCell>\n              <TableCell align='right'>Supported platforms</TableCell>\n              <TableCell align='right'>Publisher</TableCell>\n              <TableCell align='right'>Registry</TableCell>\n              <TableCell align='right'>Category</TableCell>\n              <TableCell align='right' />\n            </TableRow>\n          </TableHead>\n          <TableBody>\n            {loading ? <TableRow><TableCell colSpan={7}><Skeleton height={50} count={5} /></TableCell></TableRow> : filteredCatalog\n              .slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)\n              .map(row => (\n                <TableRow key={row.name}>\n                  <TableCell component='th' scope='row'>\n                    {row.name}\n                  </TableCell>\n                  <TableCell align='right'>{row.description}</TableCell>\n                  <TableCell align='right'>{row.supportedPlatforms.join(', ')}</TableCell>\n                  <TableCell align='right'>{row.publisher}</TableCell>\n                  <TableCell align='right'>{row.registry.url}</TableCell>\n                  <TableCell align='right'>{row.category}</TableCell>\n                  <TableCell align='right' className={classes.pointer}>\n                    <MoreIcon onClick={(e) => openMenu(row, e)} />\n                  </TableCell>\n                </TableRow>\n              ))}\n            {emptyRows > 0 && (\n              <TableRow style={{ height: 53 * emptyRows }}>\n                <TableCell colSpan={6} />\n              </TableRow>\n            )}\n          </TableBody>\n        </Table>\n      </TableContainer>\n      <TablePagination\n        rowsPerPageOptions={[5, 10, 25]}\n        component='div'\n        count={filteredCatalog.length}\n        rowsPerPage={rowsPerPage}\n        page={page}\n        onChangePage={handleChangePage}\n        onChangeRowsPerPage={handleChangeRowsPerPage}\n      />\n    </>\n  )\n}\n","import React from 'react'\nimport { makeStyles } from '@material-ui/styles'\n\nimport Skeleton from 'react-loading-skeleton'\nimport { TextField, Grid, Button, MenuItem } from '@material-ui/core'\n\nconst useStyles = makeStyles(theme => ({\n  pointer: {\n    cursor: 'pointer'\n  },\n  avatarContainer: {\n    backgroundColor: theme.colors.chromium\n  },\n  tableActions: {\n    marginBottom: '10px',\n    display: 'flex',\n    justifyContent: 'space-between'\n  }\n}))\nexport default function AddCatalogItemForm (props) {\n  const classes = useStyles()\n  const [newItem, setNewItem] = React.useState({\n    images: {\n      x86: '',\n      arm: ''\n    },\n    registryId: 1,\n    name: '',\n    description: '',\n    category: '',\n    ...props.newCatalogItem\n  })\n  const { onSave, loading, registries } = props\n  const handleChange = (key) => (e) => setNewItem({ ...newItem, [key]: e.target.value })\n  const handleImageChange = (key) => (e) => setNewItem({ ...newItem, images: { ...newItem.images, [key]: e.target.value } })\n  return (\n    <>\n      <Grid container spacing={2}>\n        <Grid item xs={12} sm={6}>\n          <TextField\n            id='name'\n            label='Name'\n            onChange={handleChange('name')}\n            value={newItem.name}\n            fullWidth\n            className={classes.textField}\n            margin='normal'\n            variant='outlined'\n          />\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <TextField\n            id='description'\n            label='Description'\n            onChange={handleChange('description')}\n            value={newItem.description}\n            fullWidth\n            multiline\n            rowsMax='4'\n            className={classes.textField}\n            margin='normal'\n            variant='outlined'\n          />\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <TextField\n            id='x86'\n            label='x86'\n            helperText='image to be used on x86 edge nodes'\n            onChange={handleImageChange('x86')}\n            value={newItem.images.x86}\n            fullWidth\n            className={classes.textField}\n            margin='normal'\n            variant='outlined'\n          />\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <TextField\n            id='arm'\n            label='ARM'\n            helperText='image to be used on ARM edge nodes'\n            onChange={handleImageChange('arm')}\n            value={newItem.images.arm}\n            fullWidth\n            className={classes.textField}\n            margin='normal'\n            variant='outlined'\n          />\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <TextField\n            id='registry'\n            select\n            label='Registry'\n            fullWidth\n            className={classes.textField}\n            value={newItem.registryId}\n            onChange={handleChange('registryId')}\n            variant='outlined'\n            InputProps={{\n              style: { marginTop: '16px' }\n            }}\n            InputLabelProps={{\n              style: { marginTop: '16px' }\n            }}\n          >\n            {registries.map(option => (\n              <MenuItem key={option.id} value={option.id}>\n                {option.url}\n              </MenuItem>\n            ))}\n          </TextField>\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <TextField\n            id='category'\n            label='Category'\n            onChange={handleChange('category')}\n            value={newItem.category}\n            fullWidth\n            multiline\n            rowsMax='4'\n            className={classes.textField}\n            margin='normal'\n            variant='outlined'\n          />\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <TextField\n            id='publisher'\n            label='Publisher'\n            onChange={handleChange('publisher')}\n            value={newItem.publisher}\n            fullWidth\n            multiline\n            rowsMax='4'\n            className={classes.textField}\n            margin='normal'\n            variant='outlined'\n          />\n        </Grid>\n      </Grid>\n      <Grid container justify='flex-end'>\n        <Grid item>\n          <Button onClick={() => onSave(newItem)}>\n            {loading ? <Skeleton> </Skeleton> : 'Save'}\n          </Button>\n        </Grid>\n      </Grid>\n    </>\n  )\n}\n","import React from 'react'\nimport { Button, Divider, Grid } from '@material-ui/core'\n\nimport Modal from './Modal'\n\nimport { makeStyles } from '@material-ui/styles'\nconst useStyles = makeStyles(theme => ({\n  divider: {\n    margin: '5px'\n  }\n}))\n\nexport default function Confirm (props) {\n  const classes = useStyles()\n  const { open, onClose, title, onConfirm } = props\n  return (\n    <Modal\n      {...{\n        title,\n        open,\n        onClose\n      }}\n    >\n      {props.children}\n      <Divider className={classes.divider} />\n      <Grid container justify='flex-end' spacing={2}>\n        <Grid item>\n          <Button onClick={onClose}>\n            Cancel\n          </Button>\n        </Grid>\n        <Grid item>\n          <Button variant='contained' color='primary' onClick={onConfirm}>\n            Confirm\n          </Button>\n        </Grid>\n      </Grid>\n\n    </Modal>\n  )\n}\n","import React from 'react'\nimport { useDrop } from 'react-dnd'\nimport { NativeTypes } from 'react-dnd-html5-backend'\nimport { makeStyles } from '@material-ui/core/styles'\n\nconst { FILE } = NativeTypes\n\nconst useStyles = makeStyles(theme => ({\n  dropZone: {\n    width: '100%',\n    border: '1px dashed',\n    height: '120px',\n    padding: '1rem',\n    textAlign: 'center',\n    borderRadius: '4px',\n    borderColor: theme.colors.carbon,\n    color: theme.colors.carbon\n  },\n  active: {\n    backgroundColor: 'white',\n    fontWeight: 'bold'\n  }\n}))\n\nexport default function FileDrop (props) {\n  const classes = useStyles()\n  const [collectedProps, drop] = useDrop({\n    accept: FILE,\n    drop: props.onDrop,\n    collect: (monitor) => ({\n      highlighted: monitor.canDrop(),\n      hovered: monitor.isOver()\n    })\n  })\n\n  const active = collectedProps.hovered && collectedProps.highlighted\n  const className = [\n    classes.dropZone,\n    (collectedProps.hovered ? classes.hovered : ''),\n    (collectedProps.highlighted ? classes.highlighted : ''),\n    (active ? classes.active : '')\n  ].join(' ')\n\n  return (\n    <div className={className} ref={drop}>\n      {active ? 'Release to drop' : props.children}\n    </div>\n  )\n}\n","import React from 'react'\nimport { makeStyles } from '@material-ui/styles'\nimport ReactJson from 'react-json-view'\nimport yaml from 'js-yaml'\nimport { Avatar, Menu, MenuItem, Divider, Typography } from '@material-ui/core'\n\nimport { ControllerContext } from '../ControllerProvider'\nimport { FeedbackContext } from '../Utils/FeedbackContext'\nimport Modal from '../Utils/Modal'\nimport CatalogTable from './CatalogTable'\nimport AddCatalogItemForm from './AddCatalogItemForm'\nimport Confirm from '../Utils/Confirm'\nimport FileDrop from '../Utils/FileDrop'\n\nimport lget from 'lodash/get'\n\nconst useStyles = makeStyles(theme => ({\n  pointer: {\n    cursor: 'pointer'\n  },\n  avatarContainer: {\n    backgroundColor: theme.colors.chromium\n  },\n  container: {\n    padding: '10px 50px 10px 30px'\n  },\n  flexColumn: {\n    display: 'flex',\n    flexDirection: 'column'\n  },\n  titleRow: {\n    marginBottom: '30px'\n  }\n}))\n\nconst mapImages = (images) => {\n  const supportedPlatforms = []\n  for (const img of images) {\n    if (img.containerImage) {\n      switch (img.fogTypeId) {\n        case 1:\n          supportedPlatforms.push('x86')\n          break\n        case 2:\n          supportedPlatforms.push('arm')\n          break\n        default:\n          break\n      }\n    }\n  }\n  return supportedPlatforms\n}\nconst mapCatalogItem = (item, registries) => {\n  item.supportedPlatforms = mapImages(item.images)\n  item.registry = registries.find(r => r.id === item.registryId)\n  if (item.configExample) {\n    try {\n      item.configExample = JSON.parse(item.configExample)\n    } catch (e) {\n    }\n  }\n  return item\n}\n\nconst getRegistryIdFromRegistry = (registry) => {\n  if (registry === 'remote') {\n    return 1\n  }\n  if (registry === 'local') {\n    return 2\n  }\n  return +(registry)\n}\n\nconst parseCatalogItem = (doc) => {\n  if (doc.apiVersion !== 'iofog.org/v2') {\n    return [{}, `Invalid API Version ${doc.apiVersion}, current version is iofog.org/v2`]\n  }\n  if (doc.kind !== 'CatalogItem') {\n    return [{}, `Invalid kind ${doc.kind}`]\n  }\n  if (!doc.metadata || !doc.spec) {\n    return [{}, 'Invalid YAML format']\n  }\n  const catalogItem = {\n    name: lget(doc, 'metadata.name', lget(doc, 'spec.name', undefined)),\n    images: {\n      x86: lget(doc, 'spec.x86', ''),\n      arm: lget(doc, 'spec.arm', '')\n    },\n    description: lget(doc, 'spec.description', ''),\n    publisher: lget(doc, 'spec.publisher', ''),\n    category: lget(doc, 'spec.category', ''),\n    registry: lget(doc, 'spec.registry', ''),\n    configExample: lget(doc, 'spec.configExample', {})\n  }\n\n  catalogItem.registryId = catalogItem.registry ? getRegistryIdFromRegistry(catalogItem.registry) : 1\n  return [catalogItem]\n}\n\nexport default function Catalog () {\n  const classes = useStyles()\n  const [openDetailsModal, setOpenDetailsModal] = React.useState(false)\n  const [openRemoveConfirm, setOpenRemoveConfirm] = React.useState(false)\n  const [openAddCatalogItemModal, setOpenAddCatalogItemModal] = React.useState(false)\n  const [newCatalogItem, setNewCatalogItem] = React.useState(null)\n  const [fetching, setFetching] = React.useState(true)\n  const [loading, setLoading] = React.useState(false)\n  const [catalog, setCatalog] = React.useState([])\n  const [registries, setRegistries] = React.useState([])\n  const [selectedItem, setSelectedItem] = React.useState({})\n  const [menuAnchorEl, setMenuAnchorEl] = React.useState(null)\n  const { request } = React.useContext(ControllerContext)\n  const { pushFeedback } = React.useContext(FeedbackContext)\n\n  const handleCloseMenu = () => setMenuAnchorEl(null)\n  const openMenu = (item, e) => {\n    setSelectedItem(item)\n    setMenuAnchorEl(e.currentTarget)\n  }\n  const openDetails = () => {\n    setOpenDetailsModal(true)\n    handleCloseMenu()\n  }\n  const openRemove = () => {\n    setOpenRemoveConfirm(true)\n    handleCloseMenu()\n  }\n\n  async function fetchCatalog () {\n    try {\n      setFetching(true)\n      const catalogItemsResponse = await request('/api/v3/catalog/microservices')\n      if (!catalogItemsResponse.ok) {\n        pushFeedback({ message: catalogItemsResponse.statusText, type: 'error' })\n        setFetching(false)\n        return\n      }\n      let catalogItems = (await catalogItemsResponse.json()).catalogItems\n      const registriesResponse = await request('/api/v3/registries')\n      if (!registriesResponse.ok) {\n        pushFeedback({ message: registriesResponse.statusText, type: 'error' })\n        setFetching(false)\n        return\n      }\n      const registries = (await registriesResponse.json()).registries\n      catalogItems = catalogItems.map(item => mapCatalogItem(item, registries))\n      console.log({ catalogItems })\n      setCatalog(catalogItems)\n      setRegistries(registries)\n      setFetching(false)\n    } catch (e) {\n      pushFeedback({ message: e.message, type: 'error' })\n      setFetching(false)\n    }\n  }\n\n  React.useEffect(() => {\n    fetchCatalog()\n  }, [])\n\n  const addCatalogItem = async (item) => {\n    const newItem = {\n      ...item,\n      images: [{\n        fogTypeId: 1,\n        containerImage: item.images.x86\n      }, {\n        fogTypeId: 2,\n        containerImage: item.images.arm\n      }]\n    }\n    if (newItem.configExample && typeof newItem.configExample === typeof ({})) {\n      newItem.configExample = JSON.stringify(newItem.configExample)\n    }\n    setLoading(true)\n    const response = await request('/api/v3/catalog/microservices', {\n      method: 'POST',\n      headers: {\n        Accept: 'application/json',\n        'Content-Type': 'application/json'\n      },\n      body: JSON.stringify(newItem)\n    })\n    if (response.ok) {\n      pushFeedback({ message: 'Item added to the Catalog!', type: 'success' })\n      newItem.id = (await response.json()).id\n      setCatalog([mapCatalogItem(newItem, registries), ...catalog])\n      setLoading(false)\n    } else {\n      pushFeedback({ message: response.statusText, type: 'error' })\n      setLoading(false)\n    }\n  }\n\n  const removeCatalogItem = async (item) => {\n    try {\n      setLoading(true)\n      const res = await request(`/api/v3/catalog/microservices/${item.id}`, {\n        method: 'DELETE'\n      })\n      if (!res.ok) {\n        pushFeedback({ message: res.statusText, type: 'error' })\n      } else {\n        setCatalog(catalog.filter(i => i.id !== item.id))\n        pushFeedback({ message: 'Catalog item deleted', type: 'success' })\n      }\n      setLoading(false)\n    } catch (e) {\n      pushFeedback({ message: e.message, type: 'error', uuid: 'error' })\n      setLoading(false)\n    }\n  }\n\n  const readCatalogItemFile = async (item) => {\n    const file = item.files[0]\n    if (file) {\n      const reader = new window.FileReader()\n\n      reader.onload = function (evt) {\n        console.log({ evt })\n        try {\n          const doc = yaml.safeLoad(evt.target.result)\n          const [catalogItem, err] = parseCatalogItem(doc)\n          if (err) {\n            return pushFeedback({ message: err, type: 'error' })\n          }\n          setNewCatalogItem(catalogItem)\n          setOpenAddCatalogItemModal(true)\n        } catch (e) {\n          console.error({ e })\n          pushFeedback({ message: 'Could not parse the file', type: 'error' })\n        }\n      }\n\n      reader.onerror = function (evt) {\n        pushFeedback({ message: evt, type: 'error' })\n      }\n\n      reader.readAsText(file, 'UTF-8')\n    }\n  }\n\n  return (\n    <>\n      <div className={classes.container}>\n        <div className={classes.titleRow}>\n          <Typography variant='h5'>ECN Microservices Catalog</Typography>\n        </div>\n        <CatalogTable {...{ loading: fetching, openMenu, catalog }} />\n        <div>\n          <FileDrop {...{ onDrop: readCatalogItemFile }}>\n            <div className={classes.flexColumn}>\n              <span>Drag a file here</span>\n              <span>---</span>\n              <Avatar style={{ margin: 'auto' }} className={`${classes.avatarContainer} ${classes.pointer}`} onClick={() => setOpenAddCatalogItemModal(true)}>+</Avatar>\n            </div>\n          </FileDrop>\n        </div>\n      </div>\n      <Modal\n        {...{\n          open: openDetailsModal,\n          title: `${selectedItem.name} details`,\n          onClose: () => setOpenDetailsModal(false)\n        }}\n      >\n        <ReactJson title='Catalog item' src={selectedItem} name={false} />\n      </Modal>\n      <Modal\n        {...{\n          open: openAddCatalogItemModal,\n          title: 'Add an item to the Catalog',\n          onClose: () => setOpenAddCatalogItemModal(false)\n        }}\n      >\n        <AddCatalogItemForm {...{\n          loading,\n          registries,\n          newCatalogItem,\n          onSave: async (item) => {\n            try {\n              await addCatalogItem(item)\n              setNewCatalogItem(null)\n              setOpenAddCatalogItemModal(false)\n            } catch (e) {\n              pushFeedback({ message: e.message, type: 'error' })\n            }\n          }\n        }}\n        />\n      </Modal>\n      <Confirm\n        open={openRemoveConfirm}\n        title={`Delete catalog item ${selectedItem.name} ?`}\n        onClose={() => setOpenRemoveConfirm(false)}\n        onConfirm={() => {\n          removeCatalogItem(selectedItem)\n          setOpenRemoveConfirm(false)\n        }}\n      />\n      <Menu\n        id='catalog-menu'\n        anchorEl={menuAnchorEl}\n        keepMounted\n        open={Boolean(menuAnchorEl)}\n        onClose={handleCloseMenu}\n      >\n        <MenuItem onClick={openDetails}>Details</MenuItem>\n        <Divider />\n        <MenuItem onClick={openRemove}>Remove item</MenuItem>\n      </Menu>\n    </>\n  )\n}\n","import React from 'react'\nimport { TextField, Grid, Button, InputAdornment, Divider } from '@material-ui/core'\nimport { makeStyles } from '@material-ui/styles'\n\nimport { ControllerContext } from '../ControllerProvider'\nimport { FeedbackContext } from '../Utils/FeedbackContext'\n\nconst useStyles = makeStyles({\n  skeleton: {\n    minHeight: '55px'\n  }\n})\n\nexport default function Config (props) {\n  const classes = useStyles()\n  const { pushFeedback } = React.useContext(FeedbackContext)\n  const { controller, updateController } = React.useContext(ControllerContext)\n  const [data, setData] = React.useState({ ...controller })\n\n  const save = async () => {\n    try {\n      await updateController(data)\n      pushFeedback({ message: data.dev ? 'Controller details saved!' : 'Authenticated!', type: 'success' })\n      props.onSave()\n    } catch (e) {\n      pushFeedback({ message: e.message, type: 'error' })\n    }\n  }\n\n  const handleChange = name => event => {\n    setData({ ...data, [name]: event.target.value })\n  }\n  const handleUserChange = name => event => {\n    setData({ ...data, user: { ...data.user, [name]: event.target.value } })\n  }\n  return (\n    <>\n      {data.dev &&\n        <Grid container spacing={2}>\n          <Grid item xs={12} sm={6}>\n            <TextField\n              id='ip'\n              label='IP'\n              onChange={handleChange('ip')}\n              value={data.ip}\n              fullWidth\n              className={classes.textField}\n              margin='normal'\n              variant='outlined'\n            />\n          </Grid>\n          <Grid item xs={12} sm={6}>\n            <TextField\n              id='port'\n              label='Port'\n              onChange={handleChange('port')}\n              value={data.port}\n              fullWidth\n              className={classes.textField}\n              margin='normal'\n              variant='outlined'\n            />\n          </Grid>\n        </Grid>}\n      <Grid container spacing={2}>\n        <Grid item xs={12} sm={6}>\n          <TextField\n            id='email'\n            label='Email'\n            onChange={handleUserChange('email')}\n            value={data.user.email}\n            fullWidth\n            className={classes.textField}\n            margin='normal'\n            variant='outlined'\n          />\n        </Grid>\n        <Grid item xs={12} sm={6}>\n          <TextField\n            id='password'\n            label='Password'\n            onChange={handleUserChange('password')}\n            onKeyPress={(e) => e.key === 'Enter' && data.user.email && data.user.password ? save() : null}\n            value={data.user.password}\n            fullWidth\n            type='password'\n            className={classes.textField}\n            margin='normal'\n            variant='outlined'\n          />\n        </Grid>\n      </Grid>\n      <Divider />\n      <Grid container spacing={2}>\n        <Grid item xs={12} sm={6}>\n          <TextField\n            id='refresh'\n            label='Refresh'\n            type='number'\n            onChange={handleChange('refresh')}\n            value={data.refresh}\n            fullWidth\n            className={classes.textField}\n            margin='normal'\n            variant='outlined'\n            inputProps={{\n              min: '1000',\n              step: '500'\n            }}\n            InputProps={{\n              endAdornment: <InputAdornment position='end'>ms</InputAdornment>\n            }}\n          />\n        </Grid>\n      </Grid>\n      <Grid container justify='flex-end'>\n        <Grid item>\n          <Button onClick={save}>\n            Save\n          </Button>\n        </Grid>\n      </Grid>\n    </>\n  )\n}\n","import React from 'react'\nimport { map as lmap } from 'lodash'\nimport { TextField, Typography, Button, Icon, InputAdornment } from '@material-ui/core'\nimport { makeStyles } from '@material-ui/styles'\nimport { theme } from '../Theme/ThemeProvider'\n\nimport { useConfig } from '../providers/Config'\nimport { useFeedback } from '../Utils/FeedbackContext'\n\nconst useStyles = makeStyles({\n  skeleton: {\n    minHeight: '55px'\n  },\n  link: {\n    color: theme.colors.cobalt\n  }\n})\n\nexport default function Config (props) {\n  const classes = useStyles()\n  const { config, saveConfig } = useConfig()\n  const { pushFeedback } = useFeedback()\n  const [tags, setTags] = React.useState(config.tags || {})\n  const [filter, setFilter] = React.useState('')\n\n  const save = async () => {\n    try {\n      const res = await saveConfig({ ...config, tags })\n      if (res.ok) {\n        pushFeedback({ message: 'Saved!', type: 'success' })\n        props.onSave()\n      } else {\n        pushFeedback({ message: res.statusText, type: 'error' })\n      }\n    } catch (e) {\n      pushFeedback({ message: e.message, type: 'error' })\n    }\n  }\n\n  React.useEffect(() => {\n    setTags(config.tags)\n  }, [config])\n\n  const handleChange = (name, key) => e => {\n    const value = e.target.value\n    setTags(tags => ({ ...tags, [name]: { ...tags[name], [key]: value } }))\n  }\n\n  return (\n    <div>\n      <div style={{ display: 'flex', justifyContent: 'space-between', flex: 1, alignItems: 'baseline' }}>\n        <div style={{ display: 'flex', alignItems: 'baseline' }}>\n          <Typography variant='h5' style={{ marginRight: '20px' }}>Tags</Typography>\n          <TextField\n            id='search'\n            label='Search'\n            onChange={e => setFilter(e.target.value)}\n            value={filter}\n            className={classes.textField}\n            margin='normal'\n            InputProps={{\n              startAdornment: (\n                <InputAdornment position='start'>\n                  <Icon>search</Icon>\n                </InputAdornment>\n              )\n            }}\n          />\n        </div>\n        <Typography variant='subtitle2'><a className={classes.link} href='https://material.io/resources/icons/?style=baseline' rel='noopener noreferrer' target='_blank'>Available Icons <Icon style={{ fontSize: 12 }}>open_in_new</Icon></a></Typography>\n      </div>\n      {lmap(tags, (tag, name) => {\n        if (!name.includes(filter)) {\n          return null\n        }\n        return (\n          <div style={{ display: 'flex', alignItems: 'center' }} key={name}>\n            <div style={{ marginRight: '10px', width: '150px', overflow: 'hidden', textOverflow: 'ellipsis' }}>\n              <span>{name}:</span>\n            </div>\n            <div style={{ display: 'flex', flex: 1, alignItems: 'center' }}>\n              <TextField\n                id='color'\n                label='Color'\n                onChange={handleChange(name, 'color')}\n                value={tag.color}\n                fullWidth\n                className={classes.textField}\n                margin='normal'\n                variant='outlined'\n                type='color'\n              />\n              <TextField\n                id='icon'\n                label='Icon Name'\n                onChange={handleChange(name, 'icon')}\n                value={tag.icon}\n                fullWidth\n                className={classes.textField}\n                margin='normal'\n                variant='outlined'\n              />\n            </div>\n          </div>\n        )\n      })}\n      <Button onClick={save} style={{ float: 'right' }}>\n        Save\n      </Button>\n    </div>\n  )\n}\n","import React from 'react'\nimport { HashRouter, Route, Switch, NavLink, Redirect } from 'react-router-dom'\nimport Avatar from '@material-ui/core/Avatar'\nimport SearchIcon from '@material-ui/icons/Search'\nimport NotificationsIcon from '@material-ui/icons/NotificationsOutlined'\nimport HomeIcon from '@material-ui/icons/HomeOutlined'\nimport CatalogIcon from '@material-ui/icons/GraphicEqOutlined'\nimport SettingsIcon from '@material-ui/icons/SettingsOutlined'\n\nimport ECNViewer from '../ECNViewer'\nimport Catalog from '../Catalog'\nimport Modal from '../Utils/Modal'\nimport Config from '../Config'\nimport ECNViewerConfig from '../ECNViewerConfig'\nimport SimpleTabs from '../Utils/Tabs'\nimport { ControllerContext } from '../ControllerProvider'\n\nimport logomark from '../assets/logomark.svg'\nimport './layout.scss'\n\nimport { makeStyles } from '@material-ui/styles'\n\nconst useStyles = makeStyles(theme => ({\n  wrapper: {\n    color: theme.colors.carbon,\n    backgroundColor: theme.colors.silver\n  },\n  divider: {\n    margin: '15px 0'\n  },\n  logo: {\n    backgroundColor: theme.colors.phosphorus,\n    color: theme.colors.white\n  },\n  latNav: {\n    backgroundColor: theme.colors.carbon\n  },\n  avatarContainer: {\n    backgroundColor: theme.colors.phosphorus,\n    marginRight: '45px'\n  },\n  latIcons: {\n    margin: 'auto',\n    marginTop: '15px',\n    cursor: 'pointer',\n    backgroundColor: theme.colors.carbon,\n    '.active &': {\n      backgroundColor: theme.colors.aluminium\n    }\n  },\n  topIcons: {\n    height: '100%',\n    width: '25px',\n    marginRight: '25px',\n    cursor: 'pointer'\n  },\n  nav: {\n    marginBottom: '15px',\n    height: '50px',\n    '& a': {\n      height: '100%',\n      '& img': {\n        height: '100%'\n      }\n    }\n  },\n  footerContainer: {\n    display: 'flex',\n    justifyContent: 'space-around',\n    justifyItems: 'center',\n    padding: '20px 10px 20px 0px'\n  },\n  footer: {\n    color: theme.colors.aluminium,\n    display: 'flex',\n    flexDirection: 'column',\n    justifyContent: 'flex-end',\n    fontSize: '9pt',\n    '& a': {\n      color: theme.colors.aluminium,\n      textDecoration: 'none!important'\n    }\n  }\n}))\n\nexport default function Layout () {\n  const classes = useStyles()\n  const { controller } = React.useContext(ControllerContext)\n  const [settingsOpen, setSettingsOpen] = React.useState(!(controller.user.email && controller.user.password))\n\n  console.log(' ====> Rendering layout')\n\n  return (\n    <>\n      <HashRouter>\n        <div className={classes.wrapper + ' wrapper'}>\n          <div className={classes.logo + ' logo'}>\n            <NavLink to='/overview'>\n              <img src={logomark} alt='Edgeworx logomark' />\n            </NavLink>\n          </div>\n          <div className='topnav'>\n            <SearchIcon className={classes.topIcons} />\n            <NotificationsIcon className={classes.topIcons} />\n            <Avatar className={classes.avatarContainer}>M</Avatar>\n          </div>\n          <div className={classes.latNav + ' latnav'}>\n            <NavLink to='/overview'>\n              <Avatar className={classes.latIcons}>\n                <HomeIcon />\n              </Avatar>\n            </NavLink>\n            <NavLink to='/catalog'>\n              <Avatar className={classes.latIcons}>\n                <CatalogIcon />\n              </Avatar>\n            </NavLink>\n            <Avatar className={classes.latIcons}>\n              <SettingsIcon onClick={() => setSettingsOpen(!settingsOpen)} />\n            </Avatar>\n          </div>\n          <div className='content'>\n            <Switch>\n              <Route path='/catalog' component={Catalog} />\n              <Route path='/overview' component={ECNViewer} />\n              <Route component={() => <Redirect to='/overview' />} />\n            </Switch>\n          </div>\n          <div className={`${classes.footerContainer} footer`}>\n            <span className={classes.footer}>\n              <span>Controller v{controller.status.versions.controller} - ECN Viewer v{controller.status.versions.ecnViewer}</span>\n              <a style={{ margin: 'auto' }} href='http://www.eclipse.org/legal/copyright.php'>© 2020 Eclipse Foundation, Inc.</a>\n            </span>\n          </div>\n        </div>\n      </HashRouter>\n      <Modal\n        {...{\n          open: settingsOpen,\n          title: 'Configuration',\n          onClose: () => setSettingsOpen(false)\n        }}\n      >\n        <SimpleTabs>\n          <Config title={controller.dev ? 'Controller details' : 'User credentials'} {...{ onSave: () => setSettingsOpen(false) }} />\n          <ECNViewerConfig title='ECN Viewer' {...{ onSave: () => setSettingsOpen(false) }} />\n        </SimpleTabs>\n      </Modal>\n    </>\n  )\n}\n","import React from 'react'\n\nimport CssBaseline from '@material-ui/core/CssBaseline'\nimport Backend from 'react-dnd-html5-backend'\nimport { DndProvider } from 'react-dnd'\n\nimport Layout from './Layout'\n\nimport './App.css'\nimport FeedbackContext from './Utils/FeedbackContext'\nimport ThemeContext from './Theme/ThemeProvider'\nimport ControllerContext from './ControllerProvider'\nimport { ConfigProvider } from './providers/Config'\n\nfunction App () {\n  console.log(' ======> Rendering app ')\n  return (\n    <>\n      <CssBaseline />\n      <ThemeContext>\n        <DndProvider backend={Backend}>\n          <ControllerContext>\n            <ConfigProvider>\n              <FeedbackContext>\n                <Layout />\n              </FeedbackContext>\n            </ConfigProvider>\n          </ControllerContext>\n        </DndProvider>\n      </ThemeContext>\n    </>\n  )\n}\n\nexport default App\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\n/* globals fetch */\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n)\n\nexport function register (config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href)\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config)\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          )\n        })\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config)\n      }\n    })\n  }\n}\n\nfunction registerValidSW (swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing\n        if (installingWorker == null) {\n          return\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              )\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration)\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.')\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration)\n              }\n            }\n          }\n        }\n      }\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error)\n    })\n}\n\nfunction checkValidServiceWorker (swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type')\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload()\n          })\n        })\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config)\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      )\n    })\n}\n\nexport function unregister () {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister()\n    })\n  }\n}\n","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport './index.css'\nimport App from './App'\nimport * as serviceWorker from './serviceWorker'\n\nReactDOM.render(<App />, document.getElementById('root'))\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister()\n"],"sourceRoot":""}